(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67498b81"],{8387:function(t,e,r){},c4a5:function(t,e,r){"use strict";r("8387")},ed20:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full working-oil-hours"},[e("div",{staticClass:"report-form-inner"},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[e("div",{staticClass:"f_left"},[e("MultiChoiceVehicle",{on:{onSelectDevice:t.onSelectDevice}})],1),e("div",{staticClass:"f_left"},[e("SelectDate",{attrs:{dateType:"datetimerange"},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{staticClass:"f_left"},[e("el-popover",{attrs:{placement:"bottom",width:"236",trigger:"click"}},[e("div",[e("el-button",{staticStyle:{width:"100px"},attrs:{slot:"reference",type:"primary",plain:"",loading:t.exportLoading1},on:{click:t.exportData},slot:"reference"},[t._v(t._s(t.$t("common.summary")))]),e("el-button",{staticStyle:{width:"100px"},attrs:{slot:"reference",type:"primary",loading:t.exportLoading2,plain:""},on:{click:t.exportDetailData},slot:"reference"},[t._v(t._s(t.$t("reportForm.detailed")))])],1),e("el-button",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[t._v(t._s(t.$t("common.export")))])],1)],1)]),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"45px"}},[e("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"sort-config":t.sortConfig,"menu-config":t.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.totalList},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{title:t.$t("reportForm.action"),width:"80",fixed:"left"},scopedSlots:t._u([{key:"default",fn:function(r){return[e("div",[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handleClickRow(r.row)}}},[t._v(t._s(t.$t("reportForm.calendar")))])],1)]}}])}),e("vxe-table-column",{attrs:{type:"expand",width:"36",fixed:"left"},scopedSlots:t._u([{key:"content",fn:function(r){var o=r.row;r.rowIndex;return[[e("div",{staticStyle:{"padding-left":"240px"}},[e("vxe-table",{staticClass:"mytable-scrollbar",attrs:{"menu-config":t.tableMenu,align:"right",border:"",resizable:"","auto-resize":"",height:o.tableHeight,"show-overflow":"","highlight-hover-row":"",size:"mini",data:o.days},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{field:"statisticsday",width:"100",title:t.$t("reportForm.date")}}),e("vxe-table-column",{attrs:{field:"totaldistance",formatter:t.numberToFixed2,align:"right",width:"80",title:t.$t("reportForm.mileage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"avgspeed",formatter:t.numberToFixed2,align:"right",width:"80",title:t.$t("reportForm.avgSpeed"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalacc",formatter:t.numberToFixed2,align:"right",width:"130",title:t.$t("reportForm.workingDuration")+"(H)",sortable:""}}),e("vxe-table-column",{attrs:{field:"totaloil",formatter:t.numberToFixed2,align:"right",width:"120",title:t.$t("reportForm.oilConsumption"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalidle",formatter:t.numberToFixed2,align:"right",width:"130",title:t.$t("home.idleDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"addoil",formatter:t.numberToFixed2,align:"right",width:"120",title:t.$t("reportForm.fuelVolume"),sortable:""}}),e("vxe-table-column",{attrs:{field:"leakoil",formatter:t.numberToFixed2,align:"right",width:"130",title:t.$t("reportForm.oilLeakage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"idleoil",formatter:t.numberToFixed2,align:"right",width:"120",title:t.$t("reportForm.idleOil"),sortable:""}}),e("vxe-table-column",{attrs:{field:"oilperhour",formatter:t.numberToFixed2,align:"right",width:"120",title:t.$t("reportForm.fuelConsumptionHour"),sortable:""}}),e("vxe-table-column",{attrs:{field:"runoilper100km",formatter:t.numberToFixed2,align:"right",width:"130",title:t.$t("reportForm.runoilper100km"),sortable:""}}),e("vxe-table-column",{attrs:{field:"oilper100km",formatter:t.numberToFixed2,align:"right",width:"120",title:t.$t("reportForm.fuelConsumption100km"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalnotrunningad",formatter:t.numberToFixed2,align:"right",width:"155",title:t.$t("reportForm.totalnotrunningad"),sortable:""}}),e("vxe-table-column",{attrs:{field:"addnotrunningad",formatter:t.numberToFixed2,align:"right",width:"155",title:t.$t("reportForm.addnotrunningad"),sortable:""}}),e("vxe-table-column",{attrs:{field:"leaknotrunningad",formatter:t.numberToFixed2,align:"right",width:"155",title:t.$t("reportForm.leaknotrunningad"),sortable:""}}),e("vxe-table-column",{attrs:{field:"endoil",formatter:t.numberToFixed2,align:"right",width:"125",title:t.$t("reportForm.currentTotaloil"),sortable:""}})],1)],1)]]}}])}),e("vxe-table-column",{attrs:{field:"devicename",title:t.$t("alarm.devName"),fixed:"left",width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"deviceid",title:t.$t("alarm.devNum"),width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"creater",title:t.$t("reportForm.creater"),width:"120",sortable:""},scopedSlots:t._u([{key:"default",fn:function(r){return[e("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[e("div",{staticClass:"parents-wrapper"},t._l(t.parentsList,(function(r){return e("div",{key:r.username},[t._v(t._s(r.username)+"("+t._s(r.usertypeStr)+")")])})),0),e("el-button",{staticStyle:{color:"#000000"},attrs:{slot:"reference",type:"text"},on:{click:function(e){return t.queryParents(r.row.creater)}},slot:"reference"},[t._v(t._s(r.row.creater))])],1)]}}])}),e("vxe-table-column",{attrs:{field:"groupname",title:t.$t("reportForm.groupName"),width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"totaldistance",formatter:t.numberToFixed2,align:"right",width:"120",title:t.$t("reportForm.mileage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"avgspeed",formatter:t.numberToFixed2,align:"right",width:"100",title:t.$t("reportForm.avgSpeed"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalacc",formatter:t.numberToFixed2,align:"right",width:"130",title:t.$t("reportForm.workingDuration")+"(H)",sortable:""}}),e("vxe-table-column",{attrs:{field:"totaloil",formatter:t.numberToFixed2,align:"right",width:"120",title:t.$t("reportForm.oilConsumption"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalidle",formatter:t.numberToFixed2,align:"right",width:"130",title:t.$t("home.idleDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"addoil",formatter:t.numberToFixed2,align:"right",width:"120",title:t.$t("reportForm.fuelVolume"),sortable:""}}),e("vxe-table-column",{attrs:{field:"leakoil",formatter:t.numberToFixed2,align:"right",width:"130",title:t.$t("reportForm.oilLeakage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"idleoil",formatter:t.numberToFixed2,align:"right",width:"120",title:t.$t("reportForm.idleOil"),sortable:""}}),e("vxe-table-column",{attrs:{field:"oilperhour",formatter:t.numberToFixed2,align:"right",width:"120",title:t.$t("reportForm.fuelConsumptionHour"),sortable:""}}),e("vxe-table-column",{attrs:{field:"runoilper100km",formatter:t.numberToFixed2,align:"right",width:"130",title:t.$t("reportForm.runoilper100km"),sortable:""}}),e("vxe-table-column",{attrs:{field:"oilper100km",formatter:t.numberToFixed2,align:"right",width:"130",title:t.$t("reportForm.fuelConsumption100km"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalnotrunningad",formatter:t.numberToFixed2,align:"right",width:"155",title:t.$t("reportForm.totalnotrunningad"),sortable:""}}),e("vxe-table-column",{attrs:{field:"addnotrunningad",formatter:t.numberToFixed2,align:"right",width:"155",title:t.$t("reportForm.addnotrunningad"),sortable:""}}),e("vxe-table-column",{attrs:{field:"leaknotrunningad",formatter:t.numberToFixed2,align:"right",width:"155",title:t.$t("reportForm.leaknotrunningad"),sortable:""}}),e("vxe-table-column",{attrs:{field:"endoil",formatter:t.numberToFixed2,align:"right",width:"125",title:t.$t("reportForm.currentTotaloil"),sortable:""}})],1)],1)]),e("WorkingHoursCalendar",{ref:"calendar",model:{value:t.calendarDialog,callback:function(e){t.calendarDialog=e},expression:"calendarDialog"}})],1)},i=[],a=(r("14d9"),r("d3b7"),r("159b"),r("4795"),r("e561")),l=r("d462"),n=r("5101"),s=r("1c31"),d=r("6e52"),u=r("2584"),m=r("4c3c"),c=r("a05b"),h=r("0c87"),p=r("c276"),b={name:"workingHoursOil",data:function(){return{dateRange:[new Date(n["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),new Date(n["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59")],loading:!1,exportLoading1:!1,exportLoading2:!1,calendarDialog:!1,totalList:[],chartDataList:[]}},mixins:[m["a"],c["a"],h["a"]],components:{MultiChoiceVehicle:a["a"],SelectDate:l["a"],WorkingHoursCalendar:u["a"]},watch:{dateRange:function(){this.loading||this.handleQuery()}},methods:{numberToFixed2:p["nb"],handleClickRow:function(t){var e=this;this.calendarDialog=!0,setTimeout((function(){e.$refs.calendar.setDeviceId(t.deviceid)}),300)},onSelectDevice:function(t){this.deviceids=t},handleQuery:function(){var t=this,e=this.deviceids,r=this.dateRange;if(0!=e.length)if(0!=r.length){this.loading=!0;var o=n["a"].format(r[0],"yyyy-MM-dd HH:mm:ss"),i=n["a"].format(r[1],"yyyy-MM-dd HH:mm:ss"),a={begintime:o,endtime:i,offset:n["a"].getOffset(),deviceids:e};Object(s["Z"])(a).then((function(e){var r=e.records,a=e.status;t.queryDateRange=o+"  -  "+i;var l=[];0==a?r.forEach((function(t){var e=t.deviceid,r=t.days,o=t.summary,i=d["a"].deviceInfos[e];o.deviceid=e,o.devicename=d["a"].getDeviceNameByDeviceId(e),o.creater=d["a"].getShowName(i.creater),o.groupname=i.groupname;var a=o.totalacc/1e3/3600,n=o.totalidle/1e3/3600;o.idleoil=o.idleoil/100,o.addoil=o.addoil/100,o.leakoil=o.leakoil/100,o.runoilper100km=o.runoilper100km,o.totaldistance=o.totaldistance/1e3,o.totalacc=a,o.totalidle=n,o.totaloil=o.totaloil/100,o.totalnotrunningad=o.totalnotrunningad/100,o.addnotrunningad=o.addnotrunningad/100,o.leaknotrunningad=o.leaknotrunningad/100,o.endoil=o.endoil/100,o.avgspeed=o.avgspeed,o.days=r,o.tableHeight=0==r.length?72:36*r.length+36,r.forEach((function(t){t.deviceid=e,t.devicename=o.devicename;var r=t.totalacc/1e3/3600,i=t.totalidle/1e3/3600;t.idleoil=t.idleoil/100,t.addoil=t.addoil/100,t.leakoil=t.leakoil/100,t.runoilper100km=t.runoilper100km,t.totaldistance=t.totaldistance/1e3,t.totalacc=r,t.totalidle=i,t.totaloil=t.totaloil/100,t.totalnotrunningad=t.totalnotrunningad/100,t.addnotrunningad=t.addnotrunningad/100,t.leaknotrunningad=t.leaknotrunningad/100,t.endoil=t.endoil/100,t.avgspeed=t.avgspeed,t.oilperhour=t.oilperhour,t.oilper100km=t.oilper100km})),l.push(o)})):1==a?t.$XModal.message({message:t.$t("tips.deviceExceeds100"),status:"error",zIndex:9999}):2==a&&t.$XModal.message({message:t.$t("tips.dayExceeds2"),status:"error",zIndex:9999}),t.loading=!1,t.totalList=l,1==l.length&&t.$refs.xTable.setRowExpand(l[0],!0)}))}else this.$XModal.message({message:this.$t("tips.selectTime"),status:"error",zIndex:9999});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},exportData:function(){if(0!=this.totalList.length){var t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.creater"),this.$t("reportForm.groupName"),this.$t("reportForm.mileage"),this.$t("reportForm.avgSpeed"),this.$t("reportForm.workingDuration")+"(H)",this.$t("reportForm.oilConsumption"),this.$t("reportForm.fuelVolume"),this.$t("reportForm.oilLeakage"),this.$t("reportForm.idleOil"),this.$t("reportForm.fuelConsumptionHour"),this.$t("reportForm.runoilper100km"),this.$t("reportForm.fuelConsumption100km"),this.$t("reportForm.totalnotrunningad"),this.$t("reportForm.addnotrunningad"),this.$t("reportForm.leaknotrunningad"),this.$t("reportForm.currentTotaloil")]];this.totalList.forEach((function(e,r){var o=[];o.push(r+1),o.push(e.devicename),o.push(e.deviceid),o.push(e.creater),o.push(e.groupname),o.push(Object(p["nb"])(e.totaldistance)),o.push(Object(p["nb"])(e.avgspeed)),o.push(Object(p["nb"])(e.totalacc)),o.push(Object(p["nb"])(e.totaloil)),o.push(Object(p["nb"])(e.addoil)),o.push(Object(p["nb"])(e.leakoil)),o.push(Object(p["nb"])(e.idleoil)),o.push(Object(p["nb"])(e.oilperhour)),o.push(Object(p["nb"])(e.runoilper100km)),o.push(Object(p["nb"])(e.oilper100km)),o.push(Object(p["nb"])(e.totalnotrunningad)),o.push(Object(p["nb"])(e.addnotrunningad)),o.push(Object(p["nb"])(e.leaknotrunningad)),o.push(Object(p["nb"])(e.endoil)),t.push(o)}));var e={title:this.$t("reportForm.workingHoursOil")+"_"+this.$t("common.summary"),data:t,dateRange:this.queryDateRange};this.exportLoading1=!0,new ExcelCls(e).exportExcel(this)}},exportDetailData:function(){if(0!=this.totalList.length){var t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.date"),this.$t("reportForm.mileage"),this.$t("reportForm.avgSpeed"),this.$t("reportForm.workingDuration")+"(H)",this.$t("reportForm.oilConsumption"),this.$t("reportForm.fuelVolume"),this.$t("reportForm.oilLeakage"),this.$t("reportForm.idleOil"),this.$t("reportForm.fuelConsumptionHour"),this.$t("reportForm.runoilper100km"),this.$t("reportForm.fuelConsumption100km"),this.$t("reportForm.totalnotrunningad"),this.$t("reportForm.addnotrunningad"),this.$t("reportForm.leaknotrunningad"),this.$t("reportForm.currentTotaloil")]];this.totalList.forEach((function(e,r){e.days.forEach((function(e,r){var o=[];o.push(r+1),o.push(e.devicename),o.push(e.deviceid),o.push(e.statisticsday),o.push(Object(p["nb"])(e.totaldistance)),o.push(Object(p["nb"])(e.avgspeed)),o.push(Object(p["nb"])(e.totalacc)),o.push(Object(p["nb"])(e.totaloil)),o.push(Object(p["nb"])(e.addoil)),o.push(Object(p["nb"])(e.leakoil)),o.push(Object(p["nb"])(e.idleoil)),o.push(Object(p["nb"])(e.oilperhour)),o.push(Object(p["nb"])(e.runoilper100km)),o.push(Object(p["nb"])(e.oilper100km)),o.push(Object(p["nb"])(e.totalnotrunningad)),o.push(Object(p["nb"])(e.addnotrunningad)),o.push(Object(p["nb"])(e.leaknotrunningad)),o.push(Object(p["nb"])(e.endoil)),t.push(o)}));var o=[];o.push(""),o.push(""),o.push(""),o.push(""),o.push(Object(p["nb"])(e.totaldistance)),o.push(Object(p["nb"])(e.avgspeed)),o.push(Object(p["nb"])(e.totalacc)),o.push(Object(p["nb"])(e.totaloil)),o.push(Object(p["nb"])(e.addoil)),o.push(Object(p["nb"])(e.leakoil)),o.push(Object(p["nb"])(e.idleoil)),o.push(Object(p["nb"])(e.oilperhour)),o.push(Object(p["nb"])(e.runoilper100km)),o.push(Object(p["nb"])(e.oilper100km)),o.push(Object(p["nb"])(e.totalnotrunningad)),o.push(Object(p["nb"])(e.addnotrunningad)),o.push(Object(p["nb"])(e.leaknotrunningad)),o.push(""),t.push(o)}));var e={title:this.$t("reportForm.workingHoursOil")+"_"+this.$t("reportForm.detailed"),data:t,dateRange:this.queryDateRange};this.exportLoading2=!0,new ExcelCls(e).exportExcel(this)}}},mounted:function(){this.deviceids=[]}},g=b,f=(r("c4a5"),r("2877")),v=Object(f["a"])(g,o,i,!1,null,null,null),x=v.exports;e["default"]=x}}]);