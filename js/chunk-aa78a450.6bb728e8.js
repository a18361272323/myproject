(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa78a450"],{"0595":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"quick-time-range"},[e("div",{staticClass:"quick-time-range-wrapper"},t._l(t.list,(function(a){return e("div",{key:a.type,style:{color:a.type==t.type?"#409EFF":""},on:{click:function(e){return t.selectDate(a.type)}}},[t._v(t._s(a.label))])})),0),e("div",{staticClass:"quick-time-range-space"}),e("div",{staticClass:"quick-time-range-btn",on:{click:function(e){t.isCollapse=!t.isCollapse}}},[t.isCollapse?e("i",{staticClass:"el-icon-arrow-right"}):e("i",{staticClass:"el-icon-arrow-left"})])])},n=[],r=a("5101"),o={name:"QuickTimeRange",props:{value:{type:Array,default:function(){return[]}},dateType:{type:String,default:"date"}},watch:{isCollapse:function(){this.setList()}},data:function(){return{isCollapse:!0,type:0,list:[]}},methods:{setList:function(){this.isCollapse?this.list=[{label:this.$t("reportForm.toDay"),type:0},{label:this.$t("reportForm.yesterDay"),type:1},{label:this.$t("reportForm.recent3Days"),type:3}]:this.list=[{label:this.$t("reportForm.recent7Days"),type:7},{label:this.$t("reportForm.recent10Days"),type:10},{label:this.$t("reportForm.recent30Days"),type:30}]},selectDate:function(t){var e="datetimerange"==this.dateType,a=[],i=new Date,n=new Date;switch(e&&(i=new Date(r["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),n=new Date(r["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59")),t){case 0:a=[new Date(r["a"].format(i,"yyyy-MM-dd")+" 00:00:00"),new Date(r["a"].format(n,"yyyy-MM-dd")+" 23:59:59")];break;case 1:i.setTime(i.getTime()-864e5),a=[i,n];break;case 3:i.setTime(i.getTime()-2592e5),a=[i,n];break;case 7:i.setTime(i.getTime()-6048e5),a=[i,n];break;case 10:i.setTime(i.getTime()-864e6),a=[i,n];break;case 30:i.setTime(i.getTime()-2592e6),a=[i,n];break}this.type=t,this.$emit("input",a)}},mounted:function(){var t=this;this.$nextTick((function(){t.setList()}))}},s=o,l=(a("c51d"),a("2877")),c=Object(l["a"])(s,i,n,!1,null,null,null);e["a"]=c.exports},"271ae":function(t,e,a){},"2ddc":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"multi-choice",style:t.warpStyle},[e("div",{staticClass:"multi-choice-input"},["daterange"==t.dateType?e("div",[e("el-date-picker",{attrs:{type:t.dateType,"picker-options":t.pickerOptions,"range-separator":"-",align:"center","unlink-panels":"",clearable:!1,"start-placeholder":t.$t("device.driverinitialdate"),"end-placeholder":t.$t("device.drivereffectivedate")},on:{change:t.onChange},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1):t._e(),"date"==t.dateType?e("div",[e("el-date-picker",{attrs:{type:"date","picker-options":t.datePickerOptions},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1):t._e(),"datetimerange"==t.dateType?e("div",{staticClass:"datetimerange"},[e("el-date-picker",{attrs:{type:t.dateType,"range-separator":"-","picker-options":t.pickerOptionsTime,align:"center","unlink-panels":"",clearable:!1,"start-placeholder":t.$t("device.driverinitialdate"),"end-placeholder":t.$t("device.drivereffectivedate"),"default-time":["00:00:00","23:59:59"]},on:{change:t.onChange},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1):t._e(),"month"==t.dateType?e("div",[e("el-date-picker",{attrs:{type:"month"},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1):t._e()])])},n=[],r=(a("99af"),a("5101")),o=a("5867"),s={name:"SelectDate",props:{value:{type:Array|Date,default:function(){return[]}},dateType:{type:String,default:"daterange"},label:{type:String,default:function(){return this.$t("common.selectTime")}}},computed:{isDaterange:function(){return"daterange"==this.dateType},warpStyle:function(){var t=200;switch(this.dateType){case"date":t=120;break;case"daterange":t=230;break;case"datetimerange":t=310;break}return{width:"".concat(t,"px")}}},mixins:[o["a"]],data:function(){var t=864e5;return{dateRange:[],date:new Date,month:new Date,pickerOptions:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(t){var e=new Date;t.$emit("pick",[e,e])}},{text:this.$t("reportForm.yesterDay"),onClick:function(e){var a=new Date;a.setTime(a.getTime()-t),e.$emit("pick",[a,a])}},{text:this.$t("missing.theWeek"),onClick:function(e){var a=new Date,i=new Date,n=a.getDay();a.setTime(a.getTime()-t*(n-1)),i.setTime(a.getTime()+6*t),e.$emit("pick",[a,i])}},{text:this.$t("missing.lastWeek"),onClick:function(e){var a=new Date,i=new Date,n=a.getDay(),r=a.getTime()-t*(n-1);a.setTime(r-7*t),i.setTime(r-t),e.$emit("pick",[a,i])}},{text:this.$t("missing.thisMonth"),onClick:function(t){var e=new Date,a=e.getFullYear(),i=e.getMonth()+1,n=new Date("".concat(a,"-").concat(i,"-01")),r=new Date("".concat(a,"-").concat(i,"-01 00:00:00"));r.setMonth(r.getMonth()+1),r=new Date(r.getTime()-1e3),t.$emit("pick",[n,r])}},{text:this.$t("missing.lastMonth"),onClick:function(t){var e=new Date;e.setMonth(e.getMonth()-1);var a=e.getFullYear(),i=e.getMonth()+1,n=new Date(new Date(a,i,1)-1).getDate(),r=new Date("".concat(a,"-").concat(i,"-01")),o=new Date("".concat(a,"-").concat(i,"-").concat(n));t.$emit("pick",[r,o])}}]},pickerOptionsTime:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(t){var e=new Date(r["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),a=new Date(r["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59");t.$emit("pick",[e,a])}},{text:this.$t("reportForm.yesterDay"),onClick:function(e){var a=new Date;a.setTime(a.getTime()-t),e.$emit("pick",[new Date(r["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(r["a"].format(a,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.theWeek"),onClick:function(e){var a=new Date,i=new Date,n=a.getDay();a.setTime(a.getTime()-t*(n-1)),i.setTime(a.getTime()+6*t),e.$emit("pick",[new Date(r["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(r["a"].format(i,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastWeek"),onClick:function(e){var a=new Date,i=new Date,n=a.getDay(),o=a.getTime()-t*(n-1);a.setTime(o-7*t),i.setTime(o-t),e.$emit("pick",[new Date(r["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(r["a"].format(i,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.thisMonth"),onClick:function(t){var e=new Date,a=e.getFullYear(),i=e.getMonth()+1,n=new Date("".concat(a,"-").concat(i,"-01")),o=new Date("".concat(a,"-").concat(i,"-01 00:00:00"));o.setMonth(o.getMonth()+1),o=new Date(o.getTime()-1e3),t.$emit("pick",[new Date(r["a"].format(n,"yyyy-MM-dd")+" 00:00:00"),new Date(r["a"].format(o,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastMonth"),onClick:function(t){var e=new Date;e.setMonth(e.getMonth()-1);var a=e.getFullYear(),i=e.getMonth()+1,n=new Date(new Date(a,i,1)-1).getDate(),o=new Date("".concat(a,"-").concat(i,"-01")),s=new Date("".concat(a,"-").concat(i,"-").concat(n));t.$emit("pick",[new Date(r["a"].format(o,"yyyy-MM-dd")+" 00:00:00"),new Date(r["a"].format(s,"yyyy-MM-dd")+" 23:59:59")])}}]}}},watch:{dateRange:function(t){null==t?this.$emit("input",[]):this.$emit("input",t)},value:function(t){this.dateRange=t},date:function(t){this.$emit("input",t)},month:function(t){this.$emit("input",t)}},methods:{onChange:function(t){this.$emit("input",t)}},mounted:function(){"date"==this.dateType?this.date=this.value:"month"==this.dateType?this.month=this.value:this.dateRange=this.value}},l=s,c=(a("e716"),a("2877")),d=Object(c["a"])(l,i,n,!1,null,"5dbb8594",null);e["a"]=d.exports},"4c3c":function(t,e,a){"use strict";a("4e82");e["a"]={data:function(){return{sortConfig:{sortMethod:function(t){var e=t.data,a=t.sortList,i=a[0],n=i.property,r=i.order,o=[];return o="desc"===r?e.sort((function(t,e){var a=t[n],i=e[n];if(isNaN(a)&&!isNaN(Date.parse(a))&&isNaN(i)&&!isNaN(Date.parse(i)))return Date.parse(i)-Date.parse(a);if(a=parseFloat(a),i=parseFloat(i),isNaN(a)||isNaN(i)){var r=e[n]+"";return r.localeCompare(t[n])}return i-a})):"asc"===r?e.sort((function(t,e){var a=t[n],i=e[n];if(isNaN(a)&&!isNaN(Date.parse(a))&&isNaN(i)&&!isNaN(Date.parse(i)))return Date.parse(a)-Date.parse(i);if(a=parseFloat(t[n]),i=parseFloat(e[n]),isNaN(a)||isNaN(i)){var r=t[n]+"";return r.localeCompare(e[n])}return a-i})):e.sort(),o}}}}}},"57c9":function(t,e,a){"use strict";var i=a("0595");e["a"]=i["a"]},"5aff":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"h",(function(){return n})),a.d(e,"l",(function(){return r})),a.d(e,"k",(function(){return o})),a.d(e,"c",(function(){return s})),a.d(e,"d",(function(){return l})),a.d(e,"e",(function(){return c})),a.d(e,"f",(function(){return d})),a.d(e,"g",(function(){return u})),a.d(e,"m",(function(){return m})),a.d(e,"i",(function(){return h})),a.d(e,"a",(function(){return p})),a.d(e,"j",(function(){return f}));var i="#2D9F28",n="#89C6F2",r="#FFC65E",o="red",s="#1EBEFF",l="#E505F7",c="#40A703",d="#F27908",u="#F180D1",m="#0F1F46",h="#000000",p={backgroundColor:"rgba(255,255,255,0.85)",borderColor:"transparent",textStyle:{fontSize:12,color:"#000"},padding:2},f=function(t,e,a,i,n){var r=t[0],o=n.contentSize,s=n.viewSize;return r+10>s[0]-o[0]?r=r-o[0]-10:r+=10,[r,"0%"]}},b1f8:function(t,e,a){"use strict";a("e199")},b518:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full fuel-consumption-trend"},[e("div",{staticClass:"report-form-inner"},[e("el-scrollbar",{staticStyle:{width:"100%"}},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"45px"}},[e("div",{staticClass:"f_left"},[e("MultiChoiceVehicle",{on:{onSelectDevice:t.onSelectDevice}})],1),e("div",{staticClass:"f_left"},[e("SelectDate",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("QuickTimeRange",{ref:"quickTimeRange",model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{type:"primary",loading:t.exportLoading1},on:{click:t.exportData}},[t._v(t._s(t.$t("common.export")))])],1)])]),e("div",{staticClass:"report-form-inner-tabs"},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("reportForm.hoursStatistics")+"(".concat(t.totalList.length,")"),name:"tabTotal"}}),e("el-tab-pane",{attrs:{name:"details"}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"details"==t.activeName,expression:"activeName=='details'"}],staticClass:"tableTitle"},[e("b",{domProps:{textContent:t._s(t.tableTitle)}}),t._v("("+t._s(t.detailsList.length)+") "),e("span",[t._v(t._s(t.$t("reportForm.totalWorkingDuration"))+":"+t._s(t.totalWorkingDuration))])])],1),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"80px"}},[e("div",{style:t.statisticsStyle},[e("vxe-table",{attrs:{"sort-config":t.sortConfig,"menu-config":t.tableMenu,border:"",resizable:"","show-overflow":"","auto-resize":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.totalList},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{title:t.$t("reportForm.action"),width:"70"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleClickRow(a.row)}}},[t._v(t._s(t.$t("reportForm.details")))])]}}])}),e("vxe-table-column",{attrs:{field:"devicename",title:t.$t("alarm.devName"),sortable:""}}),e("vxe-table-column",{attrs:{field:"deviceid",title:t.$t("alarm.devNum"),sortable:""}}),e("vxe-table-column",{attrs:{field:"dateStr",width:"160",title:t.$t("reportForm.time"),sortable:""}}),e("vxe-table-column",{attrs:{field:"creater",title:t.$t("monitor.customer"),sortable:""}}),e("vxe-table-column",{attrs:{field:"groupname",title:t.$t("reportForm.groupName"),sortable:""}}),e("vxe-table-column",{attrs:{field:"count",title:t.$t("reportForm.workingDays"),sortable:""}}),e("vxe-table-column",{attrs:{field:"durationStr",align:"right",title:t.$t("reportForm.workingDuration"),sortable:""}})],1)],1),e("div",{style:t.detailsStyle},[e("div",{staticClass:"fuel-consumption-trend-echarts"},[e("OilTrendEcharts",{ref:"echartsIns",on:{"select-index":t.onSelectIndex}})],1),e("div",{staticClass:"fuel-consumption-trend-detail-table"},[e("vxe-table",{ref:"xTable",attrs:{"menu-config":t.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.detailsList},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"statisticsday",width:"120",title:t.$t("reportForm.date"),sortable:""}}),e("vxe-table-column",{attrs:{field:"mileage",formatter:t.numberToFixed2,align:"right",width:"100",title:t.$t("reportForm.mileage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"averagespeed",formatter:t.numberToFixed2,align:"right",width:"100",title:t.$t("reportForm.avgSpeed")}}),e("vxe-table-column",{attrs:{field:"totaloil",formatter:t.numberToFixed2,align:"right",width:"140",title:t.$t("reportForm.oilConsumption"),sortable:""}}),e("vxe-table-column",{attrs:{field:"addoil",formatter:t.numberToFixed2,align:"right",width:"130",title:t.$t("reportForm.fuelVolume"),sortable:""}}),e("vxe-table-column",{attrs:{field:"leakoil",formatter:t.numberToFixed2,align:"right",width:"150",title:t.$t("reportForm.oilLeakage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"idleoil",formatter:t.numberToFixed2,align:"right",width:"110",title:t.$t("reportForm.idleOil"),sortable:""}}),e("vxe-table-column",{attrs:{field:"runoilper100km",formatter:t.numberToFixed2,align:"right",width:"140",title:t.$t("reportForm.runoilper100km"),sortable:""}}),e("vxe-table-column",{attrs:{field:"oilper100km",formatter:t.numberToFixed2,align:"right",width:"130",title:t.$t("reportForm.fuelConsumption100km"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalaccStr",formatter:t.numberToFixed2,align:"right",width:"150",title:t.$t("reportForm.workingDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"oilperhour",formatter:t.numberToFixed2,align:"right",width:"120",title:t.$t("reportForm.fuelConsumptionHour"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalnotrunningad",formatter:t.numberToFixed2,align:"right",width:"130",title:t.$t("reportForm.totalnotrunningad"),sortable:""}}),e("vxe-table-column",{attrs:{field:"addnotrunningad",formatter:t.numberToFixed2,align:"right",width:"130",title:t.$t("reportForm.addnotrunningad"),sortable:""}}),e("vxe-table-column",{attrs:{field:"leaknotrunningad",formatter:t.numberToFixed2,align:"right",width:"130",title:t.$t("reportForm.leaknotrunningad"),sortable:""}})],1)],1)])])],1)])},n=[],r=(a("14d9"),a("4e82"),a("a9e3"),a("b680"),a("d3b7"),a("159b"),a("e561")),o=a("d462"),s=a("57c9"),l=a("1c31"),c=a("5101"),d=a("c276"),u=a("6e52"),m=function(){var t=this,e=t._self._c;return e("div",{ref:"chartId",staticClass:"full"})},h=[],p=a("ade3"),f=a("5530"),g=(a("b0c0"),a("43c8")),v=a.n(g),y=a("2f62"),b=a("5aff"),k={name:"OilTrendEcharts",computed:Object(f["a"])({},Object(y["b"])(["isZh"])),methods:{initChart:function(){var t=this,e=this.$t("reportForm.mileage"),a=this.$t("reportForm.oilConsumption"),i=this.$t("reportForm.idleOil"),n=this.$t("reportForm.fuelConsumption100km"),r=this.$t("reportForm.workingHours"),o=this.$t("reportForm.fuelConsumptionHour");this.selectedLegend=Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])(Object(p["a"])({},e,!1),a,!1),i,!1),o,!1),n,!1),r,!1),this.oil=[],this.distance=[],this.recvtime=[],this.totalaccs=[],this.oilperhours=[],this.idleoils=[],this.runoilper100kms=[],this.fuelConsumption100kms=[];var s=this.$refs.chartId;this.chartsIns=v.a.init(s),this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.getZr().on("click",(function(e){var a=[e.offsetX,e.offsetY];if(t.chartsIns.containPixel("grid",a)&&t.recvtime.length){var i=t.chartsIns.convertFromPixel({seriesIndex:0},[e.offsetX,e.offsetY])[0];t.$emit("select-index",{rowIndex:i})}}))},updateChartsOption:function(t){var e=[],a=[],i=[],n=[],r=[],o=[],s=[],l=[];t.forEach((function(t){e.push(t.totaloil),n.push(t.totalaccStr),r.push(t.oilperhour),a.push(t.mileage),i.push(t.statisticsday),l.push(t.oilper100km),o.push(t.idleoil),s.push(t.runoilper100km)})),this.oil=e,this.distance=a,this.recvtime=i,this.totalaccs=n,this.oilperhours=r,this.idleoils=o,this.runoilper100kms=s,this.fuelConsumption100kms=l,this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.resize()},resize:function(){this.chartsIns.resize()},getChartsOption:function(){var t=this.$t("reportForm.mileage"),e=this.$t("reportForm.oilConsumption"),a=this.$t("tips.noData"),i=this.$t("reportForm.idleOil"),n=this.$t("reportForm.runoilper100km"),r=this.$t("reportForm.fuelConsumption100km"),o=this.$t("reportForm.workingHours"),s=this.$t("reportForm.fuelConsumptionHour"),l=this.$t("reportForm.date");return{tooltip:Object(f["a"])(Object(f["a"])({trigger:"axis"},b["a"]),{},{formatter:function(a,c){var u="<div>".concat(a[0].name,"</div>");for(var m in a){var h=a[m].seriesName,p=a[m].value;h&&h!=l&&(u+=h==t?Object(d["i"])(b["b"],h,p,"km"):h==s?Object(d["i"])(b["h"],h,p,"L"):h==e?Object(d["i"])(b["k"],h,p,"L"):h==i?Object(d["i"])(b["l"],h,p,"L"):h==n?Object(d["i"])(b["c"],h,p,"L"):h==r?Object(d["i"])(b["d"],h,p,"L"):h==o?Object(d["i"])(b["m"],h,p,"H"):Object(d["i"])(b["m"],h,p,""))}return'<div style="width:180px">'.concat(u,"</div>")},position:b["j"]}),legend:{data:[n,r,t,e,i,o,s],y:13,x:"center",selected:this.selectedLegend},grid:{x:100,y:40,x2:80,y2:30},xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!1},data:0===this.recvtime.length?[a]:this.recvtime}],yAxis:[{type:"value",position:"bottom",nameLocation:"end",boundaryGap:[0,.2],axisLabel:{formatter:"{value}"}}],series:[{name:t,type:"line",symbol:"none",yAxisIndex:0,color:b["b"],data:this.distance,smooth:!0},{name:e,type:"line",symbol:"none",yAxisIndex:0,color:b["k"],data:this.oil,smooth:!0},{name:i,type:"line",symbol:"none",yAxisIndex:0,color:b["l"],data:this.idleoils,smooth:!0},{name:n,type:"line",symbol:"none",yAxisIndex:0,color:b["c"],data:this.runoilper100kms,smooth:!0},{name:r,type:"line",symbol:"none",yAxisIndex:0,color:b["d"],data:this.fuelConsumption100kms,smooth:!0},{name:o,type:"line",symbol:"none",yAxisIndex:0,color:b["m"],data:this.totalaccs,smooth:!0},{name:s,type:"line",symbol:"none",yAxisIndex:0,color:"#ECC849",data:this.oilperhours,smooth:!0}]}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))}},x=k,$=a("2877"),w=Object($["a"])(x,m,h,!1,null,null,null),D=w.exports,F=a("4c3c"),C=a("a05b"),T={name:"FuelConsumptionTrend",data:function(){return{loading:!1,exportLoading1:!1,activeName:"tabTotal",tableTitle:"",totalWorkingDuration:"",dateRange:[new Date(Date.now()-6048e5),new Date],totalList:[],detailsList:[],sortConfig:{sortMethod:function(t){var e=t.data,a=t.sortList,i=a[0],n=i.property,r=i.order,o=[];return o="durationStr"==n?"desc"===r?e.sort((function(t,e){return e.duration-t.duration})):"asc"===r?e.sort((function(t,e){return t.duration-e.duration})):e.sort():"totalaccStr"==n?"desc"===r?e.sort((function(t,e){return e.totalacc-t.totalacc})):"asc"===r?e.sort((function(t,e){return t.totalacc-e.totalacc})):e.sort():"desc"===r?e.sort((function(t,e){var a=e[n]+"";return a.localeCompare(t[n])})):"asc"===r?e.sort((function(t,e){var a=t[n]+"";return a.localeCompare(e[n])})):e.sort(),o}}}},mixins:[F["a"],C["a"]],watch:{dateRange:function(){this.loading||this.handleQuery()}},computed:{statisticsStyle:function(){return{zIndex:"tabTotal"==this.activeName?999:0}},detailsStyle:function(){return{zIndex:"details"==this.activeName?999:0}}},components:{MultiChoiceVehicle:r["a"],SelectDate:o["a"],QuickTimeRange:s["a"],OilTrendEcharts:D},methods:{numberToFixed2:d["nb"],onSelectIndex:function(t){var e=t.rowIndex,a=this.detailsList[e];this.$refs.xTable.setCurrentRow(a),this.$refs.xTable.scrollToRow(a)},onSelectDevice:function(t){this.deviceids=t},handleQuery:function(){var t=this,e=this.deviceids,a=this.dateRange;if(0!=e.length)if(0!=a.length){"details"==this.activeName&&(this.activeName="tabTotal",this.totalList=[],this.detailsList=[]);var i=c["a"].format(a[0],"yyyy-MM-dd"),n=c["a"].format(a[1],"yyyy-MM-dd"),r={startday:i,endday:n,offset:c["a"].getOffset(),devices:e};this.loading=!0,this.queryDetailDateRange=r.startday+"  "+r.endday,Object(l["X"])(r).then((function(e){var a=e.records;t.loading=!1;var i=[];null!=a&&(a.forEach((function(t){var e=t.deviceid,a=u["a"].deviceInfos[e],i=a.devicename;t.dateStr=r.startday+" - "+r.endday,t.startday=r.startday,t.endday=r.endday,t.devicename=i,t.creater=u["a"].getShowName(a.creater),t.groupname=a.groupname;var n=0,o=0,s=t.records;s.forEach((function(t){n+=t.totalacc,t.totalacc>0&&o++})),t.count=o,t.duration=Number((n/1e3/3600).toFixed(2)),t.durationStr=Object(d["Hb"])(n,!0)})),a.sort((function(t,e){var a=0;return a=e.duration-t.duration,0==a&&(a=e.devicename.localeCompare(t.devicename)),a})),i=a),t.totalList=i})).catch((function(e){console.log(e),t.loading=!1}))}else this.$XModal.message({message:this.$t("tips.selectTime"),status:"error",zIndex:9999});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},handleClickRow:function(t){var e=t.records;if(e&&e.length>0){this.activeName="details",this.tableTitle=t.devicename+"-"+t.deviceid,this.totalWorkingDuration=t.durationStr;var a=[];e.forEach((function(e){e.devicename=t.devicename,e.totaloil=e.totaloil/100,e.addoil=e.addoil/100,e.leakoil=e.leakoil/100,e.idleoil=e.idleoil/100,e.totalnotrunningad=e.totalnotrunningad/100,e.addnotrunningad=e.addnotrunningad/100,e.leaknotrunningad=e.leaknotrunningad/100,e.totalaccStr=e.totalacc/1e3/3600,e.mileage=e.totaldistance/1e3,e.averagespeed=e.avgspeed.toFixed(2),a.push(e)})),this.detailsList=a,this.$refs.echartsIns.updateChartsOption(a)}else this.$XModal.message({message:this.$t("tips.noData"),status:"error",zIndex:9999})},exportData:function(){if("tabTotal"==this.activeName){var t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.time"),this.$t("monitor.customer"),this.$t("reportForm.groupName"),this.$t("reportForm.workingDays"),this.$t("reportForm.workingDuration")]];if(0==this.totalList.length)return;this.totalList.forEach((function(e,a){var i=[];i.push(a+1),i.push(e.devicename),i.push(e.deviceid),i.push(e.dateStr),i.push(e.creater),i.push(e.groupname),i.push(e.count),i.push(e.durationStr),t.push(i)}));var e={title:this.$t("reportForm.fuelConsumptionTrend"),data:t,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(e).exportExcel(this)}else{var a=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.date"),this.$t("reportForm.mileage"),this.$t("reportForm.avgSpeed"),this.$t("reportForm.oilConsumption"),this.$t("reportForm.fuelVolume"),this.$t("reportForm.oilLeakage"),this.$t("reportForm.idleOil"),this.$t("reportForm.runoilper100km"),this.$t("reportForm.fuelConsumption100km"),this.$t("reportForm.workingDuration"),this.$t("reportForm.fuelConsumptionHour"),this.$t("reportForm.totalnotrunningad"),this.$t("reportForm.addnotrunningad"),this.$t("reportForm.leaknotrunningad")]];if(0==this.detailsList.length)return;this.detailsList.forEach((function(t,e){var i=[];i.push(e+1),i.push(t.devicename),i.push(t.deviceid),i.push(t.statisticsday),i.push(Object(d["nb"])(t.mileage)),i.push(Object(d["nb"])(t.averagespeed)),i.push(Object(d["nb"])(t.totaloil)),i.push(Object(d["nb"])(t.addoil)),i.push(Object(d["nb"])(t.leakoil)),i.push(Object(d["nb"])(t.idleoil)),i.push(Object(d["nb"])(t.runoilper100km)),i.push(Object(d["nb"])(t.oilper100km)),i.push(Object(d["nb"])(t.totalaccStr)),i.push(Object(d["nb"])(t.oilperhour)),i.push(Object(d["nb"])(t.totalnotrunningad)),i.push(Object(d["nb"])(t.addnotrunningad)),i.push(Object(d["nb"])(t.leaknotrunningad)),a.push(i)})),this.exportLoading1=!0;e={title:this.$t("reportForm.fuelConsumptionTrend"),data:a};new ExcelCls(e).exportExcel(this)}}},mounted:function(){this.deviceids=[],this.$refs.quickTimeRange.type=7,this.$refs.quickTimeRange.isCollapse=!1,this.$refs.quickTimeRange.setList()}},M=T,O=(a("b1f8"),Object($["a"])(M,i,n,!1,null,null,null)),N=O.exports;e["default"]=N},c51d:function(t,e,a){"use strict";a("ecfc")},d462:function(t,e,a){"use strict";var i=a("2ddc");e["a"]=i["a"]},e199:function(t,e,a){},e561:function(t,e,a){"use strict";var i=a("ea22");e["a"]=i["a"]},e716:function(t,e,a){"use strict";a("271ae")},ecfc:function(t,e,a){}}]);