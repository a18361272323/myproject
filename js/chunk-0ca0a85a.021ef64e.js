(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ca0a85a"],{"0595":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"quick-time-range"},[t("div",{staticClass:"quick-time-range-wrapper"},e._l(e.list,(function(a){return t("div",{key:a.type,style:{color:a.type==e.type?"#409EFF":""},on:{click:function(t){return e.selectDate(a.type)}}},[e._v(e._s(a.label))])})),0),t("div",{staticClass:"quick-time-range-space"}),t("div",{staticClass:"quick-time-range-btn",on:{click:function(t){e.isCollapse=!e.isCollapse}}},[e.isCollapse?t("i",{staticClass:"el-icon-arrow-right"}):t("i",{staticClass:"el-icon-arrow-left"})])])},r=[],n=a("5101"),s={name:"QuickTimeRange",props:{value:{type:Array,default:function(){return[]}},dateType:{type:String,default:"date"}},watch:{isCollapse:function(){this.setList()}},data:function(){return{isCollapse:!0,type:0,list:[]}},methods:{setList:function(){this.isCollapse?this.list=[{label:this.$t("reportForm.toDay"),type:0},{label:this.$t("reportForm.yesterDay"),type:1},{label:this.$t("reportForm.recent3Days"),type:3}]:this.list=[{label:this.$t("reportForm.recent7Days"),type:7},{label:this.$t("reportForm.recent10Days"),type:10},{label:this.$t("reportForm.recent30Days"),type:30}]},selectDate:function(e){var t="datetimerange"==this.dateType,a=[],i=new Date,r=new Date;switch(t&&(i=new Date(n["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),r=new Date(n["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59")),e){case 0:a=[new Date(n["a"].format(i,"yyyy-MM-dd")+" 00:00:00"),new Date(n["a"].format(r,"yyyy-MM-dd")+" 23:59:59")];break;case 1:i.setTime(i.getTime()-864e5),a=[i,r];break;case 3:i.setTime(i.getTime()-2592e5),a=[i,r];break;case 7:i.setTime(i.getTime()-6048e5),a=[i,r];break;case 10:i.setTime(i.getTime()-864e6),a=[i,r];break;case 30:i.setTime(i.getTime()-2592e6),a=[i,r];break}this.type=e,this.$emit("input",a)}},mounted:function(){var e=this;this.$nextTick((function(){e.setList()}))}},o=s,l=(a("c51d"),a("2877")),c=Object(l["a"])(o,i,r,!1,null,null,null);t["a"]=c.exports},"271ae":function(e,t,a){},"2ddc":function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"multi-choice",style:e.warpStyle},[t("div",{staticClass:"multi-choice-input"},["daterange"==e.dateType?t("div",[t("el-date-picker",{attrs:{type:e.dateType,"picker-options":e.pickerOptions,"range-separator":"-",align:"center","unlink-panels":"",clearable:!1,"start-placeholder":e.$t("device.driverinitialdate"),"end-placeholder":e.$t("device.drivereffectivedate")},on:{change:e.onChange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1):e._e(),"date"==e.dateType?t("div",[t("el-date-picker",{attrs:{type:"date","picker-options":e.datePickerOptions},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1):e._e(),"datetimerange"==e.dateType?t("div",{staticClass:"datetimerange"},[t("el-date-picker",{attrs:{type:e.dateType,"range-separator":"-","picker-options":e.pickerOptionsTime,align:"center","unlink-panels":"",clearable:!1,"start-placeholder":e.$t("device.driverinitialdate"),"end-placeholder":e.$t("device.drivereffectivedate"),"default-time":["00:00:00","23:59:59"]},on:{change:e.onChange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1):e._e(),"month"==e.dateType?t("div",[t("el-date-picker",{attrs:{type:"month"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1):e._e()])])},r=[],n=(a("99af"),a("5101")),s=a("5867"),o={name:"SelectDate",props:{value:{type:Array|Date,default:function(){return[]}},dateType:{type:String,default:"daterange"},label:{type:String,default:function(){return this.$t("common.selectTime")}}},computed:{isDaterange:function(){return"daterange"==this.dateType},warpStyle:function(){var e=200;switch(this.dateType){case"date":e=120;break;case"daterange":e=230;break;case"datetimerange":e=310;break}return{width:"".concat(e,"px")}}},mixins:[s["a"]],data:function(){var e=864e5;return{dateRange:[],date:new Date,month:new Date,pickerOptions:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(e){var t=new Date;e.$emit("pick",[t,t])}},{text:this.$t("reportForm.yesterDay"),onClick:function(t){var a=new Date;a.setTime(a.getTime()-e),t.$emit("pick",[a,a])}},{text:this.$t("missing.theWeek"),onClick:function(t){var a=new Date,i=new Date,r=a.getDay();a.setTime(a.getTime()-e*(r-1)),i.setTime(a.getTime()+6*e),t.$emit("pick",[a,i])}},{text:this.$t("missing.lastWeek"),onClick:function(t){var a=new Date,i=new Date,r=a.getDay(),n=a.getTime()-e*(r-1);a.setTime(n-7*e),i.setTime(n-e),t.$emit("pick",[a,i])}},{text:this.$t("missing.thisMonth"),onClick:function(e){var t=new Date,a=t.getFullYear(),i=t.getMonth()+1,r=new Date("".concat(a,"-").concat(i,"-01")),n=new Date("".concat(a,"-").concat(i,"-01 00:00:00"));n.setMonth(n.getMonth()+1),n=new Date(n.getTime()-1e3),e.$emit("pick",[r,n])}},{text:this.$t("missing.lastMonth"),onClick:function(e){var t=new Date;t.setMonth(t.getMonth()-1);var a=t.getFullYear(),i=t.getMonth()+1,r=new Date(new Date(a,i,1)-1).getDate(),n=new Date("".concat(a,"-").concat(i,"-01")),s=new Date("".concat(a,"-").concat(i,"-").concat(r));e.$emit("pick",[n,s])}}]},pickerOptionsTime:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(e){var t=new Date(n["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),a=new Date(n["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59");e.$emit("pick",[t,a])}},{text:this.$t("reportForm.yesterDay"),onClick:function(t){var a=new Date;a.setTime(a.getTime()-e),t.$emit("pick",[new Date(n["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(n["a"].format(a,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.theWeek"),onClick:function(t){var a=new Date,i=new Date,r=a.getDay();a.setTime(a.getTime()-e*(r-1)),i.setTime(a.getTime()+6*e),t.$emit("pick",[new Date(n["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(n["a"].format(i,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastWeek"),onClick:function(t){var a=new Date,i=new Date,r=a.getDay(),s=a.getTime()-e*(r-1);a.setTime(s-7*e),i.setTime(s-e),t.$emit("pick",[new Date(n["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(n["a"].format(i,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.thisMonth"),onClick:function(e){var t=new Date,a=t.getFullYear(),i=t.getMonth()+1,r=new Date("".concat(a,"-").concat(i,"-01")),s=new Date("".concat(a,"-").concat(i,"-01 00:00:00"));s.setMonth(s.getMonth()+1),s=new Date(s.getTime()-1e3),e.$emit("pick",[new Date(n["a"].format(r,"yyyy-MM-dd")+" 00:00:00"),new Date(n["a"].format(s,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastMonth"),onClick:function(e){var t=new Date;t.setMonth(t.getMonth()-1);var a=t.getFullYear(),i=t.getMonth()+1,r=new Date(new Date(a,i,1)-1).getDate(),s=new Date("".concat(a,"-").concat(i,"-01")),o=new Date("".concat(a,"-").concat(i,"-").concat(r));e.$emit("pick",[new Date(n["a"].format(s,"yyyy-MM-dd")+" 00:00:00"),new Date(n["a"].format(o,"yyyy-MM-dd")+" 23:59:59")])}}]}}},watch:{dateRange:function(e){null==e?this.$emit("input",[]):this.$emit("input",e)},value:function(e){this.dateRange=e},date:function(e){this.$emit("input",e)},month:function(e){this.$emit("input",e)}},methods:{onChange:function(e){this.$emit("input",e)}},mounted:function(){"date"==this.dateType?this.date=this.value:"month"==this.dateType?this.month=this.value:this.dateRange=this.value}},l=o,c=(a("e716"),a("2877")),d=Object(c["a"])(l,i,r,!1,null,"5dbb8594",null);t["a"]=d.exports},"4c3c":function(e,t,a){"use strict";a("4e82");t["a"]={data:function(){return{sortConfig:{sortMethod:function(e){var t=e.data,a=e.sortList,i=a[0],r=i.property,n=i.order,s=[];return s="desc"===n?t.sort((function(e,t){var a=e[r],i=t[r];if(isNaN(a)&&!isNaN(Date.parse(a))&&isNaN(i)&&!isNaN(Date.parse(i)))return Date.parse(i)-Date.parse(a);if(a=parseFloat(a),i=parseFloat(i),isNaN(a)||isNaN(i)){var n=t[r]+"";return n.localeCompare(e[r])}return i-a})):"asc"===n?t.sort((function(e,t){var a=e[r],i=t[r];if(isNaN(a)&&!isNaN(Date.parse(a))&&isNaN(i)&&!isNaN(Date.parse(i)))return Date.parse(a)-Date.parse(i);if(a=parseFloat(e[r]),i=parseFloat(t[r]),isNaN(a)||isNaN(i)){var n=e[r]+"";return n.localeCompare(t[r])}return a-i})):t.sort(),s}}}}}},"57c9":function(e,t,a){"use strict";var i=a("0595");t["a"]=i["a"]},"5aff":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"h",(function(){return r})),a.d(t,"l",(function(){return n})),a.d(t,"k",(function(){return s})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"f",(function(){return d})),a.d(t,"g",(function(){return u})),a.d(t,"m",(function(){return m})),a.d(t,"i",(function(){return p})),a.d(t,"a",(function(){return h})),a.d(t,"j",(function(){return f}));var i="#2D9F28",r="#89C6F2",n="#FFC65E",s="red",o="#1EBEFF",l="#E505F7",c="#40A703",d="#F27908",u="#F180D1",m="#0F1F46",p="#000000",h={backgroundColor:"rgba(255,255,255,0.85)",borderColor:"transparent",textStyle:{fontSize:12,color:"#000"},padding:2},f=function(e,t,a,i,r){var n=e[0],s=r.contentSize,o=r.viewSize;return n+10>o[0]-s[0]?n=n-s[0]-10:n+=10,[n,"0%"]}},"7c6a":function(e,t,a){"use strict";a("984f")},"80e2":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"report-form full speeding-report"},[t("div",{staticClass:"report-form-inner"},[t("el-scrollbar",{staticStyle:{width:"100%"}},[t("div",{staticClass:"report-form-inner-header",staticStyle:{height:"45px"}},[t("div",{staticClass:"f_left"},[t("MultiChoiceVehicle",{on:{onSelectDevice:e.onSelectDevice}})],1),t("div",{staticClass:"f_left"},[t("SelectDate",{model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),t("div",{staticClass:"f_left"},[t("QuickTimeRange",{model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),t("div",{staticClass:"f_left",staticStyle:{width:"140px"}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.speed")}},[t("el-select",{staticStyle:{width:"84px"},model:{value:e.limitspeed,callback:function(t){e.limitspeed=t},expression:"limitspeed"}},e._l(e.optionList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{loading:e.loading1,type:"primary"},on:{click:function(t){return e.handleQuery(!1)}}},[e._v(e._s(e.$t("reportForm.deviceAlarm")))])],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{loading:e.loading2,type:"primary"},on:{click:function(t){return e.handleQuery(!0)}}},[e._v(e._s(e.$t("reportForm.platformStatistics")))])],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{type:"primary",loading:e.exportLoading1},on:{click:e.exportData}},[e._v(e._s(e.$t("common.export")))])],1)])]),t("div",{staticClass:"report-form-inner-tabs"},[t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:e.$t("reportForm.speedingStatistics")+"(".concat(e.totalList.length,")"),name:"tabTotal"}}),t("el-tab-pane",{attrs:{label:"",name:"details"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"details"==e.activeName,expression:"activeName=='details'"}],staticClass:"tableTitle"},[t("b",{domProps:{textContent:e._s(e.tableTitle)}}),e._v(" ("+e._s(e.detailsList.length)+") "),t("span",[e._v(e._s(e.$t("reportForm.totalSpeedingDuration"))+":"+e._s(e.totalSpeedingDuration)+"h")])])],1),t("div",{staticClass:"report-form-inner-content",staticStyle:{top:"80px"}},[t("div",{style:e.statisticsStyle},[t("div",{staticClass:"echart-wrapper"},[t("SpeedingEcharts",{attrs:{chartList:e.chartList}})],1),t("div",{staticClass:"table-wrapper"},[t("vxe-table",{attrs:{"sort-config":e.sortConfig,"menu-config":e.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.totalList},on:{"menu-click":e.handleClickTableMenu}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{title:e.$t("reportForm.action"),width:"70"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.handleClickRow(a.row)}}},[e._v(e._s(e.$t("reportForm.details")))])]}}])}),t("vxe-table-column",{attrs:{field:"devicename",width:"140",title:e.$t("alarm.devName"),sortable:""}}),t("vxe-table-column",{attrs:{field:"deviceid",width:"140",title:e.$t("alarm.devNum"),sortable:""}}),t("vxe-table-column",{attrs:{field:"creater",title:e.$t("reportForm.creater"),width:"100",sortable:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[t("div",{staticClass:"parents-wrapper"},e._l(e.parentsList,(function(a){return t("div",{key:a.username},[e._v(e._s(a.username)+"("+e._s(a.usertypeStr)+")")])})),0),t("el-button",{staticStyle:{color:"#000000"},attrs:{slot:"reference",type:"text"},on:{click:function(t){return e.queryParents(a.row.creater)}},slot:"reference"},[e._v(e._s(a.row.creater))])],1)]}}])}),t("vxe-table-column",{attrs:{field:"groupname",title:e.$t("reportForm.groupName"),width:"100",sortable:""}}),t("vxe-table-column",{attrs:{field:"speedingDuration",align:"right",formatter:e.numberToFixed2,title:e.$t("reportForm.speedingDuration"),sortable:""}}),t("vxe-table-column",{attrs:{field:"speedingMileage",align:"right",formatter:e.numberToFixed2,title:e.$t("reportForm.speedingMileage"),sortable:""}}),t("vxe-table-column",{attrs:{field:"speedingCount",align:"right",title:e.$t("reportForm.speedingCount"),sortable:""}}),t("vxe-table-column",{attrs:{field:"maxSpeed",align:"right",formatter:e.numberToFixed2,title:e.$t("reportForm.maxSpeed"),sortable:""}}),t("vxe-table-column",{attrs:{field:"minSpeed",align:"right",formatter:e.numberToFixed2,title:e.$t("reportForm.minSpeed"),sortable:""}})],1)],1)]),t("div",{style:e.detailsStyle},[t("div",{staticClass:"echart-wrapper"},[t("TimeEchart",{ref:"timeEchart"})],1),t("div",{staticClass:"table-wrapper"},[t("vxe-table",{ref:"xTable",attrs:{"menu-config":e.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"","highlight-current-row":"",size:"mini",height:"auto",data:e.detailsList},on:{"menu-click":e.handleClickTableMenu,"cell-click":e.cellClickEvent}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"startTime",title:e.$t("reportForm.startTime"),width:"145",sortable:""}}),t("vxe-table-column",{attrs:{field:"endTime",title:e.$t("reportForm.endTime"),width:"145",sortable:""}}),t("vxe-table-column",{attrs:{field:"speedingDuration",align:"right",formatter:e.numberToFixed2,title:e.$t("reportForm.speedingDuration"),sortable:""}}),t("vxe-table-column",{attrs:{field:"maxSpeed",align:"right",formatter:e.numberToFixed2,title:e.$t("reportForm.maxSpeed"),sortable:""}}),t("vxe-table-column",{attrs:{field:"minSpeed",align:"right",formatter:e.numberToFixed2,title:e.$t("reportForm.minSpeed"),sortable:""}}),t("vxe-table-column",{attrs:{field:"saddress",title:e.$t("reportForm.startAddress")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{"text-decoration":"underline",cursor:"pointer",color:"#388CFE"},domProps:{textContent:e._s(a.row.saddress)},on:{click:function(t){return e.handleSeeMap(a.row)}}})]}}])}),t("vxe-table-column",{attrs:{field:"eaddress",title:e.$t("reportForm.endAddress")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{staticStyle:{"text-decoration":"underline",cursor:"pointer",color:"#388CFE"},domProps:{textContent:e._s(a.row.eaddress)},on:{click:function(t){return e.handleSeeMap(a.row)}}})]}}])})],1)],1)])]),t("el-dialog",{attrs:{title:e.$t("reportForm.seeMap"),visible:e.dialogMap,width:"500",center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogMap=t}}},[t("div",{staticStyle:{width:"100%",height:"400px"}},[t("ReportMap",{ref:"mapIns"})],1)])],1)])},r=[],n=(a("14d9"),a("a9e3"),a("b680"),a("d3b7"),a("159b"),a("4795"),a("6e52")),s=a("e561"),o=a("d462"),l=a("57c9"),c=a("80f4"),d=a("1c31"),u=a("7cf8"),m=a("5101"),p=a("eb10"),h=function(){var e=this,t=e._self._c;return t("div",{staticClass:"full"},[t("el-carousel",{attrs:{trigger:"click",autoplay:!1}},e._l(e.chartList,(function(e,a){return t("el-carousel-item",{key:a},[t("div",{staticClass:"full",attrs:{id:"working-hours-charts"+a}})])})),1),t("div",{directives:[{name:"show",rawName:"v-show",value:0==e.chartList.length,expression:"chartList.length == 0"}],staticClass:"working-hours-mask"},[t("span",[e._v(e._s(e.$t("tips.noData")))])])],1)},f=[],g=a("5530"),v=a("43c8"),y=a.n(v),b=a("2f62"),x=a("c276"),w={name:"SpeedingEcharts",props:{chartList:{type:Array,default:function(){return[]}}},computed:Object(g["a"])({},Object(b["b"])(["isZh"])),watch:{chartList:function(e){var t=this;setTimeout((function(){t.updateChartsOption(e)}),100)}},methods:{initChart:function(){},updateChartsOption:function(e){var t=0,a=e.length;while(t<a){var i=y.a.init(document.getElementById("working-hours-charts"+t)),r=e[t];i.setOption(this.getChartsOption(r.data,r.counts),!0),t++}},getChartsOption:function(e,t){var a=this.$t("reportForm.speedingCount");return{tooltip:{trigger:"axis"},legend:{data:[a],y:13,x:"center"},grid:{x:100,y:40,x2:80,y2:30},xAxis:[{type:"category",axisLabel:{show:!0,interval:0,rotate:0,margin:8,textStyle:{fontSize:12}},data:e}],yAxis:[{type:"value",position:"bottom",nameLocation:"end",boundaryGap:[0,.2],axisLabel:{formatter:"{value}"}}],series:[{name:a,type:"bar",itemStyle:{normal:{label:{show:!0,textStyle:{fontSize:"12",fontFamily:"微软雅黑",fontWeight:"bold"}}}},data:t}]}}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))}},D=w,$=(a("bd62"),a("2877")),k=Object($["a"])(D,h,f,!1,null,"fbef3d9e",null),T=k.exports,F=a("201d"),C=a("4c3c"),S=a("a05b"),M=a("0c87"),L={name:"speedingReport",data:function(){return{loading1:!1,loading2:!1,exportLoading1:!1,activeName:"tabTotal",totalSpeedingDuration:"",tableTitle:"",dateRange:[new Date,new Date],totalList:[],detailsList:[],chartList:[],limitspeed:"70",dialogMap:!1,optionList:[{label:"30km/h",value:"30"},{label:"60km/h",value:"60"},{label:"70km/h",value:"70"},{label:"80km/h",value:"80"},{label:"90km/h",value:"90"},{label:"100km/h",value:"100"},{label:"110km/h",value:"110"},{label:"120km/h",value:"120"},{label:"130km/h",value:"130"},{label:"140km/h",value:"140"}]}},mixins:[C["a"],S["a"],M["a"]],components:{MultiChoiceVehicle:s["a"],SelectDate:o["a"],QuickTimeRange:l["a"],TimeEchart:p["a"],SpeedingEcharts:T,ReportMap:c["a"],LabelWrap:F["a"]},computed:{statisticsStyle:function(){return{zIndex:"tabTotal"==this.activeName?999:0}},detailsStyle:function(){return{zIndex:"details"==this.activeName?999:0}}},methods:{numberToFixed2:x["nb"],onSelectDevice:function(e){this.deviceids=e},handleSeeMap:function(e){var t=this;this.dialogMap=!0;var a={deviceid:e.deviceid,timezone:m["a"].getOffset(),begintime:e.startTime,endtime:e.endTime};Object(u["X"])(a).then((function(e){var a=e.records;a&&(a.forEach((function(e){e.updatetimeStr=m["a"].longToLocalDateTimeStr(e.updatetime)})),setTimeout((function(){t.$refs.mapIns.markersAndLineLayerToMap(a)}),300))}))},cellClickEvent:function(e){var t=this,a=e.row,i={deviceid:a.deviceid,timezone:m["a"].getOffset(),begintime:a.startTime,endtime:a.endTime};Object(u["X"])(i).then((function(e){var a=e.records;a&&(a.forEach((function(e){e.speed=Number((e.speed/1e3).toFixed(0)),e.reissueStr=0==e.reissue?t.$t("header.no"):t.$t("header.yes"),e.updatetimeStr=m["a"].longToLocalDateTimeStr(e.updatetime)})),t.$refs.timeEchart.updateChartsOption(a))}))},handleClickRow:function(e){var t=this;if(e.records.length){this.activeName="details";var a=e.records[0],i={deviceid:e.deviceid,timezone:m["a"].getOffset(),begintime:a.startTime,endtime:a.endTime};this.tableTitle=e.devicename+"-"+e.deviceid,this.totalSpeedingDuration=e.speedingDuration,Object(u["X"])(i).then((function(e){var a=e.records;a&&(a.forEach((function(e){e.speed=Number((e.speed/1e3).toFixed(0)),e.reissueStr=0==e.reissue?t.$t("header.no"):t.$t("header.yes"),e.updatetimeStr=m["a"].longToLocalDateTimeStr(e.updatetime)})),t.$refs.timeEchart.updateChartsOption(a))})),this.detailsList=e.records,setTimeout((function(){var e=t.detailsList[0];t.$refs.xTable.setCurrentRow(e),t.$refs.xTable.scrollToRow(e)}),300)}else this.$XModal.message({message:this.$t("tips.noData"),status:"error",zIndex:9999})},handleQuery:function(e){var t=this,a=this.deviceids,i=this.dateRange;if(0!=a.length)if(0!=i.length){"details"==this.activeName&&(this.activeName="tabTotal",this.totalList=[],this.detailsList=[]);var r=m["a"].format(i[0],"yyyy-MM-dd"),s=m["a"].format(i[1],"yyyy-MM-dd"),o={startday:r,endday:s,offset:m["a"].getOffset(),deviceids:a,limitspeed:e?Number(this.limitspeed):0};this.loading=!0,0==e?this.loading1=!0:this.loading2=!0,this.queryDetailDateRange=r+" "+s,Object(d["hb"])(o).then((function(a){var i=a.records,r=a.addressmap;t.addressmap=r,t.loading=!1;var s=[],o=[];i&&i.forEach((function(e,t){var a=n["a"].deviceInfos[e.deviceid],i={deviceid:e.deviceid,devicename:a.devicename,creater:n["a"].getShowName(a.creater),groupname:a.groupname,records:e.records,speedingCount:e.records.length},l=0,c=0,d="-",u="-";e.records.forEach((function(e){e.devicename=a.devicename,e.creater=a.creater,e.groupname=a.groupname,l+=e.endtime-e.begintime,c+=e.edistance-e.sdistance,"-"==d&&(d=0),"-"==u&&(u=99999999999),e.maxspeed>d&&(d=e.maxspeed),e.minspeed<u&&(u=e.minspeed),e.maxSpeed=e.maxspeed/1e3,e.minSpeed=e.minspeed/1e3,e.startTime=m["a"].longToLocalDateTimeStr(e.begintime),e.endTime=m["a"].longToLocalDateTimeStr(e.endtime),e.saddress=Object(x["L"])(r,e.slat,e.slon),e.eaddress=Object(x["L"])(r,e.elat,e.elon),e.speedingDuration=(e.endtime-e.begintime)/1e3/3600})),i.maxSpeed="-"==d?d:d/1e3,i.minSpeed="-"==u?u:u/1e3,i.speedingDuration=l/1e3/3600,i.speedingMileage=c/1e3,t%4==0&&o.push({data:[],counts:[]});var p=o.length-1;o[p].data.push(i.devicename),o[p].counts.push(i.speedingCount),s.push(i)})),t.chartList=o,t.totalList=s,0==e?t.loading1=!1:t.loading2=!1}))}else this.$XModal.message({message:this.$t("tips.selectTime"),status:"error",zIndex:9999});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},exportData:function(){if("tabTotal"==this.activeName){if(0==this.totalList.length)return;var e=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.creater"),this.$t("reportForm.groupName"),this.$t("reportForm.speedingDuration"),this.$t("reportForm.speedingMileage"),this.$t("reportForm.speedingCount"),this.$t("reportForm.maxSpeed"),this.$t("reportForm.minSpeed")]];this.totalList.forEach((function(t,a){var i=[];i.push(a+1),i.push(t.devicename),i.push(t.deviceid),i.push(t.creater),i.push(t.groupname),i.push(Object(x["nb"])(t.speedingDuration)),i.push(Object(x["nb"])(t.speedingMileage)),i.push(t.speedingCount),i.push(Object(x["nb"])(t.maxSpeed)),i.push(Object(x["nb"])(t.minSpeed)),e.push(i)}));var t={title:this.$t("reportForm.speedingReport"),data:e,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(t).exportExcel(this)}else{if(0==this.detailsList.length)return;var a=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.creater"),this.$t("reportForm.groupName"),this.$t("reportForm.startTime"),this.$t("reportForm.endTime"),this.$t("reportForm.speedingDuration"),this.$t("reportForm.maxSpeed"),this.$t("reportForm.minSpeed"),this.$t("reportForm.startAddress"),this.$t("reportForm.endAddress"),this.$t("reportForm.startLonLat"),this.$t("reportForm.endLonLat")]],i="";this.detailsList.forEach((function(e,t){var r=[];i=e.deviceid,r.push(t+1),r.push(e.devicename),r.push(e.deviceid),r.push(e.creater),r.push(e.groupname),r.push(e.startTime),r.push(e.endTime),r.push(Object(x["nb"])(e.speedingDuration)),r.push(Object(x["nb"])(e.maxSpeed)),r.push(Object(x["nb"])(e.minSpeed)),r.push(e.saddress),r.push(e.eaddress),r.push(e.slon+","+e.slat),r.push(e.elon+","+e.elat),a.push(r)}));t={title:this.$t("reportForm.speedingReport")+"-"+i,data:a,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(t).exportExcel(this)}}},mounted:function(){this.deviceids=[],this.queryDetailDateRange=null}},N=L,_=(a("7c6a"),Object($["a"])(N,i,r,!1,null,null,null)),O=_.exports;t["default"]=O},"80f4":function(e,t,a){"use strict";var i=a("32eb");t["a"]=i["a"]},"984f":function(e,t,a){},acc2:function(e,t,a){},bd62:function(e,t,a){"use strict";a("acc2")},c51d:function(e,t,a){"use strict";a("ecfc")},d462:function(e,t,a){"use strict";var i=a("2ddc");t["a"]=i["a"]},e561:function(e,t,a){"use strict";var i=a("ea22");t["a"]=i["a"]},e716:function(e,t,a){"use strict";a("271ae")},eb10:function(e,t,a){"use strict";var i=function(){var e=this,t=e._self._c;return t("div",{ref:"chartId",staticClass:"full"})},r=[],n=a("5530"),s=(a("3c65"),a("b0c0"),a("a9e3"),a("b680"),a("d3b7"),a("159b"),a("43c8")),o=a.n(s),l=a("2f62"),c=a("5aff"),d=a("c276"),u={name:"TimeEchart",computed:Object(n["a"])({},Object(l["b"])(["isZh"])),methods:{initChart:function(){var e=this;this.disMin=0,this.recvtime=[],this.speeds=[],this.mileages=[],this.status=[],this.chartsIns=o.a.init(this.$refs.chartId),this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.getZr().on("click",(function(t){var a=[t.offsetX,t.offsetY];if(e.chartsIns.containPixel("grid",a)&&e.recvtime.length){var i=e.chartsIns.convertFromPixel({seriesIndex:0},[t.offsetX,t.offsetY])[0];e.$parent.$parent.scrollToRow&&e.$parent.$parent.scrollToRow(i)}}))},updateChartsOption:function(e){var t=this.isZh,a=[],i=[],r=[],n=[],s=[],o=0;e.length>0&&(o=e[e.length-1].totaldistance),e.forEach((function(e){var l=Number((e.totaldistance-o).toFixed(2));a.unshift(e.updatetimeStr),i.unshift(Number(e.speed)),r.unshift(l),n.unshift(t?e.strstatus:e.strstatusen),s.unshift(0!=e.reissue?l:"")})),this.recvtime=a,this.speeds=i,this.mileages=r,this.status=n,this.reissues=s,this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.resize()},resize:function(){this.chartsIns.resize()},getChartsOption:function(){var e=this,t=this.$t("reportForm.speed"),a=this.$t("reportForm.mileage"),i=this.$t("reportForm.time"),r=this.$t("reportForm.status"),s=this.$t("reportForm.reissue"),o=this.$t("reportForm.weight");s=this.$t("reportForm.reissue");return{title:{text:i,x:"center",textStyle:{fontSize:12,fontWeight:"bolder",color:"#333"}},grid:{x:50,y:40,x2:50,y2:40,bottom:55},tooltip:Object(n["a"])(Object(n["a"])({trigger:"axis"},c["a"]),{},{formatter:function(r){var n="<div>".concat(r[0].name,"</div>");for(var l in r){var u=r[l].seriesName,m=r[l].value;u&&u!=i&&(u==a?n+=Object(d["i"])(c["b"],u,m,"km"):u==t?n+=Object(d["i"])(c["h"],u,m,"km/h"):u==o?n+=Object(d["i"])(c["m"],u,m,"Kg"):u==s?(m=""===m?e.$t("header.no"):e.$t("header.yes"),n+=Object(d["i"])("red",u,m,"")):n+=Object(d["i"])(c["m"],u,m,""))}return'<div style="width:230px">'.concat(n,"</div>")},position:c["j"]}),legend:{data:[t,a,s],x:"left"},toolbox:{show:!1,feature:{magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}},itemSize:14},xAxis:{type:"category",boundaryGap:!1,axisLine:{onZero:!1,show:!0},data:this.recvtime,axisPointer:{type:"line",value:"",snap:!1,lineStyle:{color:"#7581BD",width:2},handle:{show:!0,color:"transparent"}}},dataZoom:[{show:!0,realtime:!0,start:0,end:100,height:20,backgroundColor:"#EDEDED",fillerColor:"rgb(54, 72, 96,0.5)",bottom:10},{type:"inside",realtime:!0,start:0,end:100,height:20,bottom:0}],yAxis:[{name:t,type:"value",nameTextStyle:10,nameGap:5},{name:a,type:"value",nameTextStyle:10,nameGap:2,min:this.disMin,axisLabel:{formatter:"{value} km"},axisTick:{show:!1}}],series:[{name:i,type:"line",symbol:"none",yAxisIndex:1,color:"#F0805A",smooth:!0,data:this.recvtime},{name:t,type:"line",symbol:"none",yAxisIndex:0,smooth:!0,color:c["h"],data:this.speeds},{name:a,type:"line",symbol:"none",yAxisIndex:1,color:c["b"],smooth:!0,data:this.mileages},{smooth:!0,name:r,type:"line",symbol:"none",color:c["m"],data:this.status},{smooth:!0,name:s,type:"line",yAxisIndex:1,symbol:"none",color:"red",data:this.reissues}]}}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))}},m=u,p=a("2877"),h=Object(p["a"])(m,i,r,!1,null,null,null);t["a"]=h.exports},ecfc:function(e,t,a){}}]);