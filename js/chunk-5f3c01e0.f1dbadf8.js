(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f3c01e0"],{"0e7c":function(e,t,a){"use strict";a("6dc3")},"6dc3":function(e,t,a){},70391:function(e,t,a){"use strict";a.r(t);a("b0c0");var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"batch-manage employees full"},[t("div",{staticClass:"batch-manage-left"},[t("div",{staticClass:"batch-manage-inner full"},[t("div",{staticClass:"batch-manage-inner-title"},[t("i",{staticClass:"circle"}),t("b",[e._v(" "+e._s(e.$t("reportForm.selectUser")))])]),t("div",{staticClass:"batch-manage-inner-content"},[t("div",{staticClass:"batch-manage-inner-content-search"},[t("div",[t("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("bgManage.pleaseEnterUsernameOrGroupname")},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}},[t("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"}),t("i",{staticClass:"el-input__icon el-icon-circle-close",attrs:{slot:"suffix"},on:{click:function(t){e.searchText=""}},slot:"suffix"})])],1),t("div",{staticClass:"device-ztree-search-wrap-refresh",on:{click:e.refreshZtree}},[t("i",{staticClass:"el-icon-refresh"})])]),t("div",{staticClass:"batch-manage-inner-content-ztree"},[t("el-scrollbar",{staticStyle:{height:"100%"}},[t("ul",{staticClass:"ztree",attrs:{id:e.ztreeId}})])],1)])])]),t("div",{staticClass:"batch-manage-right"},[t("div",{staticClass:"batch-manage-inner-title"},[t("i",{staticClass:"circle"}),t("b",{domProps:{textContent:e._s(e.$t("bgManage.employeesList"))}}),t("b",{domProps:{textContent:e._s(e.totalList.length)}}),t("div",{staticClass:"batch-manage-btns"},[t("el-button",{attrs:{type:"primary",size:"mini"},domProps:{textContent:e._s(e.$t("bgManage.newPersonnel"))},on:{click:e.handleAdd}})],1)]),t("div",{staticClass:"batch-manage-inner-content"},[t("vxe-table",{attrs:{"menu-config":e.tableMenu,border:"","auto-resize":"",resizable:"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.totalList},on:{"menu-click":e.handleClickTableMenu}},[t("vxe-table-column",{attrs:{title:e.$t("reportForm.action"),width:"84"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticStyle:{"padding-top":"7px"}},[t("span",{staticStyle:{padding:"0px 10px"}},[t("img",{staticStyle:{width:"17px",cursor:"pointer"},attrs:{src:e.editIcon,title:e.$t("common.edit")},on:{click:function(t){return e.handleEdit(a)}}})]),t("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-info","icon-color":"red","confirm-button-text":e.$t("common.confirm"),"cancel-button-text":e.$t("common.cancel"),title:e.$t("tips.confirmDelete")},on:{confirm:function(t){return e.handleDelete(a)}}},[t("span",{attrs:{slot:"reference"},slot:"reference"},[t("img",{staticStyle:{width:"16px",cursor:"pointer"},attrs:{src:e.deleteIcon,title:e.$t("common.delete")}})])])],1)]}}])}),t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{width:"100",field:"creater",title:e.$t("reportForm.creater")},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[t("div",{staticClass:"parents-wrapper"},e._l(e.parentsList,(function(a){return t("div",{key:a.username},[e._v(e._s(a.username)+"("+e._s(a.usertypeStr)+")")])})),0),t("el-button",{staticStyle:{color:"#000000"},attrs:{slot:"reference",type:"text"},on:{click:function(t){return e.queryParents(a.row.creater)}},slot:"reference"},[e._v(e._s(a.row.creater))])],1)]}}])}),t("vxe-table-column",{attrs:{width:"100",field:"name",title:e.$t("reportForm.name")}}),t("vxe-table-column",{attrs:{width:"100",field:"updatetimeStr",title:e.$t("reportForm.updatetimeStr")}}),t("vxe-table-column",{attrs:{width:"100",field:"cardid",title:e.$t("reportForm.idNumber")}}),t("vxe-table-column",{attrs:{width:"65",field:"sexStr",title:e.$t("device.gender")}}),t("vxe-table-column",{attrs:{width:"120",field:"phone1",title:e.$t("bgManage.phone1")}}),t("vxe-table-column",{attrs:{width:"120",field:"phone2",title:e.$t("bgManage.phone2")}}),t("vxe-table-column",{attrs:{width:"126",field:"sosphone1",title:e.$t("bgManage.sosphone1")}}),t("vxe-table-column",{attrs:{width:"126",field:"sosphone2",title:e.$t("bgManage.sosphone2")}}),t("vxe-table-column",{attrs:{width:"180",field:"certificationcode",title:e.$t("bgManage.certificationcode")}}),t("vxe-table-column",{attrs:{width:"166",field:"agencyname",title:e.$t("bgManage.agencyname")}}),t("vxe-table-column",{attrs:{width:"150",field:"certificationvalidatedate",title:e.$t("bgManage.certificationvalidatedate")}}),t("vxe-table-column",{attrs:{width:"120",field:"address",title:e.$t("reportForm.address")}}),t("vxe-table-column",{attrs:{width:"140",field:"drivercardid",title:e.$t("bgManage.drivercardid")}}),t("vxe-table-column",{attrs:{width:"210",field:"driveragencyname",title:e.$t("bgManage.driveragencyname")}}),t("vxe-table-column",{attrs:{width:"150",field:"drivercardtype",title:e.$t("bgManage.drivercardtype")}}),t("vxe-table-column",{attrs:{width:"140",field:"drivercardstartday",title:e.$t("bgManage.drivercardstartday")}}),t("vxe-table-column",{attrs:{width:"150",field:"drivercardendday",title:e.$t("bgManage.drivercardendday")}})],1)],1)]),t("el-dialog",{attrs:{title:e.titleDialog,center:"",visible:e.dialog,width:"620px","append-to-body":"","close-on-click-modal":!1},on:{close:function(t){e.dialog=!1}}},[t("div",{staticStyle:{padding:"10px"}},[t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("DropdownZtreeUser",{attrs:{label:e.$t("reportForm.creater")},model:{value:e.creater,callback:function(t){e.creater=t},expression:"creater"}})],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.name")}},[t("el-input",{model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("device.gender")}},[t("el-select",{staticStyle:{width:"100%"},attrs:{"popper-append-to-body":!0},model:{value:e.sex,callback:function(t){e.sex=t},expression:"sex"}},[t("el-option",{attrs:{label:e.$t("device.male"),value:1}}),t("el-option",{attrs:{label:e.$t("device.female"),value:0}})],1)],1)],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.phone1")}},[t("el-input",{model:{value:e.phone1,callback:function(t){e.phone1=t},expression:"phone1"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.phone1")}},[t("el-input",{model:{value:e.phone2,callback:function(t){e.phone2=t},expression:"phone2"}})],1)],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.sosphone1")}},[t("el-input",{model:{value:e.sosphone1,callback:function(t){e.sosphone1=t},expression:"sosphone1"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.sosphone2")}},[t("el-input",{model:{value:e.sosphone2,callback:function(t){e.sosphone2=t},expression:"sosphone2"}})],1)],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.idNumber")}},[t("el-input",{model:{value:e.cardid,callback:function(t){e.cardid=t},expression:"cardid"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.certificationcode")}},[t("el-input",{model:{value:e.certificationcode,callback:function(t){e.certificationcode=t},expression:"certificationcode"}})],1)],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.agencyname")}},[t("el-input",{model:{value:e.agencyname,callback:function(t){e.agencyname=t},expression:"agencyname"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.certificationvalidatedate")}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.unicoPickerOptions,type:"date",clearable:!1},model:{value:e.certificationvalidatedate,callback:function(t){e.certificationvalidatedate=t},expression:"certificationvalidatedate"}})],1)],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.drivercardid")}},[t("el-input",{model:{value:e.drivercardid,callback:function(t){e.drivercardid=t},expression:"drivercardid"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.driveragencyname")}},[t("el-input",{model:{value:e.driveragencyname,callback:function(t){e.driveragencyname=t},expression:"driveragencyname"}})],1)],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.drivercardtype")}},[t("el-input",{model:{value:e.drivercardtype,callback:function(t){e.drivercardtype=t},expression:"drivercardtype"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("reportForm.address")}},[t("el-input",{model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1)],1)],1),t("el-row",{staticClass:"margin_b12",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.drivercardstartday")}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.unicoPickerOptions,type:"date",clearable:!1},model:{value:e.drivercardstartday,callback:function(t){e.drivercardstartday=t},expression:"drivercardstartday"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.drivercardendday")}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.unicoPickerOptions,type:"date",clearable:!1},model:{value:e.drivercardendday,callback:function(t){e.drivercardendday=t},expression:"drivercardendday"}})],1)],1)],1),t("div",{staticStyle:{"text-align":"center"}},[t("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.handleDetermine}},[e._v(e._s(e.$t("common.determine")))])],1)],1)])],1)},i=[],s=a("5530"),n=(a("c975"),a("14d9"),a("d3b7"),a("159b"),a("6e52")),c=a("c276"),l=a("2f62"),o=a("cd6d"),d=a.n(o),h=a("e285"),p=a("5101"),u=a("201d"),m=a("7ef3"),v=a("5867"),b=a("0c87"),g=a("a05b"),f=a("61fc"),y=a("e173"),x=a("0d33"),w={name:"Employees",data:function(){return{editIcon:f,deleteIcon:y,dialog:!1,searchText:"",totalList:[],username:"",isEdit:!1,creater:"",name:"",sex:1,phone1:"",phone2:"",sosphone1:"",sosphone2:"",cardid:"",certificationcode:"",agencyname:"",certificationvalidatedate:"",drivercardid:"",driveragencyname:"",drivercardtype:"",address:"",drivercardstartday:"",drivercardendday:""}},mixins:[v["a"],b["a"],g["a"]],components:{LabelWrap:u["a"],DropdownZtreeUser:m["a"]},computed:Object(s["a"])(Object(s["a"])({},Object(l["b"])(["isQueryInitData","userName"])),{},{ztreeId:function(){return"ztreeEl_".concat(this._uid)},titleDialog:function(){return this.isEdit?this.$t("bgManage.editEmployee"):this.$t("bgManage.addEmployee")}}),watch:{isQueryInitData:function(e){e&&(this.initZtree(),this.selectedUser(this.userName),this.username=this.userName)},searchText:function(e){this.searchUser(this,e)},username:function(){var e=this,t={creater:this.username,keyword:""};Object(h["pb"])(t).then((function(t){var a=t.employees,r=[];a&&a.forEach((function(e){e.updatetimeStr=p["a"].format(new Date(e.updatetime),"yyyy-MM-dd"),e.sexStr=1==e.sex?"男":"女",r.push(e)})),e.totalList=r}))}},methods:{handleEdit:function(e){var t=e.row;this.row=t,this.creater=t.creater,this.name=t.name,this.sex=t.sex,this.phone1=t.phone1,this.phone2=t.phone2,this.sosphone1=t.sosphone1,this.sosphone2=t.sosphone2,this.cardid=t.cardid,this.certificationcode=t.certificationcode,this.agencyname=t.agencyname,this.certificationvalidatedate=t.certificationvalidatedate,this.drivercardid=t.drivercardid,this.driveragencyname=t.driveragencyname,this.drivercardtype=t.drivercardtype,this.address=t.address,this.drivercardstartday=t.drivercardstartday,this.drivercardendday=t.drivercardendday,this.isEdit=!0,this.dialog=!0},handleAdd:function(){var e=p["a"].format(new Date,"yyyy-MM-dd");this.creater=this.userName,this.name="",this.sex=1,this.phone1="",this.phone2="",this.sosphone1="",this.sosphone2="",this.cardid="",this.certificationcode="",this.agencyname="",this.certificationvalidatedate=e,this.drivercardid="",this.driveragencyname="",this.drivercardtype="",this.address="",this.drivercardstartday=e,this.drivercardendday=e,this.isEdit=!1,this.dialog=!0},handleDelete:function(e){var t=this,a=e.rowIndex,r={employees:[e.row.employeeid]};Object(h["B"])(r).then((function(e){var r=e.status;0==r?(t.$delete(t.totalList,a),t.$XModal.message({message:t.$t("tips.deleteSucc"),status:"success",zIndex:9999})):t.$XModal.message({message:t.$t("tips.deleteFail"),status:"error",zIndex:9999})}))},handleDetermine:function(){var e=this,t=this.row,a={creater:this.creater,name:this.name,sex:this.sex,phone1:this.phone1,phone2:this.phone2,sosphone1:this.sosphone1,sosphone2:this.sosphone2,cardid:this.cardid,certificationcode:this.certificationcode,agencyname:this.agencyname,certificationvalidatedate:p["a"].format(new Date(this.certificationvalidatedate),"yyyy-MM-dd"),drivercardid:this.drivercardid,driveragencyname:this.driveragencyname,drivercardtype:this.drivercardtype,address:this.address,drivercardstartday:p["a"].format(new Date(this.drivercardstartday),"yyyy-MM-dd"),drivercardendday:p["a"].format(new Date(this.drivercardendday),"yyyy-MM-dd")};this.isEdit?(a.employeeid=t.employeeid,Object(h["P"])(a).then((function(a){if(0==a.status){for(var r in a.updatetimeStr=p["a"].format(new Date(a.updatetime),"yyyy-MM-dd"),a.sexStr=1==a.sex?"男":"女",a){var i=a[r];t[r]=i}e.$XModal.message({message:e.$t("tips.editSucc"),status:"success",zIndex:9999}),e.dialog=!1}else e.$XModal.message({message:e.$t("tips.editFail"),status:"error",zIndex:9999})}))):Object(h["q"])(a).then((function(t){0==t.status?(t.updatetimeStr=p["a"].format(new Date(t.updatetime),"yyyy-MM-dd"),t.sexStr=1==t.sex?"男":"女",e.totalList.push(t),e.$XModal.message({message:e.$t("tips.addSucc"),status:"success",zIndex:9999}),e.dialog=!1):e.$XModal.message({message:e.$t("tips.addFail"),status:"error",zIndex:9999})}))},refreshZtree:function(){this.ztreeIns.destroy(),this.initZtree(),this.selectedUser(this.userName)},initZtree:function(){var e=this.castUsersTreeToDevicesTree(n["a"].rootuser);this.treeNodes=e,this.ztreeIns=$.fn.zTree.init($("#".concat(this.ztreeId)),this.setting,e)},selectedUser:function(e){for(var t=this.ztreeIns.transformToArray(this.ztreeIns.getNodes()),a=null,r=0;r<t.length;r++){var i=t[r];if(i.username==e){a=i;break}}null!=a&&(this.ztreeIns.checkNode(a,!0),this.textVal=a.showname?a.showname:a.username)},searchUser:Object(c["e"])((function(e,t){if(0==e.show&&(e.show=!0),e.ztreeIns&&e.ztreeIns.destroy(),0==t.length)e.ztreeIns=$.fn.zTree.init($("#".concat(e.ztreeId)),e.setting,e.treeNodes);else{var a=e.variableDeepSearch(e.treeNodes,t);e.ztreeIns=$.fn.zTree.init($("#".concat(e.ztreeId)),e.setting,a)}}),300),onTreeCheck:function(e,t,a){this.username=a.username},zTreeOnClick:function(e,t,a){this.ztreeIns.checkNode(a),this.onTreeCheck(e,t,a)},variableDeepSearch:function(e,t){t=t.toLowerCase();for(var a=[],r=this,i=0;i<e.length;i++){var s=null,n=e[i];if(null!=n){var c=!1;if((-1!=n.name.toLowerCase().indexOf(t)||n.username&&-1!=n.username.toLowerCase().indexOf(t))&&(s=d()(n),s.open=!1,c=!0),0==c&&n.children&&n.children.length>0){var l=r.variableDeepSearch(n.children,t);l&&l.length>0&&(s=d()(n),s.children=l,s.open=!0,c=!0)}1==c&&a.push(s)}}return a},castUsersTreeToDevicesTree:function(e){var t={name:"",icon:x,open:!0};if(null!=e){var a=e.username,r=e.showname,i=e.subusers;if(t.name=a,t.username=a,t.showname=r,null!=a&&null!=i&&i.length>0){var s=this.doCastUsersTreeToDevicesTree(i);t.children=s}}return[t]},doCastUsersTreeToDevicesTree:function(e){var t=[];if(null!=e&&e.length>0)for(var a=0;a<e.length;++a){var r=e[a],i=r.username,s=r.showname,n=r.subusers,c={name:s||i,icon:x,username:i,showname:s};if(null!=i&&null!=n&&n.length>0){var l=this.doCastUsersTreeToDevicesTree(n);c.children=l}c.title=i,t.push(c)}return t}},created:function(){this.setting={view:{dblClickExpand:!1},check:{enable:!0,chkStyle:"radio",radioType:"all"},callback:{onCheck:this.onTreeCheck,onClick:this.zTreeOnClick}}},mounted:function(){var e=this;this.isQueryInitData&&this.$nextTick((function(){e.initZtree(),e.selectedUser(e.userName),e.username=e.userName}))}},k=w,M=(a("0e7c"),a("2877")),C=Object(M["a"])(k,r,i,!1,null,null,null),z=C.exports;t["default"]=z}}]);