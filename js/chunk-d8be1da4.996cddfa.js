(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8be1da4"],{"05f1":function(t,e,a){},"271ae":function(t,e,a){},"2ddc":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"multi-choice",style:t.warpStyle},[e("div",{staticClass:"multi-choice-input"},["daterange"==t.dateType?e("div",[e("el-date-picker",{attrs:{type:t.dateType,"picker-options":t.pickerOptions,"range-separator":"-",align:"center","unlink-panels":"",clearable:!1,"start-placeholder":t.$t("device.driverinitialdate"),"end-placeholder":t.$t("device.drivereffectivedate")},on:{change:t.onChange},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1):t._e(),"date"==t.dateType?e("div",[e("el-date-picker",{attrs:{type:"date","picker-options":t.datePickerOptions},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1):t._e(),"datetimerange"==t.dateType?e("div",{staticClass:"datetimerange"},[e("el-date-picker",{attrs:{type:t.dateType,"range-separator":"-","picker-options":t.pickerOptionsTime,align:"center","unlink-panels":"",clearable:!1,"start-placeholder":t.$t("device.driverinitialdate"),"end-placeholder":t.$t("device.drivereffectivedate"),"default-time":["00:00:00","23:59:59"]},on:{change:t.onChange},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1):t._e(),"month"==t.dateType?e("div",[e("el-date-picker",{attrs:{type:"month"},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1):t._e()])])},n=[],o=(a("99af"),a("5101")),r=a("5867"),l={name:"SelectDate",props:{value:{type:Array|Date,default:function(){return[]}},dateType:{type:String,default:"daterange"},label:{type:String,default:function(){return this.$t("common.selectTime")}}},computed:{isDaterange:function(){return"daterange"==this.dateType},warpStyle:function(){var t=200;switch(this.dateType){case"date":t=120;break;case"daterange":t=230;break;case"datetimerange":t=310;break}return{width:"".concat(t,"px")}}},mixins:[r["a"]],data:function(){var t=864e5;return{dateRange:[],date:new Date,month:new Date,pickerOptions:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(t){var e=new Date;t.$emit("pick",[e,e])}},{text:this.$t("reportForm.yesterDay"),onClick:function(e){var a=new Date;a.setTime(a.getTime()-t),e.$emit("pick",[a,a])}},{text:this.$t("missing.theWeek"),onClick:function(e){var a=new Date,i=new Date,n=a.getDay();a.setTime(a.getTime()-t*(n-1)),i.setTime(a.getTime()+6*t),e.$emit("pick",[a,i])}},{text:this.$t("missing.lastWeek"),onClick:function(e){var a=new Date,i=new Date,n=a.getDay(),o=a.getTime()-t*(n-1);a.setTime(o-7*t),i.setTime(o-t),e.$emit("pick",[a,i])}},{text:this.$t("missing.thisMonth"),onClick:function(t){var e=new Date,a=e.getFullYear(),i=e.getMonth()+1,n=new Date("".concat(a,"-").concat(i,"-01")),o=new Date("".concat(a,"-").concat(i,"-01 00:00:00"));o.setMonth(o.getMonth()+1),o=new Date(o.getTime()-1e3),t.$emit("pick",[n,o])}},{text:this.$t("missing.lastMonth"),onClick:function(t){var e=new Date;e.setMonth(e.getMonth()-1);var a=e.getFullYear(),i=e.getMonth()+1,n=new Date(new Date(a,i,1)-1).getDate(),o=new Date("".concat(a,"-").concat(i,"-01")),r=new Date("".concat(a,"-").concat(i,"-").concat(n));t.$emit("pick",[o,r])}}]},pickerOptionsTime:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(t){var e=new Date(o["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),a=new Date(o["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59");t.$emit("pick",[e,a])}},{text:this.$t("reportForm.yesterDay"),onClick:function(e){var a=new Date;a.setTime(a.getTime()-t),e.$emit("pick",[new Date(o["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(o["a"].format(a,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.theWeek"),onClick:function(e){var a=new Date,i=new Date,n=a.getDay();a.setTime(a.getTime()-t*(n-1)),i.setTime(a.getTime()+6*t),e.$emit("pick",[new Date(o["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(o["a"].format(i,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastWeek"),onClick:function(e){var a=new Date,i=new Date,n=a.getDay(),r=a.getTime()-t*(n-1);a.setTime(r-7*t),i.setTime(r-t),e.$emit("pick",[new Date(o["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(o["a"].format(i,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.thisMonth"),onClick:function(t){var e=new Date,a=e.getFullYear(),i=e.getMonth()+1,n=new Date("".concat(a,"-").concat(i,"-01")),r=new Date("".concat(a,"-").concat(i,"-01 00:00:00"));r.setMonth(r.getMonth()+1),r=new Date(r.getTime()-1e3),t.$emit("pick",[new Date(o["a"].format(n,"yyyy-MM-dd")+" 00:00:00"),new Date(o["a"].format(r,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastMonth"),onClick:function(t){var e=new Date;e.setMonth(e.getMonth()-1);var a=e.getFullYear(),i=e.getMonth()+1,n=new Date(new Date(a,i,1)-1).getDate(),r=new Date("".concat(a,"-").concat(i,"-01")),l=new Date("".concat(a,"-").concat(i,"-").concat(n));t.$emit("pick",[new Date(o["a"].format(r,"yyyy-MM-dd")+" 00:00:00"),new Date(o["a"].format(l,"yyyy-MM-dd")+" 23:59:59")])}}]}}},watch:{dateRange:function(t){null==t?this.$emit("input",[]):this.$emit("input",t)},value:function(t){this.dateRange=t},date:function(t){this.$emit("input",t)},month:function(t){this.$emit("input",t)}},methods:{onChange:function(t){this.$emit("input",t)}},mounted:function(){"date"==this.dateType?this.date=this.value:"month"==this.dateType?this.month=this.value:this.dateRange=this.value}},s=l,c=(a("e716"),a("2877")),d=Object(c["a"])(s,i,n,!1,null,"5dbb8594",null);e["a"]=d.exports},"4c3c":function(t,e,a){"use strict";a("4e82");e["a"]={data:function(){return{sortConfig:{sortMethod:function(t){var e=t.data,a=t.sortList,i=a[0],n=i.property,o=i.order,r=[];return r="desc"===o?e.sort((function(t,e){var a=t[n],i=e[n];if(isNaN(a)&&!isNaN(Date.parse(a))&&isNaN(i)&&!isNaN(Date.parse(i)))return Date.parse(i)-Date.parse(a);if(a=parseFloat(a),i=parseFloat(i),isNaN(a)||isNaN(i)){var o=e[n]+"";return o.localeCompare(t[n])}return i-a})):"asc"===o?e.sort((function(t,e){var a=t[n],i=e[n];if(isNaN(a)&&!isNaN(Date.parse(a))&&isNaN(i)&&!isNaN(Date.parse(i)))return Date.parse(a)-Date.parse(i);if(a=parseFloat(t[n]),i=parseFloat(e[n]),isNaN(a)||isNaN(i)){var o=t[n]+"";return o.localeCompare(e[n])}return a-i})):e.sort(),r}}}}}},ae64:function(t,e,a){"use strict";a("05f1")},d462:function(t,e,a){"use strict";var i=a("2ddc");e["a"]=i["a"]},e561:function(t,e,a){"use strict";var i=a("ea22");e["a"]=i["a"]},e716:function(t,e,a){"use strict";a("271ae")},e71be:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full"},[e("div",{staticClass:"report-form-inner"},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[e("div",{staticClass:"f_left"},[e("MultiChoiceVehicle",{on:{onSelectDevice:t.onSelectDevice}})],1),e("div",{staticClass:"f_left"},[e("SelectDate",{attrs:{dateType:"date"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{type:"primary",loading:t.exportLoading1},on:{click:t.exportData}},[t._v(t._s(t.$t("common.export")))])],1)]),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"39px"}},[e("vxe-table",{staticClass:"mytable-scrollbar",attrs:{"sort-config":t.sortConfig,"menu-config":t.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",height:"auto",data:t.totalList,size:"mini"},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index"),fixed:"left"}}),e("vxe-table-column",{attrs:{field:"statisticsday",width:"120",title:t.$t("reportForm.date"),fixed:"left",sortable:""}}),e("vxe-table-column",{attrs:{field:"devicename",width:"120",title:t.$t("alarm.devName"),fixed:"left",sortable:""}}),e("vxe-table-column",{attrs:{field:"deviceid",width:"120",title:t.$t("alarm.devNum"),fixed:"left",sortable:""}}),e("vxe-table-column",{attrs:{field:"runoilper100km",width:"130",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.runoilper100km"),sortable:""}}),e("vxe-table-column",{attrs:{field:"oilper100km",width:"120",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.fuelConsumption100km"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totaldistance",width:"120",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.mileage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totaloil",width:"120",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.oilConsumption"),sortable:""}}),e("vxe-table-column",{attrs:{field:"addoil",width:"120",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.fuelVolume"),sortable:""}}),e("vxe-table-column",{attrs:{field:"leakoil",width:"130",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.oilLeakage"),sortable:""}}),e("vxe-table-column",{attrs:{field:"idleoil",width:"120",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.idleOil"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalnotrunningad",formatter:t.numberToFixed2,align:"right",width:"155",title:t.$t("reportForm.totalnotrunningad"),sortable:""}}),e("vxe-table-column",{attrs:{field:"addnotrunningad",formatter:t.numberToFixed2,align:"right",width:"155",title:t.$t("reportForm.addnotrunningad"),sortable:""}}),e("vxe-table-column",{attrs:{field:"leaknotrunningad",formatter:t.numberToFixed2,align:"right",width:"155",title:t.$t("reportForm.leaknotrunningad"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalaccStr",formatter:t.numberToFixed2,align:"right",width:"140",title:t.$t("reportForm.workingDuration"),sortable:""}}),e("vxe-table-column",{attrs:{field:"oilperhour",formatter:t.numberToFixed2,align:"right",width:"140",title:t.$t("reportForm.fuelConsumptionHour"),sortable:""}})],1)],1)])])},n=[],o=(a("14d9"),a("a9e3"),a("d3b7"),a("159b"),a("5101")),r=a("e561"),l=a("d462"),s=a("1c31"),c=a("6e52"),d=a("4c3c"),u=a("a05b"),m=a("c276"),p={name:"oilDaySummary",data:function(){return{date:new Date(Date.now()-864e5),loading:!1,exportLoading1:!1,totalList:[]}},components:{MultiChoiceVehicle:r["a"],SelectDate:l["a"]},mixins:[d["a"],u["a"]],watch:{date:function(){this.loading||this.handleQuery()}},methods:{numberToFixed2:m["ob"],onSelectDevice:function(t){this.deviceids=t},handleQuery:function(){var t=this,e=this.deviceids;if(0!=e.length){var a=o["a"].format(this.date,"yyyy-MM-dd"),i={startday:a,endday:a,offset:o["a"].getOffset(),devices:e};this.loading=!0,Object(s["X"])(i).then((function(e){var i=e.records;t.loading=!1;var n=[];i&&i.forEach((function(t){var e=t.deviceid;t.records.forEach((function(t){t.deviceid=e,t.statisticsday=a,t.devicename=c["a"].deviceInfos[e].devicename;var i=t.totalacc/1e3/3600;t.idleoil=t.idleoil/100,t.runoilper100km=t.runoilper100km,t.totaldistance=t.totaldistance/1e3,t.totalaccStr=i,t.totaloil=t.totaloil/100,t.addoil=t.addoil/100,t.leakoil=t.leakoil/100,t.totalnotrunningad=t.totalnotrunningad/100,t.addnotrunningad=t.addnotrunningad/100,t.leaknotrunningad=t.leaknotrunningad/100,0==t.totaldistance||0==t.totalacc?t.averagespeed=0:t.averagespeed=t.totaldistance/Number(i),n.push(t)}))})),t.totalList=n}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},exportData:function(){if(0!=this.totalList.length){var t=[[this.$t("reportForm.index"),this.$t("reportForm.date"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.runoilper100km"),this.$t("reportForm.fuelConsumption100km"),this.$t("reportForm.mileage"),this.$t("reportForm.oilConsumption"),this.$t("reportForm.fuelVolume"),this.$t("reportForm.oilLeakage"),this.$t("reportForm.idleOil"),this.$t("reportForm.totalnotrunningad"),this.$t("reportForm.addnotrunningad"),this.$t("reportForm.leaknotrunningad"),this.$t("reportForm.workingDuration"),this.$t("reportForm.fuelConsumptionHour")]];this.totalList.forEach((function(e,a){var i=[];i.push(a+1),i.push(e.statisticsday),i.push(e.devicename),i.push(e.deviceid),i.push(Object(m["ob"])(e.runoilper100km)),i.push(Object(m["ob"])(e.oilper100km)),i.push(Object(m["ob"])(e.totaldistance)),i.push(Object(m["ob"])(e.totaloil)),i.push(Object(m["ob"])(e.addoil)),i.push(Object(m["ob"])(e.leakoil)),i.push(Object(m["ob"])(e.idleoil)),i.push(Object(m["ob"])(e.totalnotrunningad)),i.push(Object(m["ob"])(e.addnotrunningad)),i.push(Object(m["ob"])(e.leaknotrunningad)),i.push(Object(m["ob"])(e.totalaccStr)),i.push(Object(m["ob"])(e.oilperhour)),t.push(i)}));var e={title:this.$t("reportForm.oilDaySummary"),data:t};this.exportLoading1=!0,new ExcelCls(e).exportExcel(this)}}},mounted:function(){this.deviceids=[]}},h=p,f=(a("ae64"),a("2877")),g=Object(f["a"])(h,i,n,!1,null,null,null),v=g.exports;e["default"]=v}}]);