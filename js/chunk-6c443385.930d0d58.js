(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c443385"],{"0595":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"quick-time-range"},[e("div",{staticClass:"quick-time-range-wrapper"},t._l(t.list,(function(a){return e("div",{key:a.type,style:{color:a.type==t.type?"#409EFF":""},on:{click:function(e){return t.selectDate(a.type)}}},[t._v(t._s(a.label))])})),0),e("div",{staticClass:"quick-time-range-space"}),e("div",{staticClass:"quick-time-range-btn",on:{click:function(e){t.isCollapse=!t.isCollapse}}},[t.isCollapse?e("i",{staticClass:"el-icon-arrow-right"}):e("i",{staticClass:"el-icon-arrow-left"})])])},r=[],s=a("5101"),o={name:"QuickTimeRange",props:{value:{type:Array,default:function(){return[]}},dateType:{type:String,default:"date"}},watch:{isCollapse:function(){this.setList()}},data:function(){return{isCollapse:!0,type:0,list:[]}},methods:{setList:function(){this.isCollapse?this.list=[{label:this.$t("reportForm.toDay"),type:0},{label:this.$t("reportForm.yesterDay"),type:1},{label:this.$t("reportForm.recent3Days"),type:3}]:this.list=[{label:this.$t("reportForm.recent7Days"),type:7},{label:this.$t("reportForm.recent10Days"),type:10},{label:this.$t("reportForm.recent30Days"),type:30}]},selectDate:function(t){var e="datetimerange"==this.dateType,a=[],i=new Date,r=new Date;switch(e&&(i=new Date(s["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),r=new Date(s["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59")),t){case 0:a=[new Date(s["a"].format(i,"yyyy-MM-dd")+" 00:00:00"),new Date(s["a"].format(r,"yyyy-MM-dd")+" 23:59:59")];break;case 1:i.setTime(i.getTime()-864e5),a=[i,r];break;case 3:i.setTime(i.getTime()-2592e5),a=[i,r];break;case 7:i.setTime(i.getTime()-6048e5),a=[i,r];break;case 10:i.setTime(i.getTime()-864e6),a=[i,r];break;case 30:i.setTime(i.getTime()-2592e6),a=[i,r];break}this.type=t,this.$emit("input",a)}},mounted:function(){var t=this;this.$nextTick((function(){t.setList()}))}},n=o,l=(a("c51d"),a("2877")),c=Object(l["a"])(n,i,r,!1,null,null,null);e["a"]=c.exports},2607:function(t,e,a){},"271ae":function(t,e,a){},"2ddc":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"multi-choice",style:t.warpStyle},[e("div",{staticClass:"multi-choice-input"},["daterange"==t.dateType?e("div",[e("el-date-picker",{attrs:{type:t.dateType,"picker-options":t.pickerOptions,"range-separator":"-",align:"center","unlink-panels":"",clearable:!1,"start-placeholder":t.$t("device.driverinitialdate"),"end-placeholder":t.$t("device.drivereffectivedate")},on:{change:t.onChange},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1):t._e(),"date"==t.dateType?e("div",[e("el-date-picker",{attrs:{type:"date","picker-options":t.datePickerOptions},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1):t._e(),"datetimerange"==t.dateType?e("div",{staticClass:"datetimerange"},[e("el-date-picker",{attrs:{type:t.dateType,"range-separator":"-","picker-options":t.pickerOptionsTime,align:"center","unlink-panels":"",clearable:!1,"start-placeholder":t.$t("device.driverinitialdate"),"end-placeholder":t.$t("device.drivereffectivedate"),"default-time":["00:00:00","23:59:59"]},on:{change:t.onChange},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1):t._e(),"month"==t.dateType?e("div",[e("el-date-picker",{attrs:{type:"month"},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1):t._e()])])},r=[],s=(a("99af"),a("5101")),o=a("5867"),n={name:"SelectDate",props:{value:{type:Array|Date,default:function(){return[]}},dateType:{type:String,default:"daterange"},label:{type:String,default:function(){return this.$t("common.selectTime")}}},computed:{isDaterange:function(){return"daterange"==this.dateType},warpStyle:function(){var t=200;switch(this.dateType){case"date":t=120;break;case"daterange":t=230;break;case"datetimerange":t=310;break}return{width:"".concat(t,"px")}}},mixins:[o["a"]],data:function(){var t=864e5;return{dateRange:[],date:new Date,month:new Date,pickerOptions:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(t){var e=new Date;t.$emit("pick",[e,e])}},{text:this.$t("reportForm.yesterDay"),onClick:function(e){var a=new Date;a.setTime(a.getTime()-t),e.$emit("pick",[a,a])}},{text:this.$t("missing.theWeek"),onClick:function(e){var a=new Date,i=new Date,r=a.getDay();a.setTime(a.getTime()-t*(r-1)),i.setTime(a.getTime()+6*t),e.$emit("pick",[a,i])}},{text:this.$t("missing.lastWeek"),onClick:function(e){var a=new Date,i=new Date,r=a.getDay(),s=a.getTime()-t*(r-1);a.setTime(s-7*t),i.setTime(s-t),e.$emit("pick",[a,i])}},{text:this.$t("missing.thisMonth"),onClick:function(t){var e=new Date,a=e.getFullYear(),i=e.getMonth()+1,r=new Date("".concat(a,"-").concat(i,"-01")),s=new Date("".concat(a,"-").concat(i,"-01 00:00:00"));s.setMonth(s.getMonth()+1),s=new Date(s.getTime()-1e3),t.$emit("pick",[r,s])}},{text:this.$t("missing.lastMonth"),onClick:function(t){var e=new Date;e.setMonth(e.getMonth()-1);var a=e.getFullYear(),i=e.getMonth()+1,r=new Date(new Date(a,i,1)-1).getDate(),s=new Date("".concat(a,"-").concat(i,"-01")),o=new Date("".concat(a,"-").concat(i,"-").concat(r));t.$emit("pick",[s,o])}}]},pickerOptionsTime:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(t){var e=new Date(s["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),a=new Date(s["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59");t.$emit("pick",[e,a])}},{text:this.$t("reportForm.yesterDay"),onClick:function(e){var a=new Date;a.setTime(a.getTime()-t),e.$emit("pick",[new Date(s["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(s["a"].format(a,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.theWeek"),onClick:function(e){var a=new Date,i=new Date,r=a.getDay();a.setTime(a.getTime()-t*(r-1)),i.setTime(a.getTime()+6*t),e.$emit("pick",[new Date(s["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(s["a"].format(i,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastWeek"),onClick:function(e){var a=new Date,i=new Date,r=a.getDay(),o=a.getTime()-t*(r-1);a.setTime(o-7*t),i.setTime(o-t),e.$emit("pick",[new Date(s["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(s["a"].format(i,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.thisMonth"),onClick:function(t){var e=new Date,a=e.getFullYear(),i=e.getMonth()+1,r=new Date("".concat(a,"-").concat(i,"-01")),o=new Date("".concat(a,"-").concat(i,"-01 00:00:00"));o.setMonth(o.getMonth()+1),o=new Date(o.getTime()-1e3),t.$emit("pick",[new Date(s["a"].format(r,"yyyy-MM-dd")+" 00:00:00"),new Date(s["a"].format(o,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastMonth"),onClick:function(t){var e=new Date;e.setMonth(e.getMonth()-1);var a=e.getFullYear(),i=e.getMonth()+1,r=new Date(new Date(a,i,1)-1).getDate(),o=new Date("".concat(a,"-").concat(i,"-01")),n=new Date("".concat(a,"-").concat(i,"-").concat(r));t.$emit("pick",[new Date(s["a"].format(o,"yyyy-MM-dd")+" 00:00:00"),new Date(s["a"].format(n,"yyyy-MM-dd")+" 23:59:59")])}}]}}},watch:{dateRange:function(t){null==t?this.$emit("input",[]):this.$emit("input",t)},value:function(t){this.dateRange=t},date:function(t){this.$emit("input",t)},month:function(t){this.$emit("input",t)}},methods:{onChange:function(t){this.$emit("input",t)}},mounted:function(){"date"==this.dateType?this.date=this.value:"month"==this.dateType?this.month=this.value:this.dateRange=this.value}},l=n,c=(a("e716"),a("2877")),d=Object(c["a"])(l,i,r,!1,null,"5dbb8594",null);e["a"]=d.exports},"427e":function(t,e,a){"use strict";a("2607")},"4c3c":function(t,e,a){"use strict";a("4e82");e["a"]={data:function(){return{sortConfig:{sortMethod:function(t){var e=t.data,a=t.sortList,i=a[0],r=i.property,s=i.order,o=[];return o="desc"===s?e.sort((function(t,e){var a=t[r],i=e[r];if(isNaN(a)&&!isNaN(Date.parse(a))&&isNaN(i)&&!isNaN(Date.parse(i)))return Date.parse(i)-Date.parse(a);if(a=parseFloat(a),i=parseFloat(i),isNaN(a)||isNaN(i)){var s=e[r]+"";return s.localeCompare(t[r])}return i-a})):"asc"===s?e.sort((function(t,e){var a=t[r],i=e[r];if(isNaN(a)&&!isNaN(Date.parse(a))&&isNaN(i)&&!isNaN(Date.parse(i)))return Date.parse(a)-Date.parse(i);if(a=parseFloat(t[r]),i=parseFloat(e[r]),isNaN(a)||isNaN(i)){var s=t[r]+"";return s.localeCompare(e[r])}return a-i})):e.sort(),o}}}}}},"57c9":function(t,e,a){"use strict";var i=a("0595");e["a"]=i["a"]},"5b11":function(t,e,a){},"632c":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{ref:"wraper",class:t.wraperClasses,on:{mouseup:t.handleMouseup,mousemove:t.handleMousemove,mouseleave:t.handleMouseout}},["horizontal"===t.direction?e("div",{class:"".concat(t.prefix,"-container")},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],class:"".concat(t.prefix,"-left-area"),style:{width:t.leftSize}},[t._t("left")],2),t._t("trigger",(function(){return[e("div",{directives:[{name:"show",rawName:"v-show",value:t.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],ref:"trigger",class:"".concat(t.prefix,"-trigger"),style:t.horizontalTriggerStyle},[e("div",{staticClass:"split-pane-trigger-btn",on:{click:t.onClickHorizontal}}),e("div",{class:"".concat(t.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:t.handleMousedown}})])]})),e("div",{class:"".concat(t.prefix,"-right-area"),style:{width:t.horizontalModeShowLeft?t.rightSize:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.horizontalModeShowLeft,expression:"!horizontalModeShowLeft"}],staticClass:"split-pane-right-btn",on:{click:t.onClickHorizontal}}),t._t("right")],2)],2):e("div",{class:"".concat(t.prefix,"-container")},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.verticalShowTop,expression:"verticalShowTop"}],class:"".concat(t.prefix,"-top-area"),style:{height:"move"==t.verticalMode?t.leftSize:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"bottom"==t.verticalMode,expression:"verticalMode == 'bottom'"}],staticClass:"trigger-show-bottom",on:{click:function(e){return t.setVerticalMode("move")}}}),t._t("top")],2),t._t("trigger",(function(){return[e("div",{directives:[{name:"show",rawName:"v-show",value:"move"==t.verticalMode,expression:"verticalMode == 'move'"}],ref:"trigger",class:"".concat(t.prefix,"-trigger"),style:t.verticalTriggerStyle},[e("div",{class:"".concat(t.prefix,"-trigger-btn")},[e("div",{on:{click:function(e){return t.setVerticalMode("top")}}}),e("div",{on:{click:function(e){return t.setVerticalMode("bottom")}}})]),e("div",{class:"".concat(t.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:t.handleMousedown}})])]})),e("div",{directives:[{name:"show",rawName:"v-show",value:t.verticalShowBottom,expression:"verticalShowBottom"}],class:"".concat(t.prefix,"-bottom-area"),style:{height:"move"==t.verticalMode?t.rightSize:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"top"==t.verticalMode,expression:"verticalMode == 'top'"}],staticClass:"trigger-show-top",on:{click:function(e){return t.setVerticalMode("move")}}}),t._t("bottom")],2)],2)])},r=[],s=(a("c975"),a("a9e3"),function(t,e){return e.indexOf(t)>=0}),o={name:"splitPane",props:{value:{type:[Number,String],default:50},horizontalModeShowLeft:{type:Boolean,default:!0},verticalMode:{type:String,default:"move"},direction:{type:String,default:"horizontal",validator:function(t){return s(t,["vertical","horizontal"])}},min:{type:[Number,String],default:3},max:{type:[Number,String],default:97},maxRight:{type:Boolean,default:!1},right:{type:Boolean,default:!1},triggerStyle:{type:Object,default:function(){return"horizontal"===this.direction?{width:"8px",background:"#ffffff"}:{height:"8px",background:"#ffffff"}}}},data:function(){return{prefix:"split-pane",canMove:!1,triggerOffset:50,triggerOldOffset:50,offset:{},atMin:!1,atMax:!1,directionMark:0}},computed:{wraperClasses:function(){return[this.prefix,"vertical"===this.direction?"".concat(this.prefix,"-vertical"):"".concat(this.prefix,"-horizontal")]},leftSize:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},rightSize:function(){return this.right?"".concat(this.triggerOffset,"%"):"".concat(100-this.triggerOffset,"%")},triggerLeft:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},minTransed:function(){return this.transValue(this.min)},maxTransed:function(){var t=this.right?100-this.transValue(this.max):this.transValue(this.max);return this.maxRight?100-t:t},horizontalTriggerStyle:function(){return Object.assign({left:this.triggerLeft,borderTop:"1px solid #E2E3E5"},this.triggerStyle)},verticalTriggerStyle:function(){return Object.assign({top:this.triggerLeft},this.triggerStyle)},verticalShowTop:function(){return"bottom"==this.verticalMode||"move"==this.verticalMode},verticalShowBottom:function(){return"top"==this.verticalMode||"move"==this.verticalMode}},methods:{setVerticalMode:function(t){this.$emit("on-resize",t)},onClickHorizontal:function(){this.$emit("on-resize",!this.horizontalModeShowLeft)},handleMouseup:function(t){1==this.canMove&&(this.canMove=!1,this.$emit("on-resizing-end",t))},transValue:function(t){return"number"===typeof t?t:Math.floor(parseFloat(t)/this.$refs.wraper.offsetWidth*1e4)/100},handleMousedown:function(t){this.canMove=!0,this.triggerOldOffset=this.triggerOffset,this.offset={x:t.pageX,y:t.pageY},this.$emit("on-resizing-start",t),t.preventDefault()},handleMouseout:function(){this.canMove=!1},handleMousemove:function(t){if(this.canMove){var e,a=0;if("horizontal"===this.direction?(a=Math.floor((t.clientX-this.offset.x)/this.$refs.wraper.offsetWidth*1e4)/100,e=this.triggerOldOffset+(this.right?-a:a)):(a=Math.floor((t.clientY-this.offset.y)/this.$refs.wraper.offsetHeight*1e4)/100,e=this.triggerOldOffset+(this.right?-a:a)),this.right){var i=100-e;i<=this.minTransed?this.triggerOffset=100-Math.max(i,this.minTransed):this.triggerOffset=100-Math.min(i,this.maxTransed)}else e<=this.minTransed?this.triggerOffset=Math.max(e,this.minTransed):this.triggerOffset=Math.min(e,this.maxTransed);t.atMin=100-e<=this.minTransed,t.atMax=100-e>=this.maxTransed,t.pageX>this.directionMark?t.direction=1:t.direction=0,this.directionMark=t.pageX,this.$emit("input",this.triggerOffset),this.$emit("on-resizing",t)}},setTriggerOffset:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100,e.$emit("input",e.triggerOffset)}))}},watch:{value:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100}))}},mounted:function(){var t=this;void 0!==this.value&&(this.$nextTick((function(){t.triggerOffset="number"===typeof t.value?t.value:Math.floor(parseInt(t.value)/t.$refs.wraper.offsetWidth*1e4)/100})),this.triggerOffset="number"===typeof this.value?this.value:Math.floor(parseInt(this.value)/this.$refs.wraper.offsetWidth*1e4)/100)}},n=o,l=(a("427e"),a("2877")),c=Object(l["a"])(n,i,r,!1,null,null,null),d=c.exports;e["a"]=d},a314:function(t,e,a){"use strict";a("f86c")},bfa7:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full"},[e("div",{staticClass:"report-form-inner"},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[e("div",{staticClass:"f_left"},[e("MultiChoiceVehicle",{ref:"multiChoiceVehicle",on:{onSelectDevice:t.onSelectDevice}})],1),e("div",{staticClass:"f_left"},[e("SelectDate",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("QuickTimeRange",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{type:"primary",loading:t.exportLoading1},on:{click:t.exportData}},[t._v(t._s(t.$t("common.export")))])],1)]),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"39px"}},[e("split-pane",{style:{height:"100%"},attrs:{direction:"vertical",verticalMode:t.verticalMode},on:{"on-resize":t.onSplitPaneResize},model:{value:t.triggerOffsetV,callback:function(e){t.triggerOffsetV=e},expression:"triggerOffsetV"}},[e("div",{staticStyle:{position:"relative",height:"100%",border:""},attrs:{slot:"top"},slot:"top"},[e("div",{staticStyle:{position:"absolute",left:"-4px",right:"-4px",top:"0px",bottom:"0px"}},[e("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"sort-config":t.sortConfig,"menu-config":t.tableMenu,border:"","auto-resize":"",resizable:"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.totalList},on:{"menu-click":t.handleClickTableMenu,"checkbox-change":t.selectChangeRow,"cell-click":t.cellClickRow}},[e("vxe-table-column",{attrs:{type:"checkbox",width:"50"}}),e("vxe-table-column",{attrs:{field:"index",width:"60",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"devicename",title:t.$t("alarm.devName"),width:"130",sortable:""}}),e("vxe-table-column",{attrs:{field:"deviceid",title:t.$t("alarm.devNum"),width:"130",sortable:""}}),e("vxe-table-column",{attrs:{field:"creater",title:t.$t("reportForm.creater"),width:"100",sortable:""},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[e("div",{staticClass:"parents-wrapper"},t._l(t.parentsList,(function(a){return e("div",{key:a.username},[t._v(t._s(a.username)+"("+t._s(a.usertypeStr)+")")])})),0),e("el-button",{staticStyle:{color:"#000000"},attrs:{slot:"reference",type:"text"},on:{click:function(e){return t.queryParents(a.row.creater)}},slot:"reference"},[t._v(t._s(a.row.creater))])],1)]}}])}),e("vxe-table-column",{attrs:{field:"groupname",title:t.$t("reportForm.groupName"),width:"100",sortable:""}}),e("vxe-table-column",{attrs:{field:"startalarmtimeStr",title:t.$t("alarm.alarmTime"),width:"150",sortable:""}}),e("vxe-table-column",{attrs:{field:"stralarm",title:t.$t("alarm.alarmType"),width:"90",sortable:""}}),e("vxe-table-column",{attrs:{field:"notifyresult",title:t.$t("reportForm.notifyResult"),width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"address",title:t.$t("reportForm.address"),width:"200"}})],1)],1)]),e("div",{staticStyle:{height:"100%"},attrs:{slot:"bottom"},slot:"bottom"},[e("ReportMap",{ref:"mapIns"})],1)])],1)]),e("SafetyDetailReport",{ref:"safetyDetail",model:{value:t.safetyDrawer,callback:function(e){t.safetyDrawer=e},expression:"safetyDrawer"}})],1)},r=[],s=a("5530"),o=(a("14d9"),a("d3b7"),a("159b"),a("e561")),n=a("d462"),l=a("57c9"),c=a("632c"),d=a("32eb"),u=a("d91c"),h=a("1c31"),f=a("7cf8"),m=a("6e52"),p=a("5101"),v=a("2f62"),g=a("c276"),y=a("4c3c"),w=a("a05b"),M=a("0c87"),b={name:"PhoneAlarm",data:function(){return{loading:!1,safetyDrawer:!1,exportLoading1:!1,dateRange:[new Date,new Date],totalList:[],selectRowList:[],triggerOffsetV:50,verticalMode:"move"}},mixins:[y["a"],w["a"],M["a"]],beforeRouteEnter:function(t,e,a){a((function(e){e.notifytype=t.meta.notifytype,e.$refs.mapIns&&e.$refs.mapIns.clear&&e.$refs.mapIns.clear(),e.totalList=[],e.safetyDrawer=!1}))},computed:Object(s["a"])({},Object(v["b"])(["isZh","alarmTypeList","reportTagList"])),components:{MultiChoiceVehicle:o["a"],SelectDate:n["a"],QuickTimeRange:l["a"],SplitPane:c["a"],ReportMap:d["a"],SafetyDetailReport:u["a"]},watch:{dateRange:function(){this.handleQuery()}},activated:function(){this.autoQueryAllDeviceAlarms()},methods:Object(s["a"])(Object(s["a"])({},Object(v["c"])(["setAllAlarmList","setUrgentAlarmList","setReportTagList"])),{},{onSplitPaneResize:function(t){this.verticalMode=t},cellClickRow:function(t){var e=t.row;this.$refs.mapIns.singleMarkerToMap(e),this.queryActiveSafetyRecord(e)},queryActiveSafetyRecord:function(t){var e=this,a=35184372088832;if(t.alarm==a){var i={deviceid:t.deviceid,updatetime:t.startalarmtime,activesafetyid:t.av};Object(f["z"])(i).then((function(t){var a=t.playrootpath,i=t.record;if(i){i._localPlayRootPath=a;var r=i.alarmtype;100==r?i.event=Object(g["A"])(i):101==r?i.event=Object(g["k"])(i):103==r&&(i.event=Object(g["l"])(i)),i.dateStr=p["a"].longToLocalDateTimeStr(i.updatetime),e.$refs.safetyDetail.setRecordInfo(i),e.safetyDrawer=!0}}))}},isNeedForceAlarm:function(t){var e=!1,a=this.$store.state.forcealarm;if(t&&a)for(var i=t.length,r=a.length,s=Math.min(i,r),o=0;o<s;++o){var n=t.charAt(o),l=a.charAt(o);if("1"==l&&"1"==n){e=!0;break}}return e},onSelectDevice:function(t){this.deviceids=t},selectChangeRow:function(t){var e=t.records;this.selectRowList=e},exportData:function(){var t=this,e=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("alarm.alarmTime"),this.$t("alarm.alarmType"),this.$t("alarm.alarmCount"),this.$t("reportForm.status"),this.$t("reportForm.address")]];if(this.totalList.length){var a=this.$refs.xTable.getTableData().visibleData;a.forEach((function(a,i){var r=0===a.disposestatus?t.$t("reportForm.untreated"):t.$t("reportForm.handled"),s=[];s.push(i+1),s.push(a.devicename),s.push(a.deviceid),s.push(a.startalarmtimeStr),s.push(a.stralarm),s.push(a.alarmcount),s.push(r),s.push(a.address),e.push(s)}));var i={title:this.$t("reportForm.allAlarm"),data:e,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(i).exportExcel(this)}},handleQuery:function(){var t=this,e=this.deviceids,a=this.dateRange;if(0!=e.length){var i=p["a"].format(a[0],"yyyy-MM-dd"),r=p["a"].format(a[1],"yyyy-MM-dd"),s={deviceids:e,notifytype:this.notifytype,startday:i,endday:r,timezone:p["a"].getOffset(),needaddress:1};this.loading=!0,this.queryDetailDateRange=s.startday+"  "+s.endday,Object(h["s"])(s).then((function(e){var a=e.alarmrecords,i=e.addressmap;t.loading=!1,t.selectRowList=[];var r=[];if(null!=a){var s=a.length;a.forEach((function(e,a){var o=m["a"].deviceInfos[e.deviceid],n=0===e.disposestatus?t.$t("reportForm.untreated"):t.$t("reportForm.handled");r.push({index:s-a,deviceid:e.deviceid,devicename:o.devicename,creater:m["a"].getShowName(o.creater),groupname:o.groupname,alarmcount:e.alarmcount,startalarmtimeStr:p["a"].longToLocalDateTimeStr(e.startalarmtime),isdispose:n,stralarm:t.isZh?e.stralarm:Object(g["Ob"])(e.stralarmen),disposeperson:e.disposeperson?e.disposeperson:"",disposestatus:e.disposestatus,disposecontent:e.disposecontent,createrrecords:[],callat:e.lat,callon:e.lon,alarm:e.alarm,devicealarmid:e.devicealarmid,notifyresult:e.notifyresult,av:e.av,startalarmtime:e.startalarmtime,address:Object(g["L"])(i,e.lat,e.lon)})}))}if(t.totalList=r,r.length){var o=r[0];t.$refs.xTable.setCurrentRow(o),t.$refs.xTable.scrollToRow(o),t.$refs.mapIns.singleMarkerToMap(o)}}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})}}),mounted:function(){this.deviceids=[]}},x=b,k=(a("a314"),a("2877")),D=Object(k["a"])(x,i,r,!1,null,null,null),T=D.exports;e["default"]=T},c51d:function(t,e,a){"use strict";a("ecfc")},d462:function(t,e,a){"use strict";var i=a("2ddc");e["a"]=i["a"]},d91c:function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("transition",{attrs:{name:"moveX"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.value,expression:"value"}],staticClass:"safety-day-report-drawer"},[e("div",{staticClass:"safety-day-report-drawer-title",staticStyle:{height:"24px"}},[e("span",{domProps:{textContent:t._s(t.recordTitle)}}),e("div",{staticStyle:{float:"right",cursor:"pointer"},on:{click:t.handleClose}},[e("i",{staticClass:"el-icon-close",staticStyle:{"font-size":"16px"}})])]),e("div",{staticClass:"safety-day-report-drawer-title"},[e("span",{domProps:{textContent:t._s(t.recordTime)}})]),e("div",{staticClass:"safety-day-report-drawer-video"},[e("div",{staticStyle:{border:"1px solid #e8eaec"}},[e("el-carousel",{ref:"carousel",attrs:{trigger:"click",height:"280px",autoplay:!1}},t._l(t.imageAndVideoList,(function(a,i){return e("el-carousel-item",{key:i,attrs:{name:"carousel"+i}},[a.image&&""!=a.url?e("div",{staticClass:"full"},[e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:a.url}})]):t._e(),a.image?t._e():e("div",{staticClass:"full"},[e("video",{staticStyle:{width:"100%",height:"100%"},attrs:{src:a.url,autoplay:"",controls:"",loop:""}})]),e("div",{directives:[{name:"show",rawName:"v-show",value:a.image&&""==a.url,expression:"item.image && item.url == ''"}],staticClass:"full default-images"})])})),1)],1),e("div",{staticClass:"safety-day-report-drawer-video-ctrl"},[e("el-row",{staticStyle:{height:"100%"},attrs:{gutter:4}},t._l(t.imageAndVideoList,(function(a,i){return e("el-col",{key:i,staticStyle:{height:"100%"},attrs:{span:6}},[a.image&&""!=a.url?e("div",{staticClass:"full",on:{click:function(e){return t.$refs.carousel.setActiveItem("carousel"+i)}}},[e("img",{staticStyle:{width:"100%",height:"100%",cursor:"pointer"},attrs:{src:a.url}})]):t._e(),a.image?t._e():e("div",{staticClass:"safety-video full",on:{click:function(e){return t.$refs.carousel.setActiveItem("carousel"+i)}}},[e("video",{staticStyle:{width:"100%",height:"100%",cursor:"pointer"},attrs:{src:a.url}}),e("div",{staticClass:"video-play-icon"},[e("i",{staticClass:"el-icon-video-play"})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:a.image&&""==a.url,expression:"item.image && item.url == ''"}],staticClass:"full default-images",staticStyle:{cursor:"pointer"},on:{click:function(e){return t.$refs.carousel.setActiveItem("carousel"+i)}}})])})),1)],1)]),e("div",{staticClass:"safety-day-report-drawer-switch",on:{click:function(e){t.showMap=!t.showMap}}},[t.showMap?e("div",{staticClass:"common_icon_move_down"}):e("div",{staticClass:"common_icon_move_up"})]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showMap,expression:"showMap"}],staticClass:"safety-day-report-drawer-map"},[e("ReportMap",{ref:"mapIns"})],1)])])},r=[],s=(a("14d9"),a("d3b7"),a("159b"),a("32eb")),o=a("6e52"),n={name:"SafetyDetailReport",props:{value:{type:Boolean,default:!1}},data:function(){return{showMap:!1,recordTitle:"",recordTime:"",imageAndVideoList:[{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""}]}},watch:{showMap:function(t){t&&this.row&&this.$refs.mapIns.singleMarkerToMap({callon:this.row.lon,callat:this.row.lat})}},components:{ReportMap:s["a"]},methods:{handleClose:function(){this.imageAndVideoList=[{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""},{image:!0,url:"",videoUrl:""}],this.$emit("input",!1)},setRecordInfo:function(t){var e=this;this.row=t,this.$refs.carousel.setActiveItem("carousel0"),this.recordTitle=o["a"].getDeviceNameByDeviceId(t.deviceid)+" - "+t.deviceid,this.recordTime=t.event+" - "+t.dateStr,this._localPlayRootPath=t._localPlayRootPath,this.imageAndVideoList=this.getImageAndVideoList(t),this.$nextTick((function(){var a=document.getElementsByClassName("default-images");a.forEach((function(t){t.style.backgroundImage="url('./custom/tvdefault.jpg')"})),1==e.showMap&&e.$refs.mapIns.singleMarkerToMap({callon:t.lon,callat:t.lat})}))},getImageAndVideoList:function(t){var e="",a=[],i=this.getMediaTypeWithIndex(t,2,1),r=this.getMediaTypeWithIndex(t,0,1),s=this.getMediaTypeWithIndex(t,0,2),o=this.getMediaTypeWithIndex(t,0,3);i&&a.push({image:!i,url:i}),r&&a.push({image:!0,url:r}),s&&a.push({image:!0,url:s}),o&&a.push({image:!0,url:o});for(var n=a.length,l=0;l<4-n;l++)a.push({image:!0,url:e});return a},getMediaTypeWithIndex:function(t,e,a){for(var i=null,r=0,s=1;s<6;s++){var o=t["attachfile"+s];if(o&&1===t["attachstatus"+s]&&t["attachfiletype"+s]===e&&(r++,r===a)){i=this._localPlayRootPath+o;break}}return i}}},l=n,c=(a("f808"),a("2877")),d=Object(c["a"])(l,i,r,!1,null,"c4158d6a",null);e["a"]=d.exports},e561:function(t,e,a){"use strict";var i=a("ea22");e["a"]=i["a"]},e716:function(t,e,a){"use strict";a("271ae")},ecfc:function(t,e,a){},f808:function(t,e,a){"use strict";a("5b11")},f86c:function(t,e,a){}}]);