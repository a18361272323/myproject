(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79439cac"],{"5feb":function(e,t,a){"use strict";a("6445")},6445:function(e,t,a){},e368:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ram full"},[t("div",{staticClass:"ram-header"},[t("div",{staticClass:"f_left"},[t("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary",loading:e.loading},on:{click:e.queryRams}},[e._v(e._s(e.$t("common.query")))])],1),t("div",{staticClass:"f_right"},[t("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:e.addRam}},[e._v(e._s(e.$t("common.add")))])],1)]),t("div",{staticClass:"ram-table"},[t("vxe-table",{attrs:{"menu-config":e.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"",size:"mini",height:"auto",data:e.tableList},on:{"menu-click":e.handleClickTableMenu,"cell-dblclick":e.cellDblclick}},[t("vxe-table-column",{attrs:{title:e.$t("reportForm.action"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.handleViewPermission(a.row)}}},[e._v(e._s(e.$t("bgManage.role")))]),t("span",{staticStyle:{padding:"0px 5px"}}),t("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-info","icon-color":"red","confirm-button-text":e.$t("common.confirm"),"cancel-button-text":e.$t("common.cancel"),title:e.$t("tips.confirmDelete")},on:{confirm:function(t){return e.handleDelete(a)}}},[t("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v(e._s(e.$t("common.delete")))])],1)],1)]}}])}),t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"username",title:e.$t("monitor.name")}}),t("vxe-table-column",{attrs:{field:"creater",title:e.$t("monitor.creator")}}),t("vxe-table-column",{attrs:{field:"roleStr",title:e.$t("bgManage.roleType")}}),t("vxe-table-column",{attrs:{field:"creatertimeStr",title:e.$t("alarm.createTime")}})],1)],1),t("AddRam",{on:{addRam:e.queryRams},model:{value:e.addRamDialog,callback:function(t){e.addRamDialog=t},expression:"addRamDialog"}}),t("el-dialog",{attrs:{title:e.$t("bgManage.selectRole"),center:"",visible:e.roleAialog,width:"320px","append-to-body":"","close-on-click-modal":!1},on:{close:function(t){e.roleAialog=!1}}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.role")}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.roleuuid,callback:function(t){e.roleuuid=t},expression:"roleuuid"}},e._l(e.roles,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticStyle:{"margin-top":"10px","text-align":"center"}},[t("el-button",{staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:e.editUser}},[e._v(e._s(e.$t("common.determine")))])],1)],1)],1)},l=[],i=a("5530"),o=(a("14d9"),a("e9c4"),a("a9e3"),a("b680"),a("b64b"),a("d3b7"),a("159b"),a("e285")),n=(a("498a"),function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.$t("bgManage.addRam"),center:"",visible:e.value,width:"360px","append-to-body":"","close-on-click-modal":!1},on:{close:e.handleClose}},[t("div",{staticClass:"margin_b10"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{staticStyle:{"text-align":"right","line-height":"32px"},attrs:{span:5}},[e._v(e._s(e.$t("monitor.name")))]),t("el-col",{attrs:{span:18}},[t("el-input",{attrs:{placeholder:e.$t("bgManage.pleaseEnterRamName")},model:{value:e.ramname,callback:function(t){e.ramname="string"===typeof t?t.trim():t},expression:"ramname"}})],1)],1)],1),t("div",{staticClass:"margin_b10"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{staticStyle:{"text-align":"right","line-height":"32px"},attrs:{span:5}},[e._v(e._s(e.$t("login.password")))]),t("el-col",{attrs:{span:18}},[t("el-input",{attrs:{placeholder:e.$t("login.inputPassword")},model:{value:e.password,callback:function(t){e.password="string"===typeof t?t.trim():t},expression:"password"}})],1)],1)],1),t("div",{staticClass:"margin_b10",staticStyle:{"text-align":"center"}},[t("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:e.handleAddUser}},[e._v(e._s(e.$t("common.confirm")))])],1)])}),r=[],c=a("2f62"),u=a("6821"),d=a.n(u),m={props:{value:{type:Boolean,default:!1}},data:function(){return{ramname:"",password:""}},computed:Object(i["a"])({},Object(c["b"])(["userName"])),methods:{handleClose:function(){this.$emit("input",!1)},handleAddUser:function(){var e=this,t=this.ramname,a=this.password,s={creater:this.userName,username:t,password:d()(a),usertype:21,multilogin:1};Object(o["i"])(s).then((function(t){var a=t.status;t.cause;0==a?(e.$emit("addRam"),e.$XModal.message({message:e.$t("tips.addSucc"),status:"success",zIndex:9999}),e.handleClose()):1==a?e.$XModal.message({message:e.$t("tips.accountNameOccupied"),status:"error",zIndex:9999}):e.$XModal.message({message:e.$t("tips.addFail"),status:"error",zIndex:9999})}))}}},p=m,g=a("2877"),b=Object(g["a"])(p,n,r,!1,null,null,null),h=b.exports,f=a("201d"),v=a("5101"),x=a("a05b"),$={name:"Ram",data:function(){return{loading:!1,addRamDialog:!1,roleAialog:!1,tableList:[],roles:[],roleuuid:"1"}},components:{AddRam:h,LabelWrap:f["a"]},computed:Object(i["a"])({},Object(c["b"])(["isZh","userName"])),mixins:[x["a"]],mounted:function(){var e=this,t=this.isZh;Object(o["Kb"])().then((function(a){var s=a.roles;s&&(s.forEach((function(e){var a="";a=t?e.rolename:e.rolenameen?e.rolenameen:e.rolename,e.label=a+"("+e.creater+")",e.value=e.roleuuid})),e.roles=s),e.queryRams()}))},methods:{queryRams:function(){var e=this;this.loading=!0,Object(o["Fb"])(this.userName).then((function(t){var a=t.userlists,s=[];a&&a.forEach((function(t){21==t.usertype&&(t.creatertimeStr=v["a"].longToLocalDateTimeStr(t.createtime),t.roleStr=e.getRoleStr(t.roleuuid),s.push(t))})),e.tableList=s,e.loading=!1})).catch((function(t){e.loading=!1}))},getRoleStr:function(e){var t="";return this.roles.forEach((function(a){a.roleuuid==e&&(t=a.label)})),t},addRam:function(){this.addRamDialog=!0},cellDblclick:function(e){var t=e.row;this.handleViewPermission(t)},handleViewPermission:function(e){this.row=e,this.roleuuid=e.roleuuid,this.roleAialog=!0},editUser:function(){var e=this,t=JSON.parse(JSON.stringify(this.row));t.roleuuid=this.roleuuid,Object(o["V"])(t).then((function(a){var s=a.status;0==s?(e.row.roleuuid=t.roleuuid,e.row.roleStr=e.getRoleStr(t.roleuuid),e.roleAialog=!1,e.$XModal.message({message:e.$t("tips.editSucc"),status:"success",zIndex:9999})):e.$XModal.message({message:e.$t("tips.editFail"),status:"error",zIndex:9999})}))},handleDelete:function(e){var t=this,a=e.rowIndex,s=e.row,l=[s.username];Object(o["I"])(l).then((function(e){var s=e.status,l=e.cause,i=e.count,o=e.bonuspoints,n=e.addvaluepoints,r=e.commission;if(0==s)t.$delete(t.tableList,a),t.$XModal.message({message:t.$t("tips.deleteSucc"),status:"success",zIndex:9999});else if(1==s)t.$XModal.message({message:t.$t("tips.accountAndDevice",{count:i}),status:"error",zIndex:9999});else if(2==s){var c="";o>0&&(c+=t.$t("bgManage.bonuspoints")+" "+o.toFixed(0)),n>0&&(c.length>0&&(c+=","),c+=t.$t("bgManage.addvaluepoints")+" "+Number(n.toFixed(2))),r>0&&(c.length>0&&(c+=","),c+=t.$t("bgManage.commission")+" "+Number(r.toFixed(2))),t.$XModal.message({message:t.$t("tips.accountAndGoldenBean",{str:c}),status:"error",zIndex:9999})}else t.$XModal.message({message:t.$t("tips.deleteFail")+l,status:"error",zIndex:9999})}))}}},w=$,y=(a("5feb"),Object(g["a"])(w,s,l,!1,null,null,null)),_=y.exports;t["default"]=_}}]);