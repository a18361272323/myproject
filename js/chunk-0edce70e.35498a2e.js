(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0edce70e"],{"02c9":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"replace-record full"},[t("div",{staticClass:"replace-record-header"},[t("div",{staticClass:"f_left",staticStyle:{width:"210px"}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.queryDevice"),showLabel:!1}},[t("el-input",{attrs:{"prefix-icon":"el-icon-search",clearable:"",placeholder:e.$t("bgManage.pleaseEnterSearchDeviceid")},model:{value:e.queryText,callback:function(t){e.queryText=t},expression:"queryText"}})],1)],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleClickQuery}},[e._v(e._s(e.$t("common.query")))])],1),t("div",{staticClass:"f_right",staticStyle:{"padding-top":"3px"}},[t("el-button",{staticStyle:{height:"28px"},attrs:{size:"mini",loading:e.exportLoading},on:{click:e.exportDataAll}},[e._v(e._s(e.$t("device.exportAllDevice")))])],1),t("div",{staticClass:"f_right",staticStyle:{"padding-top":"3px"}},[t("el-button",{staticStyle:{height:"28px"},attrs:{size:"mini",loading:e.exportLoading1},on:{click:e.exportData}},[e._v(e._s(e.$t("device.exportCurrentDevice")))])],1),t("div",{staticClass:"f_right"},[t("el-radio",{attrs:{label:"60"},model:{value:e.queryType,callback:function(t){e.queryType=t},expression:"queryType"}},[e._v(e._s(e.$t("device.daysReplaced60"))),"60"==e.queryType?t("span",[e._v("("+e._s(e.totalcount)+")")]):e._e()])],1),t("div",{staticClass:"f_right"},[t("el-radio",{attrs:{label:"7"},model:{value:e.queryType,callback:function(t){e.queryType=t},expression:"queryType"}},[e._v(e._s(e.$t("device.daysReplaced7"))),"7"==e.queryType?t("span",[e._v("("+e._s(e.totalcount)+")")]):e._e()])],1),t("div",{staticClass:"f_right",staticStyle:{width:"auto"}},[t("el-radio",{attrs:{label:"0"},model:{value:e.queryType,callback:function(t){e.queryType=t},expression:"queryType"}},[e._v(e._s(e.$t("device.allReplacedDevice"))),"0"==e.queryType?t("span",[e._v("("+e._s(e.totalcount)+")")]):e._e()])],1)]),t("div",{staticClass:"replace-record-content",staticStyle:{top:"39px"}},[t("vxe-table",{attrs:{"sort-config":e.sortConfig,border:"","auto-resize":"",resizable:"","show-overflow":"","highlight-current-row":"",size:"mini",height:"auto",data:e.tableList,"cell-style":e.cellStyle}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"replacer",width:"120",title:e.$t("bgManage.operator"),sortable:""}}),t("vxe-table-column",{attrs:{field:"devicename",title:e.$t("alarm.devName"),sortable:""}}),t("vxe-table-column",{attrs:{field:"olddeviceid",title:e.$t("bgManage.oilDeviceid"),sortable:""}}),t("vxe-table-column",{attrs:{field:"newdeviceid",title:e.$t("bgManage.newDeviceid"),sortable:""}}),t("vxe-table-column",{attrs:{field:"deviceType",title:e.$t("reportForm.deviceType"),width:"100",sortable:""}}),t("vxe-table-column",{attrs:{field:"replacetimeStr",title:e.$t("bgManage.replaceTime"),width:"160",sortable:""}}),t("vxe-table-column",{attrs:{title:e.$t("reportForm.creater"),field:"creater",width:"120",sortable:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[t("div",{staticClass:"parents-wrapper"},e._l(e.parentsList,(function(a){return t("div",{key:a.username},[e._v(e._s(a.username)+"("+e._s(a.usertypeStr)+")")])})),0),t("el-button",{staticStyle:{color:"#000000"},attrs:{slot:"reference",type:"text"},on:{click:function(t){return e.queryParents(a.row.creater)}},slot:"reference"},[e._v(e._s(a.row.creater))])],1)]}}])}),t("vxe-table-column",{attrs:{field:"groupName",title:e.$t("reportForm.groupName"),width:"100",sortable:""}})],1)],1),t("div",{staticStyle:{position:"absolute",left:"0px",right:"10px",bottom:"0px"}},[t("el-pagination",{attrs:{currentPage:e.currentPage,"current-page":e.currentChangePage,"page-sizes":[20,40,60,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalcount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},r=[],o=a("5530"),s=(a("14d9"),a("a9e3"),a("d3b7"),a("159b"),a("c276")),c=a("0139"),n=a("e285"),l=a("2f62"),u=a("5101"),d=a("6e52"),p=a("4c3c"),h=a("61fc"),v=a("e173"),g=a("7b49"),y={name:"ReplacedRecord",data:function(){return{editIcon:h,deleteIcon:v,moreIcon:g,loading:!1,exportLoading1:!1,editDialog:!1,recordsDialog:!1,oilMarkDiglog:!1,editDiglog:!1,weightDialog:!1,ioDialog:!1,queryText:"",queryType:"0",tableList:[],parentsList:[],totalcount:0,deviceid:"",deviceName:"",currentRow:{},pageSize:20,currentPage:1,exportLoading:!1}},mixins:[p["a"]],components:{LabelWrap:c["a"]},computed:Object(o["a"])({},Object(l["b"])(["deviceTypes","isQueryInitData"])),watch:{isQueryInitData:function(e){if(e){var t={count:this.pageSize,keyword:this.queryText,offset:0,all:!1,replaceddays:0};this.queryReplacedDevices(t)}},queryType:function(){this.totalcount=0;var e={count:this.pageSize,keyword:this.queryText,offset:0,all:!1,replaceddays:Number(this.queryType)};this.queryReplacedDevices(e)}},destroyed:function(){this.tableList=null},methods:Object(o["a"])(Object(o["a"])({},Object(l["c"])(["setIsReloadRootuser","setReportTagList"])),{},{queryParents:function(e){var t=this;this.parentsList=[],Object(n["Ab"])(e).then((function(e){var a=e.status,i=e.records;0==a&&(i.forEach((function(e){e.usertypeStr=Object(s["ab"])(t.isZh,e.usertype)})),t.parentsList=i)}))},cellStyle:function(e){var t=e.row,a=(e.rowIndex,e.column);e.columnIndex;if("actionStatus"===a.property){if(0==t.actionStatus||1==t.actionStatus||2==t.actionStatus)return{color:"green"};if(5==t.actionStatus)return{color:"red"}}},exportData:function(){var e=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("bgManage.oilDeviceid"),this.$t("bgManage.newDeviceid"),this.$t("reportForm.deviceType"),this.$t("bgManage.replaceTime"),this.$t("reportForm.creater"),this.$t("reportForm.groupName")]];if(0!=this.tableList.length){this.tableList.forEach((function(t,a){var i=[];i.push(++a),i.push(t.devicename),i.push(t.olddeviceid),i.push(t.newdeviceid),i.push(t.deviceType),i.push(t.replacetimeStr),i.push(t.creater),i.push(t.groupName),e.push(i)}));var t={title:this.$t("bgManage.replacedRecord"),data:e,dateRange:null};this.exportLoading1=!0,new ExcelCls(t).exportExcel(this)}},restoreRemovedDevices:function(e){var t=this,a=e.row,i={deviceids:[a.deviceid]};Object(n["gc"])(i).then((function(e){var i=e.devices;if(i){var r=i[0];a.actionStatus=r.status,0!=a.actionStatus&&1!=a.actionStatus&&2!=a.actionStatus||(t.setReportTagList([]),t.setIsReloadRootuser(!0))}}))},exportDataAll:function(){var e=this,t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("bgManage.oilDeviceid"),this.$t("bgManage.newDeviceid"),this.$t("reportForm.deviceType"),this.$t("bgManage.replaceTime"),this.$t("reportForm.creater"),this.$t("reportForm.groupName")]],a=this.deviceTypes,i=d["a"].deviceInfos;this.exportLoading=!0,Object(n["Jb"])({all:!0,keyword:""}).then((function(r){var o=r.devices;if(e.exportLoading=!1,o){o.forEach((function(e,r){var o=a[e.devicetype].typename;e.replacetimeStr=u["a"].longToLocalDateTimeStr(e.replacetime),e.deviceType=o,e.groupName=i[e.newdeviceid].groupname;var s=[];s.push(++r),s.push(e.devicename),s.push(e.olddeviceid),s.push(e.newdeviceid),s.push(e.deviceType),s.push(e.replacetimeStr),s.push(e.creater),s.push(e.groupName),t.push(s)}));var s={title:e.$t("bgManage.replacedRecord"),data:t,dateRange:null};new ExcelCls(s).exportExcel(e)}})).catch((function(t){console.log(t),e.exportLoading=!1}))},handleEdit:function(e){this.currentRow=e.row,this.deviceid=e.row.deviceid,this.deviceName=e.row.devicename,this.editDialog=!0},handleClickQuery:function(){var e={count:this.pageSize,keyword:this.queryText,offset:0,all:!1,replaceddays:Number(this.queryType)};this.queryReplacedDevices(e)},queryReplacedDevices:function(e){var t=this;this.loading=!0;var a=this.deviceTypes;Object(n["Jb"])(e).then((function(e){var i=e.devices,r=e.totalcount;t.totalcount=r,i.forEach((function(e){var t=a[e.devicetype].typename,i=d["a"].deviceInfos[e.newdeviceid];e.replacetimeStr=u["a"].longToLocalDateTimeStr(e.replacetime),e.deviceType=t,e.groupName=i?i.groupname:"-"})),t.tableList=i,t.loading=!1})).catch((function(e){t.loading=!1}))},currentChangePage:function(e){var t={count:this.pageSize,keyword:this.queryText,offset:e-1,all:!1,replaceddays:0};this.queryReplacedDevices(t)},handleSizeChange:function(e){this.pageSize=e,this.currentChangePage(this.currentPage)},handleCurrentChange:function(e){this.currentChangePage(e)}}),mounted:function(){if(this.isQueryInitData){var e={count:this.pageSize,keyword:this.queryText,offset:0,all:!1,replaceddays:0};this.queryReplacedDevices(e)}}},f=y,m=(a("b23d"),a("2877")),b=Object(m["a"])(f,i,r,!1,null,null,null),x=b.exports;t["default"]=x},"3e44":function(e,t,a){},"4c3c":function(e,t,a){"use strict";a("4e82");t["a"]={data:function(){return{sortConfig:{sortMethod:function(e){var t=e.data,a=e.sortList,i=a[0],r=i.property,o=i.order,s=[];return s="desc"===o?t.sort((function(e,t){var a=e[r],i=t[r];if(isNaN(a)&&!isNaN(Date.parse(a))&&isNaN(i)&&!isNaN(Date.parse(i)))return Date.parse(i)-Date.parse(a);if(a=parseFloat(a),i=parseFloat(i),isNaN(a)||isNaN(i)){var o=t[r]+"";return o.localeCompare(e[r])}return i-a})):"asc"===o?t.sort((function(e,t){var a=e[r],i=t[r];if(isNaN(a)&&!isNaN(Date.parse(a))&&isNaN(i)&&!isNaN(Date.parse(i)))return Date.parse(a)-Date.parse(i);if(a=parseFloat(e[r]),i=parseFloat(t[r]),isNaN(a)||isNaN(i)){var o=e[r]+"";return o.localeCompare(t[r])}return a-i})):t.sort(),s}}}}}},b23d:function(e,t,a){"use strict";a("3e44")}}]);