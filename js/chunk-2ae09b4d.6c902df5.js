(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ae09b4d"],{"0f09":function(t,e,i){},"12e6":function(t,e,i){"use strict";i("0f09")},"869d":function(t,e,i){"use strict";i.r(e);i("498a");var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"refuel-ticket full"},[e("OilMarkingHeader",{on:{queryRefuelTicket:t.queryRefuelTicket,queryDayRecords:t.queryDayRecords,clearData:t.handleClearData}}),e("div",{staticClass:"refuel-ticket-inner"},[e("split-pane",{style:{height:"100%"},attrs:{direction:"vertical",showBtn:!1,min:25,max:65},on:{"on-resizing-end":t.onResizingEnd},model:{value:t.triggerOffsetV,callback:function(e){t.triggerOffsetV=e},expression:"triggerOffsetV"}},[e("div",{staticStyle:{height:"100%"},attrs:{slot:"top"},slot:"top"},[e("div",{staticClass:"refuel-ticket-inner-echarts"},[e("OilMarkingEcharts",{ref:"echartIns",attrs:{oilType:t.tank,isMarking:!1,srcadSelectState:t.srcadSelectState},on:{onClickMarkPoint:t.onClickMarkPoint}})],1)]),e("div",{staticStyle:{height:"100%"},attrs:{slot:"bottom"},slot:"bottom"},[e("div",{staticClass:"refuel-ticket-inner-table"},[e("div",{staticClass:"refuel-ticket-inner-table-header"},[e("div",{staticClass:"f_left",staticStyle:{width:"120px"}},[e("LabelWrap",{attrs:{label:t.$t("reportForm.selectTabk")}},[e("el-select",{model:{value:t.tank,callback:function(e){t.tank=e},expression:"tank"}},[e("el-option",{attrs:{label:t.$t("device.tank1"),value:1}}),e("el-option",{attrs:{label:t.$t("device.tank2"),value:2}}),e("el-option",{attrs:{label:t.$t("device.tank3"),value:3}}),e("el-option",{attrs:{label:t.$t("device.tank4"),value:4}})],1)],1)],1),e("div",{staticClass:"f_left"},[e("el-tooltip",{attrs:{placement:"top"}},[e("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.$t("tips.thresholdTip1"))+" "),e("br"),t._v(" "+t._s(t.$t("tips.thresholdTip2"))+" "),e("br"),t._v(" "+t._s(t.$t("tips.thresholdTip3"))+" "),e("br")]),e("div",{staticStyle:{cursor:"pointer","padding-top":"5px"}},[e("i",{staticClass:"el-icon-info",staticStyle:{color:"#FF9900","font-size":"18px"}})])])],1),e("div",{staticClass:"f_left",staticStyle:{width:"140px"}},[e("LabelWrap",{attrs:{label:t.$t("reportForm.threshold")}},[1==t.tank?e("el-input",{model:{value:t.threshold1,callback:function(e){t.threshold1="string"===typeof e?e.trim():e},expression:"threshold1"}}):t._e(),2==t.tank?e("el-input",{model:{value:t.threshold2,callback:function(e){t.threshold2="string"===typeof e?e.trim():e},expression:"threshold2"}}):t._e(),3==t.tank?e("el-input",{model:{value:t.threshold3,callback:function(e){t.threshold3="string"===typeof e?e.trim():e},expression:"threshold3"}}):t._e(),4==t.tank?e("el-input",{model:{value:t.threshold4,callback:function(e){t.threshold4="string"===typeof e?e.trim():e},expression:"threshold4"}}):t._e()],1)],1),e("div",{staticClass:"f_left",staticStyle:{width:"90px",display:"none"}},[e("LabelWrap",{attrs:{label:t.$t("bgManage.blindVolume")}},[1==t.tank?e("el-input",{model:{value:t.blindVolume1,callback:function(e){t.blindVolume1=t._n(e)},expression:"blindVolume1"}}):t._e(),2==t.tank?e("el-input",{model:{value:t.blindVolume2,callback:function(e){t.blindVolume2=t._n(e)},expression:"blindVolume2"}}):t._e(),3==t.tank?e("el-input",{model:{value:t.blindVolume3,callback:function(e){t.blindVolume3=t._n(e)},expression:"blindVolume3"}}):t._e(),4==t.tank?e("el-input",{model:{value:t.blindVolume4,callback:function(e){t.blindVolume4=t._n(e)},expression:"blindVolume4"}}):t._e()],1)],1),e("div",{staticClass:"f_left",staticStyle:{width:"150px"}},[e("LabelWrap",{attrs:{label:t.$t("bgManage.startAd")}},[e("el-input",{attrs:{clearable:""},on:{focus:function(e){t.srcadSelectState=1}},model:{value:t.startAd,callback:function(e){t.startAd=t._n("string"===typeof e?e.trim():e)},expression:"startAd"}})],1)],1),e("div",{staticClass:"f_left",staticStyle:{width:"150px"}},[e("LabelWrap",{attrs:{label:t.$t("bgManage.endAd")}},[e("el-input",{attrs:{clearable:""},on:{focus:function(e){t.srcadSelectState=2}},model:{value:t.endAd,callback:function(e){t.endAd=t._n("string"===typeof e?e.trim():e)},expression:"endAd"}})],1)],1),e("div",{staticClass:"f_left",staticStyle:{width:"120px"}},[e("LabelWrap",{attrs:{label:t.$t("reportForm.oil")}},[e("el-input",{attrs:{clearable:""},model:{value:t.ticketvolume,callback:function(e){t.ticketvolume="string"===typeof e?e.trim():e},expression:"ticketvolume"}})],1)],1),e("div",{staticClass:"f_left"},[e("el-button",{staticStyle:{height:"34px"},attrs:{type:"primary"},on:{click:t.addRefuelTicket}},[t._v(t._s(t.$t("common.add")))])],1),e("div",{staticClass:"f_right"},[e("el-button",{staticStyle:{height:"34px"},attrs:{type:"primary",loading:t.loading},on:{click:t.previewOilDetectors}},[t._v(t._s(t.$t("bgManage.afterPreview")))])],1)]),e("div",{staticClass:"refuel-ticket-inner-table-body"},[e("el-row",{staticStyle:{height:"100%"},attrs:{gutter:10}},[e("el-col",{staticStyle:{height:"100%"},attrs:{span:16}},[e("div",{staticClass:"refuel-ticket-inner-table-body-wrap"},[e("div",{staticClass:"refuel-ticket-inner-table-body-wrap-title"},[e("span"),t._v(" "+t._s(t.$t("bgManage.refuelingTicketList"))+"("+t._s(t.refuelRecordsLength)+") ")]),e("div",{staticClass:"refuel-ticket-inner-table-body-wrap-content"},[1==t.tank?e("vxe-table",{ref:"ticketTable1",attrs:{"auto-resize":"",border:"",resizable:"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.refuelRecords1}},[e("vxe-table-column",{attrs:{title:"#",width:"42"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"padding-left":"3px"}},[e("el-checkbox",{attrs:{checked:i.row.checked},on:{change:function(e){return t.onCheckedChange(i.row)}}})],1)]}}],null,!1,730462210)}),e("vxe-table-column",{attrs:{type:"seq",width:"55",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"time",title:t.$t("reportForm.time"),width:"150"}}),e("vxe-table-column",{attrs:{field:"startad",title:t.$t("bgManage.startAd")}}),e("vxe-table-column",{attrs:{field:"endad",title:t.$t("bgManage.endAd")}}),e("vxe-table-column",{attrs:{field:"ticketvolume",title:t.$t("reportForm.oil")+"(L)"}}),e("vxe-table-column",{attrs:{field:"gradient",title:t.$t("bgManage.changeRate")}}),e("vxe-table-column",{attrs:{width:"60",title:t.$t("reportForm.action")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-info","confirm-button-text":t.$t("common.confirm"),"cancel-button-text":t.$t("common.cancel"),"icon-color":"red",title:"确定删除吗？"},on:{confirm:function(e){return t.handleDelete(i)}}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[e("img",{staticStyle:{width:"18px",cursor:"pointer","margin-top":"9px"},attrs:{src:t.deleteIcon}})])])]}}],null,!1,4239900422)})],1):t._e(),2==t.tank?e("vxe-table",{attrs:{"auto-resize":"",border:"",resizable:"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.refuelRecords2}},[e("vxe-table-column",{attrs:{title:"#",width:"42"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"padding-left":"3px"}},[e("el-checkbox",{attrs:{checked:i.row.checked},on:{change:function(e){return t.onCheckedChange(i.row)}}})],1)]}}],null,!1,730462210)}),e("vxe-table-column",{attrs:{type:"seq",width:"55",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"time",title:t.$t("reportForm.time"),width:"150"}}),e("vxe-table-column",{attrs:{field:"startad",title:t.$t("bgManage.startAd")}}),e("vxe-table-column",{attrs:{field:"endad",title:t.$t("bgManage.endAd")}}),e("vxe-table-column",{attrs:{field:"ticketvolume",title:t.$t("reportForm.oil")+"(L)"}}),e("vxe-table-column",{attrs:{field:"gradient",title:t.$t("bgManage.changeRate")}}),e("vxe-table-column",{attrs:{width:"60",title:t.$t("reportForm.action")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-info","icon-color":"red","confirm-button-text":t.$t("common.confirm"),"cancel-button-text":t.$t("common.cancel"),title:"确定删除吗？"},on:{confirm:function(e){return t.handleDelete(i)}}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[e("img",{staticStyle:{width:"18px",cursor:"pointer","margin-top":"9px"},attrs:{src:t.deleteIcon}})])])]}}],null,!1,2611500038)})],1):t._e(),3==t.tank?e("vxe-table",{attrs:{"auto-resize":"",border:"",resizable:"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.refuelRecords3}},[e("vxe-table-column",{attrs:{title:"#",width:"42"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"padding-left":"3px"}},[e("el-checkbox",{attrs:{checked:i.row.checked},on:{change:function(e){return t.onCheckedChange(i.row)}}})],1)]}}],null,!1,730462210)}),e("vxe-table-column",{attrs:{type:"seq",width:"55",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"time",title:t.$t("reportForm.time"),width:"150"}}),e("vxe-table-column",{attrs:{field:"startad",title:t.$t("bgManage.startAd")}}),e("vxe-table-column",{attrs:{field:"endad",title:t.$t("bgManage.endAd")}}),e("vxe-table-column",{attrs:{field:"ticketvolume",title:t.$t("reportForm.oil")+"(L)"}}),e("vxe-table-column",{attrs:{field:"gradient",title:t.$t("bgManage.changeRate")}}),e("vxe-table-column",{attrs:{width:"60",title:t.$t("reportForm.action")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-info","icon-color":"red","confirm-button-text":t.$t("common.confirm"),"cancel-button-text":t.$t("common.cancel"),title:"确定删除吗？"},on:{confirm:function(e){return t.handleDelete(i)}}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[e("img",{staticStyle:{width:"18px",cursor:"pointer","margin-top":"9px"},attrs:{src:t.deleteIcon}})])])]}}],null,!1,2611500038)})],1):t._e(),4==t.tank?e("vxe-table",{attrs:{"auto-resize":"",border:"",resizable:"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.refuelRecords4}},[e("vxe-table-column",{attrs:{title:"#",width:"42"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"padding-left":"3px"}},[e("el-checkbox",{attrs:{checked:i.row.checked},on:{change:function(e){return t.onCheckedChange(i.row)}}})],1)]}}],null,!1,730462210)}),e("vxe-table-column",{attrs:{type:"seq",width:"55",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"time",title:t.$t("reportForm.time"),width:"150"}}),e("vxe-table-column",{attrs:{field:"startad",title:t.$t("bgManage.startAd")}}),e("vxe-table-column",{attrs:{field:"endad",title:t.$t("bgManage.endAd")}}),e("vxe-table-column",{attrs:{field:"ticketvolume",title:t.$t("reportForm.oil")+"(L)"}}),e("vxe-table-column",{attrs:{field:"gradient",title:t.$t("bgManage.changeRate")}}),e("vxe-table-column",{attrs:{width:"60",title:t.$t("reportForm.action")},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-info","icon-color":"red","confirm-button-text":t.$t("common.confirm"),"cancel-button-text":t.$t("common.cancel"),title:"确定删除吗？"},on:{confirm:function(e){return t.handleDelete(i)}}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[e("img",{staticStyle:{width:"18px",cursor:"pointer","margin-top":"9px"},attrs:{src:t.deleteIcon}})])])]}}],null,!1,2611500038)})],1):t._e()],1)])]),e("el-col",{staticStyle:{height:"100%"},attrs:{span:8}},[e("div",{staticClass:"refuel-ticket-inner-table-body-wrap"},[e("div",{staticClass:"refuel-ticket-inner-table-body-wrap-title"},[e("span"),t._v(" "+t._s(t.$t("bgManage.markResult"))+"("+t._s(t.newMarkingListLength)+") ")]),e("div",{staticClass:"refuel-ticket-inner-table-body-wrap-content"},[1==t.tank?e("vxe-table",{ref:"xTab1",attrs:{"auto-resize":"",border:"",resizable:"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.newMarkingList1}},[e("vxe-table-column",{attrs:{type:"seq",width:"55",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"height",title:t.$t("bgManage.srcad")}}),e("vxe-table-column",{attrs:{field:"volume",title:t.$t("reportForm.oil")}})],1):t._e(),2==t.tank?e("vxe-table",{ref:"xTab2",attrs:{"auto-resize":"",border:"",resizable:"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.newMarkingList2}},[e("vxe-table-column",{attrs:{type:"seq",width:"55",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"height",title:t.$t("bgManage.srcad")}}),e("vxe-table-column",{attrs:{field:"volume",title:t.$t("reportForm.oil")}})],1):t._e(),3==t.tank?e("vxe-table",{ref:"xTab3",attrs:{"auto-resize":"",border:"",resizable:"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.newMarkingList3}},[e("vxe-table-column",{attrs:{type:"seq",width:"55",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"height",title:t.$t("bgManage.srcad")}}),e("vxe-table-column",{attrs:{field:"volume",title:t.$t("reportForm.oil")}})],1):t._e(),4==t.tank?e("vxe-table",{ref:"xTab4",attrs:{"auto-resize":"",border:"",resizable:"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.newMarkingList4}},[e("vxe-table-column",{attrs:{type:"seq",width:"55",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"height",title:t.$t("bgManage.srcad")}}),e("vxe-table-column",{attrs:{field:"volume",title:t.$t("reportForm.oil")}})],1):t._e()],1)])])],1)],1),e("div",{staticClass:"refuel-ticket-inner-table-btn"},[e("div",{staticClass:"refuel-ticket-inner-table-btn-checkbox"},[e("div",{staticStyle:{height:"29px","line-height":"30px"}},[e("el-checkbox",{model:{value:t.travelOil,callback:function(e){t.travelOil=e},expression:"travelOil"}},[t._v(t._s(t.$t("bgManage.mergeStatistical")))]),e("el-checkbox",{model:{value:t.noTravelOil,callback:function(e){t.noTravelOil=e},expression:"noTravelOil"}},[t._v(t._s(t.$t("bgManage.notRunOilMergeStatistical")))])],1)]),e("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-info","icon-color":"red","confirm-button-text":t.$t("common.confirm"),"cancel-button-text":t.$t("common.cancel"),title:t.$t("tips.overlayMarker")},on:{confirm:t.saveOilDetectors}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[e("el-button",{attrs:{type:"primary"}},[t._v(t._s(t.$t("bgManage.saveCurrentMark")))])],1)]),e("div",{staticClass:"oil-marking-inner-btn-wrap-btns"},[1==t.tank?e("a",{on:{click:function(e){return t.editMarkerStr(t.markerStr1)}}},[t._v(t._s(t.markerStr1))]):t._e(),1==t.tank&&null==t.markerStr1?e("a",{on:{click:function(e){return t.editMarkerStr("")}}},[t._v(t._s(t.$t("device.remarkInfo")))]):t._e(),2==t.tank?e("a",{on:{click:function(e){return t.editMarkerStr(t.markerStr2)}}},[t._v(t._s(t.markerStr2))]):t._e(),2==t.tank&&null==t.markerStr2?e("a",{on:{click:function(e){return t.editMarkerStr("")}}},[t._v(t._s(t.$t("device.remarkInfo")))]):t._e(),3==t.tank?e("a",{on:{click:function(e){return t.editMarkerStr(t.markerStr3)}}},[t._v(t._s(t.markerStr3))]):t._e(),3==t.tank&&null==t.markerStr3?e("a",{on:{click:function(e){return t.editMarkerStr("")}}},[t._v(t._s(t.$t("device.remarkInfo")))]):t._e(),4==t.tank?e("a",{on:{click:function(e){return t.editMarkerStr(t.markerStr4)}}},[t._v(t._s(t.markerStr4))]):t._e(),4==t.tank&&null==t.markerStr4?e("a",{on:{click:function(e){return t.editMarkerStr("")}}},[t._v(t._s(t.$t("device.remarkInfo")))]):t._e()])],1),e("el-dialog",{attrs:{title:t.$t("reportForm.tank")+t.tank+"-"+t.$t("device.remarkInfo"),center:"",visible:t.markerDialog,width:"320px","append-to-body":"","close-on-click-modal":!1},on:{close:function(e){t.markerDialog=!1}}},[e("div",{staticClass:"margin_b10"},[e("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",rows:6,placeholder:t.$t("device.fuelRemarkTip"),clearable:""},model:{value:t.markerStr,callback:function(e){t.markerStr=e},expression:"markerStr"}})],1),e("div",{staticClass:"margin_b10",staticStyle:{"text-align":"center","padding-top":"10px"}},[e("el-button",{staticStyle:{width:"200px"},attrs:{type:"primary"},on:{click:t.onEditMarkerStr}},[t._v(t._s(t.$t("common.confirm")))])],1)]),e("OilRecordDialog",{ref:"oilRecord",on:{onSucc:t.onEditOilRecordSucc,onDelete:t.onDeleteOilRecord},model:{value:t.oilRecordDialog,callback:function(e){t.oilRecordDialog=e},expression:"oilRecordDialog"}})],1)])])],1)],1)},a=[],l=(i("99af"),i("14d9"),i("4e82"),i("b0c0"),i("e9c4"),i("a9e3"),i("b680"),i("b64b"),i("d3b7"),i("159b"),i("4795"),i("1078")),n=i("8871"),o=i("550c"),s=i("4258"),c=i("201d"),d=i("1c31"),h=i("e285"),u=i("5101"),m=i("c276"),f=i("e173"),g={name:"MarkingRefuelTicket",data:function(){return{deleteIcon:f,tank:1,deviceid:"",triggerOffsetV:50,loading:!1,travelOil:!1,noTravelOil:!1,markerDialog:!1,oilRecordDialog:!1,markerStr:"",markerStr1:"",markerStr2:"",markerStr3:"",markerStr4:"",threshold1:"",threshold2:"",threshold3:"",threshold4:"",blindVolume1:"",blindVolume2:"",blindVolume3:"",blindVolume4:"",startAd:"",endAd:"",ticketvolume:"",refuelRecords1:[],refuelRecords2:[],refuelRecords3:[],refuelRecords4:[],newMarkingList1:[],newMarkingList2:[],newMarkingList3:[],newMarkingList4:[],srcadSelectState:1}},components:{OilMarkingHeader:n["a"],OilMarkingEcharts:o["a"],OilRecordDialog:s["a"],LabelWrap:c["a"],SplitPane:l["a"]},computed:{refuelRecordsLength:function(){var t=this.tank;return 1==t?this.refuelRecords1.length:2==t?this.refuelRecords2.length:3==t?this.refuelRecords3.length:4==t?this.refuelRecords4.length:void 0},newMarkingListLength:function(){var t=this.tank;return 1==t?this.newMarkingList1.length:2==t?this.newMarkingList2.length:3==t?this.newMarkingList3.length:4==t?this.newMarkingList4.length:void 0}},methods:{onResizingEnd:function(){var t=this;setTimeout((function(){t.$refs.echartIns.resize()}),300)},onEditOilRecordSucc:function(){this.$refs.echartIns.updatePrevChartsOption(this.dateStr,this.oilRecords,this.trackRecords)},onDeleteOilRecord:function(t){var e=t.oilrecordid,i=[];this.oilRecords.forEach((function(t){t.oilrecordid!=e&&i.push(t)})),this.oilRecords=i,this.$refs.echartIns.updatePrevChartsOption(this.dateStr,this.oilRecords,this.trackRecords)},onClickMarkPoint:function(t){var e=this,i=t.type,r=t.oilRecord;if("prev"==i)r.dateStr=u["a"].longToLocalDateTimeStr(r.endtime),this.$refs.oilRecord.setOilRecordInfo(r),this.oilRecordDialog=!0;else{var a=null,l=null;1==r.oilstate?(a=!0,l=Number((Math.abs(r.eoil-r.soil)/100).toFixed(2))):-1==r.oilstate&&(a=!1,l=Number((Math.abs(r.eoil-r.soil)/100).toFixed(2)));var n='\n                     <div style="text-align:left;">'.concat(a?this.$t("reportForm.refuel"):this.$t("reportForm.leak"),":").concat(l,'L</div>\n                     <div style="text-align:left;">').concat(this.$t("reportForm.duration"),":").concat(Object(m["Hb"])(r.duration),'</div>\n                     <div style="text-align:left;">').concat(this.$t("reportForm.startTime"),":").concat(u["a"].longToLocalDateTimeStr(r.begintime),'</div>\n                     <div style="text-align:left;">').concat(this.$t("reportForm.endTime"),":").concat(u["a"].longToLocalDateTimeStr(r.endtime),'</div>\n                     <div style="text-align:left;">').concat(this.$t("reportForm.threshold"),":").concat(r.threshold,'L</div>\n                     <div style="text-align:left;">').concat(this.$t("reportForm.distance"),":").concat(r.distance/1e3,'km</div> \n                     <div style="text-align:left;">').concat(this.$t("reportForm.avgSpeed"),":").concat(r.avgspeed.toFixed(0),'km/h</div>\n                     <div style="text-align:left;">').concat(this.$t("missing.zerospeedcount"),":").concat(r.zerospeedcount,"</div>\n                ");this.$confirm(n,{title:a?this.$t("missing.refuelingRecord"):this.$t("missing.leakageRecord"),dangerouslyUseHTMLString:!0,distinguishCancelAndClose:!0,showConfirmButton:!0,showCancelButton:!0,cancelButtonText:this.$t("reportForm.newAdd"),cancelButtonClass:"add-oil-record-btn",center:!0,customClass:"MessageBox_confirm_oilrecord"}).then((function(t){}),(function(t){if("cancel"==t){var i={deviceid:r.deviceid,soil:r.soil,eoil:r.eoil,begintime:r.begintime,endtime:r.endtime,oilstate:r.oilstate,oilindex:r.oilindex,maunedit:r.maunedit};Object(d["a"])(i).then((function(t){var i=t.status,r=t.cause;0==i?e.$XModal.message({message:e.$t("tips.addSucc"),status:"success",zIndex:9999}):e.$XModal.message({message:e.$t("tips.addFail")+" : "+r,status:"error",zIndex:9999})}))}})).catch((function(t){}))}},handleClearData:function(t){this.deviceid=t,this.travelOil=!1,this.noTravelOil=!1,this.oilDetectors=[],this.threshold1="",this.blindVolume1="",this.newMarkingList1=[],this.markerStr1="",this.threshold2="",this.blindVolume2="",this.newMarkingList2=[],this.markerStr2="",this.threshold3="",this.blindVolume3="",this.newMarkingList3=[],this.markerStr3="",this.threshold4="",this.blindVolume4="",this.newMarkingList4=[],this.markerStr4="",this.oldMarkingList=[],this.$refs.echartIns&&this.$refs.echartIns.updatePrevChartsOption("",[],[]),this.$refs.echartIns&&this.$refs.echartIns.updateNextChartsOption("",[],[])},editMarkerStr:function(t){this.deviceid&&(this.markerStr=t,this.markerDialog=!0)},onEditMarkerStr:function(){var t=this,e=this.tank,i=this.markerStr,r=this.oilDetectors,a={deviceid:this.deviceid,oilindex:e,name:i};Object(h["hc"])(a).then((function(a){var l=a.status;0==l?(1==e?t.markerStr1=i:2==e?t.markerStr2=i:3==e?t.markerStr3=i:4==e&&(t.markerStr4=i),r.forEach((function(t,r){r+=1,(r==e||r==e||r==e||r==e)&&(t.name=i)})),t.$XModal.message({message:t.$t("tips.saveSucc"),status:"success",zIndex:9999}),t.markerDialog=!1):t.$XModal.message({message:t.$t("tips.saveFail"),status:"error",zIndex:9999})}))},saveOilDetectors:function(){var t=this,e=this.deviceid;if(""!=e){var i=JSON.parse(JSON.stringify(this.oilDetectors));i.forEach((function(e,i){0==i?(e.threshold=t.threshold1,e.blindvolume=t.blindVolume1,e.markers=t.newMarkingList1,t.newMarkingList1.length>0&&(e.appearance=4)):1==i?(e.threshold=t.threshold2,e.blindvolume=t.blindVolume2,e.markers=t.newMarkingList2,t.newMarkingList2.length>0&&(e.appearance=4)):2==i?(e.threshold=t.threshold3,e.blindvolume=t.blindVolume3,e.markers=t.newMarkingList3,t.newMarkingList3.length>0&&(e.appearance=4)):3==i&&(e.threshold=t.threshold4,e.blindvolume=t.blindVolume4,e.markers=t.newMarkingList4,t.newMarkingList4.length>0&&(e.appearance=4))}));var r={deviceid:e,oildetectors:i,combinestatus:this.getCombinestatus()};Object(h["jc"])(r).then((function(e){var i=e.status,r=e.oildetectors;0==i?(t.oilDetectors=r,t.$XModal.message({message:t.$t("tips.saveSucc"),status:"success"})):t.$XModal.message({message:t.$t("tips.saveFail"),status:"error"})}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error"})},previewOilDetectors:function(){var t=this,e=this.deviceid,i=this.dateStr;if(""!=e)if(i){var r=JSON.parse(JSON.stringify(this.oilDetectors));r.forEach((function(e,i){0==i?(e.threshold=t.threshold1,e.blindvolume=t.blindVolume1,e.markers=t.newMarkingList1,t.newMarkingList1.length>0&&(e.appearance=4)):1==i?(e.threshold=t.threshold2,e.blindvolume=t.blindVolume2,e.markers=t.newMarkingList2,t.newMarkingList2.length>0&&(e.appearance=4)):2==i?(e.threshold=t.threshold3,e.blindvolume=t.blindVolume3,e.markers=t.newMarkingList3,t.newMarkingList3.length>0&&(e.appearance=4)):3==i&&(e.threshold=t.threshold4,e.blindvolume=t.blindVolume4,e.markers=t.newMarkingList4,t.newMarkingList4.length>0&&(e.appearance=4))}));var a={deviceid:e,startday:i,endday:i,combinestatus:this.getCombinestatus(),offset:u["a"].getOffset(),oildetectors:r};this.loading=!0,Object(h["cb"])(a).then((function(r){if(r.records&&r.records[0]){var a=r.records[0].records,l=r.records[0].addorleakrecords;a&&(a.sort((function(t,e){return t.updatetime-e.updatetime})),a.forEach((function(t,e){t.index=e;var i=t.totalad,r=t.totalnotrunningad,a=t.ad0,l=t.ad1,n=t.ad2,o=t.ad3;a<0&&(a=0),l<0&&(l=0),n<0&&(n=0),o<0&&(o=0),t.totalad=i/100,t.totalnotrunningad=r/100,t.ad0=a/100,t.ad1=l/100,t.ad2=n/100,t.ad3=o/100}))),l.forEach((function(t){t.deviceid=e})),t.$refs.echartIns.updateNextChartsOption(i,l,a)}else t.$refs.echartIns.updateNextChartsOption(i,[],[]);t.loading=!1})).catch((function(e){t.loading=!1}))}else this.$XModal.message({message:this.$t("common.selectTime"),status:"error"});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error"})},onCheckedChange:function(t){var e=this,i=0==t.used?1:0;t.used=i,t.checked=1==i;var r=this.getRefuelTicketData();r.refuelticketuuid=t.refuelticketuuid,r.used=t.used,r.deviceid=t.deviceid,Object(h["pc"])(r).then((function(t){var i=t.status,r=t.oildetectors,a=t.records;if(0==i&&r){var l=r.oildetectors,n=r.combinestatus;e.travelOil=1==(1&n),e.noTravelOil=1==(1&n),e.oilDetectors=l,e.setTableData(a||[])}}))},getRefuelTicketData:function(){var t=this.tank,e={oilindex:t,combinestatus:this.getCombinestatus()},i=0,r=0;return 1==t?(i=this.threshold1,r=this.blindVolume1):2==t?(i=this.threshold2,r=this.blindVolume2):3==t?(i=this.threshold3,r=this.blindVolume3):4==t&&(i=this.threshold4,r=this.blindVolume4),e.threshold=i,e.blindvolume=r,e},getCombinestatus:function(){var t=0;return this.travelOil&&(t|=1),this.noTravelOil&&(t|=2),t},addRefuelTicket:function(){var t=this,e=this.deviceid,i=this.startAd,r=this.endAd,a=this.ticketvolume;if(""!=e)if(""!=i)if(""!=r)if(""==a||a<0)this.$XModal.message({message:"请填写加油量",status:"error"});else{var l=this.getRefuelTicketData();l.deviceid=e,l.startad=i,l.endad=r,l.ticketvolume=a,l.starttime=164894269e4,l.endtime=164894836e4,Object(h["f"])(l).then((function(e){var i=e.status,r=e.oildetectors,a=e.records;if(0==i&&(t.startAd="",t.endAd="",t.ticketvolume="",r)){var l=r.oildetectors,n=r.combinestatus;t.travelOil=1==(1&n),t.noTravelOil=1==(1&n),t.oilDetectors=l,t.setTableData(a||[])}}))}else this.$XModal.message({message:"请填写结束拟量",status:"error"});else this.$XModal.message({message:"请填写开始模拟量",status:"error"});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error"})},queryRefuelTicket:function(t){var e=this;this.dateStr="",this.refuelRecords1=[],this.refuelRecords2=[],this.refuelRecords3=[],this.refuelRecords4=[],Object(h["Gb"])(t).then((function(t){var i=t.oildetectors,r=t.records;if(i){var a=i.oildetectors,l=i.combinestatus;e.travelOil=1==(1&l),e.noTravelOil=1==(1&l),e.oilDetectors=a,e.setTableData(r||[])}e.$refs.echartIns.updatePrevChartsOption("",[],[]),e.$refs.echartIns.updateNextChartsOption("",[],[])})).catch((function(t){console.log(t)}))},setTableData:function(t){var e=this;this.oilDetectors.forEach((function(t,i){null==t.markers&&(t.markers=[]),0==i?(e.threshold1=t.threshold,e.blindVolume1=t.blindvolume,e.markerStr1=t.name,e.newMarkingList1=JSON.parse(JSON.stringify(t.markers))):1==i?(e.threshold2=t.threshold,e.blindVolume2=t.blindvolume,e.markerStr2=t.name,e.newMarkingList2=JSON.parse(JSON.stringify(t.markers))):2==i?(e.threshold3=t.threshold,e.blindVolume3=t.blindvolume,e.markerStr3=t.name,e.newMarkingList3=JSON.parse(JSON.stringify(t.markers))):3==i&&(e.threshold4=t.threshold,e.blindVolume4=t.blindvolume,e.markerStr4=t.name,e.newMarkingList4=JSON.parse(JSON.stringify(t.markers)))})),t.forEach((function(t,i){t.forEach((function(t){t.checked=1==t.used,t.time=u["a"].longToLocalDateTimeStr(t.updatetime)})),0==i?e.refuelRecords1=t:1==i?e.refuelRecords2=t:2==i?e.refuelRecords3=t:3==i&&(e.refuelRecords4=t)}))},queryDayRecords:function(t){var e=t.oilRecords,i=t.trackRecords,r=t.dateStr;this.dateStr=r,this.oilRecords=e,this.trackRecords=i,i.forEach((function(t,e){t.index=e;var i=t.totalad,r=t.totalnotrunningad,a=t.ad0,l=t.ad1,n=t.ad2,o=t.ad3;a<0&&(a=0),l<0&&(l=0),n<0&&(n=0),o<0&&(o=0),t.totalad=i/100,t.totalnotrunningad=r/100,t.ad0=a/100,t.ad1=l/100,t.ad2=n/100,t.ad3=o/100})),this.$refs.echartIns.updatePrevChartsOption(r,e,i),this.$refs.echartIns.updateNextChartsOption(r,[],[])},handleDelete:function(t){var e=this,i=t.rowIndex,r=this.getNewMarkingList(),a=r[i],l=this.tank;a&&(1==l?(a.combinestatus=this.getCombinestatus(),a.threshold=this.threshold1,a.blindvolume=this.blindVolume1):2==l?(a.combinestatus=this.getCombinestatus(),a.threshold=this.threshold2,a.blindvolume=this.blindVolume2):3==l?(a.combinestatus=this.getCombinestatus(),a.threshold=this.threshold3,a.blindvolume=this.blindVolume3):4==l&&(a.combinestatus=this.getCombinestatus(),a.threshold=this.threshold4,a.blindvolume=this.blindVolume4),Object(h["y"])(a).then((function(t){var a=t.status,l=t.oildetectors,n=t.records;if(0==a&&(e.$delete(r,i),l)){var o=l.oildetectors,s=l.combinestatus;e.travelOil=1==(1&s),e.noTravelOil=1==(1&s),e.oilDetectors=o,console.log("handleDelete",o),e.setTableData(n||[])}}))),console.log(a)},getNewMarkingList:function(){var t=this.tank,e=[];return 1==t?e=this.refuelRecords1:2==t?e=this.refuelRecords2:3==t?e=this.refuelRecords3:4==t&&(e=this.refuelRecords4),e}},mounted:function(){this.oilDetectors=[]}},b=g,v=(i("12e6"),i("2877")),p=Object(v["a"])(b,r,a,!1,null,null,null),k=p.exports;e["default"]=k}}]);