(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-907d2590"],{"26c6":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"multi-choice single-choice-vehicle",style:{width:e.width}},[e.showLabel?t("div",{staticClass:"multi-choice-label"},[e._v(" "+e._s(e.$t("common.selectDevice"))+" ")]):e._e(),t("div",{staticClass:"multi-choice-input"},[t("ZtreeDeviceDropdown",{attrs:{placeholder:e.placeholder,disableShare:e.disableShare,isQueryInitData:e.isQueryInitData},model:{value:e.deviceid,callback:function(t){e.deviceid=t},expression:"deviceid"}})],1)])},n=[],a=i("5530"),o=i("2f62"),r=i("2df7"),c={props:{value:{type:String,default:""},width:{type:String,default:"230px"},showLabel:{type:Boolean,default:!1},disableShare:{type:Boolean,default:!1},placeholder:{type:String,default:""}},name:"SingleChoiceVehicle",data:function(){return{deviceid:""}},watch:{value:function(e){e&&(this.deviceid=e)},deviceid:function(e){this.$emit("input",e)}},computed:Object(a["a"])({},Object(o["b"])(["isQueryInitData"])),components:{ZtreeDeviceDropdown:r["a"]},methods:{},mounted:function(){this.value&&(this.deviceid=this.value)}},l=c,h=(i("facb"),i("2877")),d=Object(h["a"])(l,s,n,!1,null,null,null);t["a"]=d.exports},"271ae":function(e,t,i){},"2ddc":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"multi-choice",style:e.warpStyle},[t("div",{staticClass:"multi-choice-input"},["daterange"==e.dateType?t("div",[t("el-date-picker",{attrs:{type:e.dateType,"picker-options":e.pickerOptions,"range-separator":"-",align:"center","unlink-panels":"",clearable:!1,"start-placeholder":e.$t("device.driverinitialdate"),"end-placeholder":e.$t("device.drivereffectivedate")},on:{change:e.onChange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1):e._e(),"date"==e.dateType?t("div",[t("el-date-picker",{attrs:{type:"date","picker-options":e.datePickerOptions},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1):e._e(),"datetimerange"==e.dateType?t("div",{staticClass:"datetimerange"},[t("el-date-picker",{attrs:{type:e.dateType,"range-separator":"-","picker-options":e.pickerOptionsTime,align:"center","unlink-panels":"",clearable:!1,"start-placeholder":e.$t("device.driverinitialdate"),"end-placeholder":e.$t("device.drivereffectivedate"),"default-time":["00:00:00","23:59:59"]},on:{change:e.onChange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1):e._e(),"month"==e.dateType?t("div",[t("el-date-picker",{attrs:{type:"month"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1):e._e()])])},n=[],a=(i("99af"),i("5101")),o=i("5867"),r={name:"SelectDate",props:{value:{type:Array|Date,default:function(){return[]}},dateType:{type:String,default:"daterange"},label:{type:String,default:function(){return this.$t("common.selectTime")}}},computed:{isDaterange:function(){return"daterange"==this.dateType},warpStyle:function(){var e=200;switch(this.dateType){case"date":e=120;break;case"daterange":e=230;break;case"datetimerange":e=310;break}return{width:"".concat(e,"px")}}},mixins:[o["a"]],data:function(){var e=864e5;return{dateRange:[],date:new Date,month:new Date,pickerOptions:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(e){var t=new Date;e.$emit("pick",[t,t])}},{text:this.$t("reportForm.yesterDay"),onClick:function(t){var i=new Date;i.setTime(i.getTime()-e),t.$emit("pick",[i,i])}},{text:this.$t("missing.theWeek"),onClick:function(t){var i=new Date,s=new Date,n=i.getDay();i.setTime(i.getTime()-e*(n-1)),s.setTime(i.getTime()+6*e),t.$emit("pick",[i,s])}},{text:this.$t("missing.lastWeek"),onClick:function(t){var i=new Date,s=new Date,n=i.getDay(),a=i.getTime()-e*(n-1);i.setTime(a-7*e),s.setTime(a-e),t.$emit("pick",[i,s])}},{text:this.$t("missing.thisMonth"),onClick:function(e){var t=new Date,i=t.getFullYear(),s=t.getMonth()+1,n=new Date("".concat(i,"-").concat(s,"-01")),a=new Date("".concat(i,"-").concat(s,"-01 00:00:00"));a.setMonth(a.getMonth()+1),a=new Date(a.getTime()-1e3),e.$emit("pick",[n,a])}},{text:this.$t("missing.lastMonth"),onClick:function(e){var t=new Date;t.setMonth(t.getMonth()-1);var i=t.getFullYear(),s=t.getMonth()+1,n=new Date(new Date(i,s,1)-1).getDate(),a=new Date("".concat(i,"-").concat(s,"-01")),o=new Date("".concat(i,"-").concat(s,"-").concat(n));e.$emit("pick",[a,o])}}]},pickerOptionsTime:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(e){var t=new Date(a["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),i=new Date(a["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59");e.$emit("pick",[t,i])}},{text:this.$t("reportForm.yesterDay"),onClick:function(t){var i=new Date;i.setTime(i.getTime()-e),t.$emit("pick",[new Date(a["a"].format(i,"yyyy-MM-dd")+" 00:00:00"),new Date(a["a"].format(i,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.theWeek"),onClick:function(t){var i=new Date,s=new Date,n=i.getDay();i.setTime(i.getTime()-e*(n-1)),s.setTime(i.getTime()+6*e),t.$emit("pick",[new Date(a["a"].format(i,"yyyy-MM-dd")+" 00:00:00"),new Date(a["a"].format(s,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastWeek"),onClick:function(t){var i=new Date,s=new Date,n=i.getDay(),o=i.getTime()-e*(n-1);i.setTime(o-7*e),s.setTime(o-e),t.$emit("pick",[new Date(a["a"].format(i,"yyyy-MM-dd")+" 00:00:00"),new Date(a["a"].format(s,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.thisMonth"),onClick:function(e){var t=new Date,i=t.getFullYear(),s=t.getMonth()+1,n=new Date("".concat(i,"-").concat(s,"-01")),o=new Date("".concat(i,"-").concat(s,"-01 00:00:00"));o.setMonth(o.getMonth()+1),o=new Date(o.getTime()-1e3),e.$emit("pick",[new Date(a["a"].format(n,"yyyy-MM-dd")+" 00:00:00"),new Date(a["a"].format(o,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastMonth"),onClick:function(e){var t=new Date;t.setMonth(t.getMonth()-1);var i=t.getFullYear(),s=t.getMonth()+1,n=new Date(new Date(i,s,1)-1).getDate(),o=new Date("".concat(i,"-").concat(s,"-01")),r=new Date("".concat(i,"-").concat(s,"-").concat(n));e.$emit("pick",[new Date(a["a"].format(o,"yyyy-MM-dd")+" 00:00:00"),new Date(a["a"].format(r,"yyyy-MM-dd")+" 23:59:59")])}}]}}},watch:{dateRange:function(e){null==e?this.$emit("input",[]):this.$emit("input",e)},value:function(e){this.dateRange=e},date:function(e){this.$emit("input",e)},month:function(e){this.$emit("input",e)}},methods:{onChange:function(e){this.$emit("input",e)}},mounted:function(){"date"==this.dateType?this.date=this.value:"month"==this.dateType?this.month=this.value:this.dateRange=this.value}},c=r,l=(i("e716"),i("2877")),h=Object(l["a"])(c,s,n,!1,null,"5dbb8594",null);t["a"]=h.exports},"2df7":function(e,t,i){"use strict";i("498a");var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ztree-device"},[t("el-popover",{attrs:{placement:"bottom",width:"320",trigger:"manual","append-to-body":!0,"popper-options":{boundariesElement:"body",gpuAcceleration:!0,positionFixed:!0,preventOverflow:!0}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClickOutside,expression:"handleClickOutside"}],staticClass:"ztree-drapdown",staticStyle:{height:"360px",width:"100%",overflow:"hidden"}},[t("el-scrollbar",{staticStyle:{height:"100%"}},[t("ul",{staticClass:"ztree",attrs:{id:e.ztreeId}})])],1),t("el-input",{attrs:{slot:"reference",placeholder:e.placeholder,"prefix-icon":"el-icon-search"},on:{input:e.onChange},nativeOn:{click:function(t){return e.handleClickInput.apply(null,arguments)}},slot:"reference",model:{value:e.textVal,callback:function(t){e.textVal="string"===typeof t?t.trim():t},expression:"textVal"}},[t("span",{staticClass:"el-input__suffix-inner",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.clearText},slot:"suffix"},[t("i",{staticClass:"el-input__icon el-icon-circle-close"})])])],1)],1)},n=[],a=i("5530"),o=(i("99af"),i("4de4"),i("c975"),i("d81d"),i("14d9"),i("b0c0"),i("d3b7"),i("159b"),i("4795"),i("cd6d")),r=i.n(o),c=i("6e52"),l=i("c276"),h=i("9169"),d=i("2f62"),p=i("0d33"),m=i("7fa8"),u={name:"ZtreeDeviceDropdown",props:{value:{type:String,default:""},isCheck:{type:Boolean,default:!1},isClickAll:{type:Boolean,default:!1},disableShare:{type:Boolean,default:!1},selectDeviceIds:{type:Array,default:function(){return[]}},isQueryInitData:{type:Boolean,default:!1},placeholder:{type:String,default:""}},directives:{Clickoutside:h["a"]},computed:Object(a["a"])(Object(a["a"])({},Object(d["b"])(["isZh"])),{},{ztreeId:function(){return"ztreeEl_".concat(this._uid)}}),data:function(){return{textVal:"",show:!1}},watch:{textVal:function(e){this.isClickAll?this.$emit("input",e):0==this.isCheck?e||this.$emit("input",""):e||this.$emit("onTreeCheck",[])},isQueryInitData:function(e){var t=this;this.$nextTick((function(){t.init()}))}},created:function(){this.ztreeIns=null,this.setting={view:{addDiyDom:this.addDiyDom,dblClickExpand:!1},check:{enable:!0,chkStyle:this.isCheck?"checkbox":"radio",radioType:"all"},callback:{onCheck:this.onTreeCheck,onClick:this.zTreeOnClick}}},mounted:function(){var e=this;this.$nextTick((function(){e.init()}))},destroyed:function(){this.ztreeIns&&this.ztreeIns.destroy()},methods:{init:function(){var e=this;if(this.isQueryInitData&&null==this.ztreeIns)if(this.initZtree(),0==this.isCheck){if(this.value){var t=c["a"].deviceInfos[this.value].devicename;this.textVal=t;var i=Object(l["hb"])(this.ztreeIns.getNodes(),this.value);i?this.ztreeIns.checkNode(i):console.log("ZtreeDeviceDropdown 没找到node this.textVal = ",this.textVal)}}else if(this.selectDeviceIds.length>0){var s=this.ztreeIns.getNodes();this.selectDeviceIds.forEach((function(t){var i=Object(l["hb"])(s,t);i&&e.ztreeIns.checkNode(i,!0)})),this.isZh?this.textVal="已选中".concat(this.selectDeviceIds.length,"个单位"):this.textVal="".concat(this.selectDeviceIds.length," is selected"),this.$emit("onTreeCheck",this.selectDeviceIds)}},handleClickInput:function(){var e=this;if(this.show=!0,0==this.isCheck){var t=c["a"].deviceInfos[this.value],i=t?t.devicename:null;if(i&&(this.textVal=i,this.ztreeIns&&this.ztreeIns.getNodes)){var s=Object(l["hb"])(this.ztreeIns.getNodes(),this.value);s&&setTimeout((function(){e.ztreeIns.selectNode(s)}),30)}}},clearText:function(){this.textVal="",this.ztreeIns&&(this.ztreeIns.destroy(),this.ztreeIns=null),this.treeNodeChildren.length&&(this.treeNodeChildren[0].open=!0),this.ztreeIns=$.fn.zTree.init($("#".concat(this.ztreeId)),this.setting,this.treeNodeChildren),this.isCheck?this.$emit("onTreeCheck",[]):this.$emit("input","")},handleClickOutside:function(){this.show=!1},searchDevice:Object(l["e"])((function(e,t){if(0==e.show&&(e.show=!0),e.ztreeIns.destroy(),0==t.length)e.treeNodeChildren.length&&(e.treeNodeChildren[0].open=!0),e.ztreeIns=$.fn.zTree.init($("#".concat(e.ztreeId)),e.setting,e.treeNodeChildren);else{t=t.trim();var i=e.variableDeepSearch(e.treeNodeChildren,t,0);e.ztreeIns=$.fn.zTree.init($("#".concat(e.ztreeId)),e.setting,i)}}),300),variableDeepSearch:function(e,t,i){t=t.toLowerCase();for(var s=[],n=this,a=0;a<e.length;a++){var o=null,c=e[a];if(null!=c){var l=!1;if((-1!=c.name.toLowerCase().indexOf(t)||c.showname&&-1!=c.showname.toLowerCase().indexOf(t)||c.deviceid&&-1!=c.deviceid.toLowerCase().indexOf(t)||c.simiccid&&-1!=c.simiccid.toLowerCase().indexOf(t)||c.loginname&&-1!=c.loginname.toLowerCase().indexOf(t)||c.remark&&-1!=c.remark.toLowerCase().indexOf(t)||c.remark2&&-1!=c.remark2.toLowerCase().indexOf(t)||c.simiccid&&-1!=c.simiccid.toLowerCase().indexOf(t)||c.simnum&&-1!=c.simnum.toLowerCase().indexOf(t))&&(o=c,o.open=!1,l=!0),0==l&&c.children&&c.children.length>0){var h=n.variableDeepSearch(c.children,t,i);h&&h.length>0&&(o=r()(c),o.children=h,o.open=!0,l=!0)}if(1==l&&(i++,s.push(o),i>1e3))break}}return s},onChange:function(e){this.searchDevice(this,e)},getCheckedDeviceIds:function(){var e=this.ztreeIns.getCheckedNodes(),t=[];return e.forEach((function(e){var i=e.deviceid;void 0!=i&&t.push(i)})),t},initZtree:function(){var e=this.castUsersTreeToDevicesTree(c["a"].rootuser);this.isCheck?this.treeNodeChildren=[e]:e.children&&e.children.length?this.treeNodeChildren=e.children:this.treeNodeChildren=[],this.ztreeIns=$.fn.zTree.init($("#".concat(this.ztreeId)),this.setting,this.treeNodeChildren)},addDiyDom:function(e,t){var i=$("#"+t.tId+"_check"),s=$("#"+t.tId+"_ico");s.remove(),i.before(s)},selectNode:function(e){var t=this;if(0==this.isCheck){var i=c["a"].deviceInfos[e],s=i?i.devicename:null;if(s&&(this.textVal=s,this.$emit("input",e),this.ztreeIns&&this.ztreeIns.getNodes)){var n=Object(l["hb"])(this.ztreeIns.getNodes(),this.value);n&&setTimeout((function(){t.ztreeIns.selectNode(n)}),30)}}},onTreeCheck:function(e,t,i){var s=this.ztreeIns.getCheckedNodes();if(this.isClickAll){var n=i.nodeType;if(n==c["a"].NodeType_User)this.textVal=i.username,this.$emit("input",this.textVal);else if(n==c["a"].NodeType_Group)this.textVal=i.groupname,this.$emit("input",this.textVal);else{var a=i.deviceid,o=c["a"].deviceInfos[a].devicename;this.textVal=o,this.$emit("input",a)}}else if(0==s.length)this.textVal="";else if(this.isCheck){var r=s.filter((function(e){return void 0==e.children})).map((function(e){return e.deviceid}));this.isZh?this.textVal="已选中".concat(r.length,"个单位"):this.textVal="".concat(r.length," is selected"),this.$emit("onTreeCheck",r)}else if(i.deviceid){var l=i.deviceid,h=c["a"].deviceInfos[l].devicename;this.textVal=h,this.$emit("input",l),this.show=!1}},zTreeOnClick:function(e,t,i){$("#"+i.tId+"_switch").click(),i.nodeType!=c["a"].NodeType_Device_Normal&&i.nodeType!=c["a"].NodeType_Device_Video||(this.ztreeIns.checkNode(i,!i.checked,!0),this.onTreeCheck(e,t,i))},castUsersTreeToDevicesTree:function(e){var t=this,i={name:"空",children:[],open:!0,icon:p,nodeType:c["a"].NodeType_User,nocheck:!this.isCheck};if(e){var s=e.username,n=e.subusers;i.name=s,i.username=s,i.id=s;var a=Object(l["o"])(e.groups),o=Object(l["E"])(a,e.groups,n),r=null;null!=a&&(r=e.groups[a]);var h=this.getDeviceListGroups(e.groups,s,o);if(null!=s&&null!=n&&n.length>0){var d=this.doCastUsersTreeToDevicesTree(n);i.children=h.concat(d)}else i.children=h;i.children.forEach((function(e){e.nocheck=!t.isCheck})),Object(l["Gb"])(i.children);var m=0,u=0;if(0==o&&r&&r.devices.length){var v=this.$dateformat.getCurrentUTC(),f=c["a"].lastPositions;r.devices.forEach((function(e){if(e){m++;var t=Object(l["F"])(f[e.deviceid],v);t&&u++;var s=Object(l["t"])(e,t,v);i.children.push(s)}})),Object(l["Fb"])(i.children)}if(i.children)for(var g=0;g<i.children.length;++g){var y=i.children[g];void 0!=y.totalCount&&(m+=y.totalCount,u+=y.onlineCount)}i.totalCount=m,i.name+="("+u+"/"+m+")"}return i},doCastUsersTreeToDevicesTree:function(e){var t=this,i=[];if(null!=e&&e.length>0)for(var s,n,a,o,r,h,d,m,u,v,f,g,y,b=function(){if(s=e[w],n=s.username,a=s.subusers,o=s.showname,r=0,h={name:o||n,username:n,showname:o,icon:p,nodeType:c["a"].NodeType_User},d=Object(l["o"])(s.groups),m=Object(l["E"])(d,i.groups,a),u=null,null!=d&&(u=s.groups[d]),v=t.getDeviceListGroups(s.groups,n,m),v.forEach((function(e){r+=e.onlineCount})),null!=n&&null!=a&&a.length>0?(f=t.doCastUsersTreeToDevicesTree(a),f.forEach((function(e){r+=e.onlineCount})),f=v.concat(f),h.children=f):h.children=v,Object(l["Gb"])(h.children),h.children.forEach((function(e){e.nocheck=!t.isCheck})),0==m&&u&&u.devices.length){var b=t.$dateformat.getCurrentUTC(),x=c["a"].lastPositions;u.devices.forEach((function(e){if(e){var t=Object(l["F"])(x[e.deviceid],b);t&&r++;var i=Object(l["t"])(e,t,b);h.children.push(i)}})),Object(l["Fb"])(h.children)}if(g=0,h.children)for(y=0;y<h.children.length;++y){var T=h.children[y];void 0!=T.totalCount?g+=T.totalCount:g++}h.totalCount=g,h.onlineCount=r,h.name+="("+r+"/"+g+")",i.push(h)},w=0;w<e.length;++w)b();return i},getDeviceListGroups:function(e,t,i){var s=[],n=c["a"].lastPositions,a=this.$t("common.defaultGroup");if(e)for(var o=this.$dateformat.getCurrentUTC(),r=0;r<e.length;++r){var h=e[r],d=(void 0===h.shared||h.shared,h.groupid>0);if(i||d){var p=d?h.groupname:a,u=__pinyin.get(p),v=u.l,f=u.p,g={groupid:h.groupid,name:p,label:p,groupname:p,icon:m,username:t,nodeType:c["a"].NodeType_Group,l:v,p:f,status:""},y=0;if(h.devices&&(g.totalCount=h.devices.length,g.children=[],h.devices.forEach((function(e){if(e){var t=Object(l["F"])(n[e.deviceid],o);t&&y++;var i=Object(l["t"])(e,t,o);g.children.push(i)}})),Object(l["Fb"])(g.children)),g.onlineCount=y,g.name+="("+y+"/"+h.devices.length+")",g.label+="(".concat(g.children.length,")"),d){if(this.disableShare&&1==h.shared)continue;s.push(g)}else g.children.length&&s.push(g)}}return s}}},v=u,f=(i("eca4"),i("2877")),g=Object(f["a"])(v,s,n,!1,null,"98b76e1e",null),y=g.exports;t["a"]=y},4312:function(e,t,i){},"5aff":function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"h",(function(){return n})),i.d(t,"l",(function(){return a})),i.d(t,"k",(function(){return o})),i.d(t,"c",(function(){return r})),i.d(t,"d",(function(){return c})),i.d(t,"e",(function(){return l})),i.d(t,"f",(function(){return h})),i.d(t,"g",(function(){return d})),i.d(t,"m",(function(){return p})),i.d(t,"i",(function(){return m})),i.d(t,"a",(function(){return u})),i.d(t,"j",(function(){return v}));var s="#2D9F28",n="#89C6F2",a="#FFC65E",o="red",r="#1EBEFF",c="#E505F7",l="#40A703",h="#F27908",d="#F180D1",p="#0F1F46",m="#000000",u={backgroundColor:"rgba(255,255,255,0.85)",borderColor:"transparent",textStyle:{fontSize:12,color:"#000"},padding:2},v=function(e,t,i,s,n){var a=e[0],o=n.contentSize,r=n.viewSize;return a+10>r[0]-o[0]?a=a-o[0]-10:a+=10,[a,"0%"]}},9649:function(e,t,i){"use strict";i.r(t);i("c975");var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"report-form full"},[t("el-dialog",{attrs:{title:e.$t("reportForm.seeMap"),visible:e.dialogMap,zIndex:"99",width:"500",center:"","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogMap=t}}},[t("div",{staticStyle:{width:"100%",height:"400px"}},[t("ReportMap",{ref:"mapIns"})],1)]),t("div",{staticClass:"report-form-inner"},[t("el-scrollbar",{staticStyle:{width:"100%"}},[t("div",{staticClass:"report-form-inner-header",staticStyle:{height:"45px"}},[t("div",{staticClass:"f_left"},[t("SingleChoiceVehicle",{attrs:{placeholder:this.$t("tips.selectSingleDevice"),width:"230px"},model:{value:e.deviceid,callback:function(t){e.deviceid=t},expression:"deviceid"}})],1),t("div",{staticClass:"f_left"},[t("SelectDate",{attrs:{dateType:"datetimerange"},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),t("div",{staticClass:"f_left"},[t("LabelWrap",{attrs:{label:e.$t("reportForm.interval")}},[t("el-select",{staticStyle:{width:"100px"},model:{value:e.intervalseconds,callback:function(t){e.intervalseconds=t},expression:"intervalseconds"}},[t("el-option",{attrs:{label:e.$t("monitor.zeroMinute"),value:0}}),t("el-option",{attrs:{label:e.$t("monitor.oneMinute"),value:60}}),t("el-option",{attrs:{label:e.$t("monitor.threeMinutes"),value:180}}),t("el-option",{attrs:{label:e.$t("monitor.fiveMinutes"),value:300}}),t("el-option",{attrs:{label:e.$t("monitor.tenMinutes"),value:600}}),t("el-option",{attrs:{label:e.$t("monitor.thirtyMinutes"),value:1800}})],1)],1)],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleQuery}},[e._v(e._s(e.$t("common.query")))])],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{type:"primary",disabled:e.loadingAddress,loading:e.exportLoading1},on:{click:e.exportData}},[e._v(e._s(e.$t("common.export")))])],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{loading:e.loadingAddress,type:"primary"},on:{click:e.queryAddress}},[e._v(e._s(e.$t("common.oneClickQueryAddress")))])],1)])]),t("div",{staticStyle:{width:"100%",height:"270px","margin-top":"10px"}},[t("TempAndHumiEcharts",{ref:"echartsIns",on:{selectedLegend:e.onSelectedLegend}})],1),t("div",{staticStyle:{height:"30px","line-height":"40px","text-align":"center"}},[t("b",{domProps:{textContent:e._s(e.tableTitle)}}),e._v("("+e._s(e.$t("monitor.total"))+":"+e._s(e.totalList.length)+" "+e._s(e.$t("reportForm.mutations"))+":"+e._s(e.anomalyCount)+") ")]),t("div",{staticClass:"report-form-inner-content",staticStyle:{top:"364px"}},[t("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"menu-config":e.tableMenu,border:"","highlight-current-row":"","row-class-name":e.rowClassName,"edit-config":{trigger:"manual",mode:"row",showIcon:!1,autoClear:!1},resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.totalList},on:{"menu-click":e.handleClickTableMenu,"cell-click":e.cellclick,"cell-dblclick":e.cellDblclick}},[e.permissionList.indexOf("report-temperaturereports-edittemp")>-1?t("vxe-table-column",{attrs:{field:"action",title:e.$t("reportForm.action"),width:"90"},scopedSlots:e._u([{key:"default",fn:function(i){return[e.$refs.xTable.isActiveByRow(i.row)?[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.saveRowEvent(i.row)}}},[e._v(e._s(e.$t("common.save")))]),t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.cancelRowEvent(i.row)}}},[e._v(e._s(e.$t("common.cancel")))])]:[t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.editRowEvent(i.row)}}},[e._v(e._s(e.$t("common.edit")))])]]}}],null,!1,854310040)}):e._e(),t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"updatetimeStr",width:"158",title:e.$t("reportForm.time"),sortable:""}}),e.isShowSpeed?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,align:"right",field:"speed",width:"120",title:e.$t("reportForm.speed")+"(℃)",sortable:""}}):e._e(),e.isShowTemp1?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,align:"right",field:"temp1",width:"120",title:e.$t("reportForm.temp1")+"(℃)","edit-render":{name:"$input",props:{type:"text"}},sortable:""}}):e._e(),e.isShowTemp2?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,align:"right",field:"temp2",width:"120",title:e.$t("reportForm.temp2")+"(℃)","edit-render":{name:"$input",props:{type:"text"}},sortable:""}}):e._e(),e.isShowTemp3?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,align:"right",field:"temp3",width:"120",title:e.$t("reportForm.temp3")+"(℃)","edit-render":{name:"$input",props:{type:"text"}},sortable:""}}):e._e(),e.isShowTemp4?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,align:"right",field:"temp4",width:"120",title:e.$t("reportForm.temp4")+"(℃)","edit-render":{name:"$input",props:{type:"text"}},sortable:""}}):e._e(),e.isShowAverageTemp?t("vxe-table-column",{attrs:{formatter:e.numberToFixed2,align:"right",field:"averageTemp",width:"120",title:e.$t("reportForm.averageTemp")+"℃",sortable:""}}):e._e(),e.isShowHumi?t("vxe-table-column",{attrs:{field:"humi1",align:"right",width:"120",title:e.$t("reportForm.humi")+"(%)","edit-render":{name:"$input",props:{type:"text"}},sortable:""}}):e._e(),t("vxe-table-column",{attrs:{field:"address",width:"340",title:e.$t("reportForm.address")},scopedSlots:e._u([{key:"default",fn:function(i){return[t("span",{staticStyle:{"text-decoration":"underline",cursor:"pointer",color:"#388CFE"},domProps:{textContent:e._s(i.row.address)}})]}}])})],1)],1),t("transition",{attrs:{name:"el-zoom-in-bottom"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"transition-box"},[t("el-card",[t("div",{staticStyle:{position:"absolute",right:"10px",top:"0px"}},[t("i",{staticClass:"el-icon-close",staticStyle:{float:"right",padding:"3px 0","font-size":"20px",cursor:"pointer"},on:{click:function(t){e.show=!1}}})]),t("div",{staticStyle:{margin:"10px 0px","white-space":"normal","word-break":"break-all",height:"210px","overflow-y":"auto","font-size":"12px"},domProps:{textContent:e._s(e.messageBody)}})])],1)])],1)],1)},n=[],a=i("5530"),o=(i("99af"),i("14d9"),i("13d5"),i("4e82"),i("e9c4"),i("a9e3"),i("b680"),i("b64b"),i("d3b7"),i("159b"),i("4795"),i("2f62")),r=i("d03a"),c=i("d462"),l=i("201d"),h=i("32eb"),d=function(){var e=this,t=e._self._c;return t("div",{ref:"chartId",staticClass:"full"})},p=[],m=i("ade3"),u=(i("b0c0"),i("43c8")),v=i.n(u),f=i("5aff"),g=i("c276"),y={name:"TempAndHumiEcharts",methods:{initChart:function(){var e=this,t=this.$t("reportForm.speed"),i=(this.$t("reportForm.time"),this.$t("reportForm.temp1")),s=this.$t("reportForm.temp2"),n=this.$t("reportForm.temp3"),a=this.$t("reportForm.temp4"),o=this.$t("reportForm.averageTemp"),r=this.$t("reportForm.humi");this.veo=[],this.recvtime=[],this.temp1=[],this.temp2=[],this.temp3=[],this.temp4=[],this.humi1s=[],this.averageTemp=[],this.devStates=[],this.devReissue=[],this.selectedLegend=Object(m["a"])(Object(m["a"])(Object(m["a"])(Object(m["a"])(Object(m["a"])(Object(m["a"])(Object(m["a"])({},t,!1),i,!0),s,!1),n,!1),a,!1),o,!1),r,!1),this.chartsIns=v.a.init(this.$refs.chartId),this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.on("legendselectchanged",(function(t){e.selectedLegend=t.selected,e.isOpenTemp1=t.selected[i],e.isOpenTemp2=t.selected[s],e.isOpenTemp3=t.selected[n],e.isOpenTemp4=t.selected[a],e.chartsIns.setOption(e.getChartsOption(),!0),e.$emit("selectedLegend",t.selected)})),this.chartsIns.getZr().on("click",(function(t){var i=[t.offsetX,t.offsetY];if(e.chartsIns.containPixel("grid",i)&&e.recvtime.length){var s=e.chartsIns.convertFromPixel({seriesIndex:0},[t.offsetX,t.offsetY])[0];e.$parent.tableScrollToRow&&e.$parent.tableScrollToRow(s)}}))},updateChartsOption:function(e,t){var i=this,s=this.$t("reportForm.temp1"),n=this.$t("reportForm.temp2"),a=this.$t("reportForm.temp3"),o=this.$t("reportForm.temp4");this.isOpenTemp=1==t.temphumialarmstatus,this.isOpenTemp1=this.selectedLegend[s],this.isOpenTemp2=this.selectedLegend[n],this.isOpenTemp3=this.selectedLegend[a],this.isOpenTemp4=this.selectedLegend[o];var r=t.temphumidetectors,c=999999!=r[0].highest?r[0].highest/100:"-",l=999999!=r[0].lowest?r[0].lowest/100:"-",h=999999!=r[1].highest?r[1].highest/100:"-",d=999999!=r[1].lowest?r[1].lowest/100:"-",p=999999!=r[2].highest?r[2].highest/100:"-",m=999999!=r[2].lowest?r[2].lowest/100:"-",u=999999!=r[3].highest?r[3].highest/100:"-",v=999999!=r[3].lowest?r[3].lowest/100:"-",f=[],g=[],y=[],b=[],w=[],x=[],T=[],$=[],k=[],C=[],D=[],O=[],S=[],F=[],I=[],M=[],_=[],j=[];e.forEach((function(e){g.push(e.updatetimeStr),f.push(e.speed),y.push(e.temp1),b.push(e.temp2),w.push(e.temp3),x.push(e.temp4),T.push(e.humi1),k.push(e.strstatus),C.push(0==e.reissue?i.$t("header.no"):i.$t("header.yes")),$.push(e.averageTemp),D.push(c),O.push(l),S.push(h),F.push(d),I.push(p),M.push(m),_.push(u),j.push(v)})),this.veo=f,this.recvtime=g,this.temp1=y,this.temp2=b,this.temp3=w,this.temp4=x,this.humi1s=T,this.highests1=D,this.lowests1=O,this.highests2=S,this.lowests2=F,this.highests3=I,this.lowests3=M,this.highests4=_,this.lowests4=j,this.averageTemp=$,this.devStates=k,this.devReissue=C,this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.resize()},resize:function(){this.chartsIns.resize()},getChartsOption:function(){var e=this.$t("reportForm.speed"),t=this.$t("reportForm.time"),i=this.$t("reportForm.temp"),s=this.$t("reportForm.temp1"),n=this.$t("reportForm.temp2"),o=this.$t("reportForm.temp3"),r=this.$t("reportForm.temp4"),c=this.$t("reportForm.averageTemp"),l=this.$t("reportForm.humi"),h=this.$t("reportForm.status"),d=this.$t("reportForm.reissue");return{title:{text:e+"/"+i,x:"center",textStyle:{fontSize:12,fontWeight:"bolder",color:"#333"}},grid:{x:60,y:40,x2:50,y2:40},tooltip:Object(a["a"])(Object(a["a"])({trigger:"axis"},f["a"]),{},{formatter:function(i){var a="<div>".concat(i[0].name,"</div>");for(var p in i){var m=i[p].seriesName,u=i[p].value;m&&m!=t&&(m==e?a+=Object(g["i"])(f["h"],m,u,"km/h"):m==s?a+=Object(g["i"])(f["k"],m,u,"-"!=u?"℃":""):m==n?a+=Object(g["i"])(f["c"],m,u,"-"!=u?"℃":""):m==o?a+=Object(g["i"])(f["d"],m,u,"-"!=u?"℃":""):m==r?a+=Object(g["i"])(f["e"],m,u,"-"!=u?"℃":""):m==c?a+=Object(g["i"])(f["f"],m,u,"-"!=u?"℃":""):m==l?a+=Object(g["i"])(f["g"],m,u,""):(m==h||m==d)&&(a+=Object(g["i"])(f["m"],m,u,"")))}return'<div style="width:230px">'.concat(a,"</div>")},position:f["j"]}),legend:{data:[s,n,o,r,c,l,e],x:"left",selected:this.selectedLegend},toolbox:{show:!1,feature:{magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}},itemSize:14},dataZoom:[{show:!0,realtime:!0,start:0,end:100,height:20,backgroundColor:"#EDEDED",fillerColor:"rgb(54, 72, 96,0.5)",bottom:0},{type:"inside",realtime:!0,start:0,end:100,height:20,bottom:0}],xAxis:{type:"category",boundaryGap:!1,axisLine:{onZero:!1,show:!0},data:this.recvtime,axisPointer:{type:"line",value:"",snap:!1,lineStyle:{color:"#7581BD",width:2},handle:{show:!0,color:"transparent"}}},yAxis:[{name:i,type:"value",nameTextStyle:10,nameGap:5,axisLabel:{formatter:"{value}℃"}},{name:e,type:"value",nameTextStyle:10,nameGap:2,axisLabel:{formatter:"{value} km"},axisTick:{show:!1}}],series:[{name:t,type:"line",symbol:"none",xAxisIndex:0,color:"#F0805A",smooth:!0,data:this.recvtime},{name:e,type:"line",symbol:"none",yAxisIndex:1,smooth:!0,color:f["h"],data:this.veo},{smooth:!0,name:s,type:"line",symbol:"none",color:f["k"],data:this.temp1,yAxisIndex:0},{name:n,type:"line",symbol:"none",color:f["c"],data:this.temp2,yAxisIndex:0,smooth:!0},{smooth:!0,name:o,type:"line",symbol:"none",color:f["d"],data:this.temp3,yAxisIndex:0},{smooth:!0,name:r,type:"line",symbol:"none",color:f["e"],yAxisIndex:0,data:this.temp4},{name:c,type:"line",symbol:"none",yAxisIndex:0,color:f["f"],smooth:!0,data:this.averageTemp},{name:l,type:"line",symbol:"none",yAxisIndex:0,color:f["g"],smooth:!0,data:this.humi1s},{name:h,type:"line",symbol:"none",color:"#000",data:this.devStates,smooth:!0},{name:d,type:"line",symbol:"none",color:"#000",data:this.devReissue,smooth:!0},{name:"red",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp1?this.highests1:[],smooth:!0,lineStyle:{color:"red",width:1,type:"dashed"}},{name:"green",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp1?this.lowests1:[],smooth:!0,lineStyle:{color:"green",width:1,type:"dashed"}},{name:"red",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp2?this.highests2:[],smooth:!0,lineStyle:{color:"red",width:1,type:"dashed"}},{name:"green",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp2?this.lowests2:[],smooth:!0,lineStyle:{color:"green",width:1,type:"dashed"}},{name:"red",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp3?this.highests3:[],smooth:!0,lineStyle:{color:"red",width:1,type:"dashed"}},{name:"green",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp3?this.lowests3:[],smooth:!0,lineStyle:{color:"green",width:1,type:"dashed"}},{name:"red",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp4?this.highests4:[],smooth:!0,lineStyle:{color:"red",width:1,type:"dashed"}},{name:"green",type:"line",symbol:"none",data:this.isOpenTemp&&this.isOpenTemp4?this.lowests4:[],smooth:!0,lineStyle:{color:"green",width:1,type:"dashed"}}]}}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))}},b=y,w=i("2877"),x=Object(w["a"])(b,d,p,!1,null,null,null),T=x.exports,$=i("1c31"),k=i("e285"),C=i("5101"),D=i("6e52"),O=i("7cf8"),S=i("a05b"),F={name:"tempAndHumi",data:function(){return{deviceid:"",loading:!1,dialogMap:!1,exportLoading1:!1,loadingAddress:!1,dateRange:[new Date(C["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),new Date(C["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59")],totalList:[],anomalyCount:0,intervalseconds:0,isShowSpeed:!1,isShowTemp:!1,isShowTemp1:!0,isShowTemp2:!1,isShowTemp3:!1,isShowTemp4:!1,isShowAverageTemp:!1,isShowHumi:!1,show:!1,messageBody:""}},mixins:[S["a"]],components:{SingleChoiceVehicle:r["a"],SelectDate:c["a"],TempAndHumiEcharts:T,LabelWrap:l["a"],ReportMap:h["a"]},computed:Object(a["a"])(Object(a["a"])({},Object(o["b"])(["isZh","singleDeviceid","permissionList"])),{},{tableTitle:function(){var e=D["a"].deviceInfos[this.deviceid];return e?e.devicename+"-"+this.deviceid:""}}),watch:{dateRange:function(){this.loading||this.handleQuery()},deviceid:function(e){this.setSingleDeviceid(e),this.handleQuery()}},methods:Object(a["a"])(Object(a["a"])({},Object(o["c"])(["setSingleDeviceid"])),{},{numberToFixed2:g["ob"],seeMapPoint:function(e){var t=this;this.dialogMap=!0,setTimeout((function(){t.$refs.mapIns.singleMarkerToMap(e)}),300)},rowClassName:function(e){var t=e.row;e.rowIndex;return t.isSelected?"row--current":t.isYellow?"row-low-yellow":""},editRowEvent:function(e){this.editRow=e,this.isEditing=!0,this.$refs.xTable.setActiveRow(e)},cellclick:function(e){var t=e.row;if("address"==e.column.property)this.seeMapPoint(t);else{var i=e.rowIndex,s=t.updatetimeStr;this.$refs.echartsIns.chartsIns.setOption({xAxis:{axisPointer:{value:s}}});var n=i;n>=0&&this.$refs.echartsIns.chartsIns.dispatchAction({type:"showTip",seriesIndex:2,dataIndex:n})}},saveRowEvent:function(e){var t=this;this.isEditing=!1;var i=JSON.parse(JSON.stringify(e));i.temp1="-"==i.temp1?65535:100*Number(i.temp1),i.temp2="-"==i.temp2?65535:100*Number(i.temp2),i.temp3="-"==i.temp3?65535:100*Number(i.temp3),i.temp4="-"==i.temp4?65535:100*Number(i.temp4),i.humi1="-"==i.humi1?65535:10*Number(i.humi1),Object($["k"])(i).then((function(s){var n=s.status;s.cause;0==n?(t.$refs.xTable.clearActived(),e.temp1=i.temp1/100,Object(k["Pb"])(i.deviceid).then((function(e){var i=e.temphumidetectorsetting;t.$refs.echartsIns.updateChartsOption(t.totalList,i)})),t.$XModal.message({message:t.$t("tips.editSucc"),status:"success",zIndex:9999})):(t.cancelRowEvent(e),t.$XModal.message({message:t.$t("tips.recordInUse"),status:"error",zIndex:9999}))}))},cancelRowEvent:function(e){var t=this,i=this.$refs.xTable;i.clearActived().then((function(){t.isEditing=!1,i.revertData(e)}))},cellDblclick:function(e){var t=this,i=e.row,s={deviceid:this.deviceid,updatetime:i.updatetime,trackid:i.trackid};Object($["u"])(s).then((function(e){t.messageBody=JSON.stringify(e.track),t.show=!0}))},queryAddress:function(e){var t=this,i=this.totalList,s=[];i.forEach((function(e){"-"==e.address&&s.push({lat:e.callat,lon:e.callon})})),this.loadingAddress=!0,Object(O["u"])(s).then((function(s){var n=s.points;t.loadingAddress=!1,n&&(n.forEach((function(e){e.address&&Object(g["pb"])({callat:e.lat,callon:e.lon},e.address)})),i.forEach((function(e){"-"==e.address&&(e.address=Object(g["J"])(e))}))),e&&e()})).catch((function(){t.loadingAddress=!1}))},tableScrollToRow:function(e){var t=this.totalList[e];this.$refs.xTable.scrollToRow(t),this.$refs.xTable.setCurrentRow(t)},onSelectedLegend:function(e){var t=this.$t("reportForm.speed"),i=this.$t("reportForm.temp"),s=this.$t("reportForm.temp1"),n=this.$t("reportForm.temp2"),a=this.$t("reportForm.temp3"),o=this.$t("reportForm.temp4"),r=this.$t("reportForm.averageTemp"),c=this.$t("reportForm.humi");this.isShowSpeed=e[t],this.isShowTemp=e[i],this.isShowTemp1=e[s],this.isShowTemp2=e[n],this.isShowTemp3=e[a],this.isShowTemp4=e[o],this.isShowAverageTemp=e[r],this.isShowHumi=e[c]},handleQuery:function(){var e=this,t=this.deviceid;if(t){var i=this.dateRange,s=C["a"].format(i[0],"yyyy-MM-dd HH:mm:ss"),n=C["a"].format(i[1],"yyyy-MM-dd HH:mm:ss"),a={begintime:s,endtime:n,timezone:C["a"].getOffset(),deviceids:[t],intervalseconds:this.intervalseconds,needaddress:1};this.loading=!0,this.queryDetailDateRange="".concat(s," - ").concat(n),Object($["mb"])(a).then((function(i){var s=i.records,n=i.addressmap;e.loading=!1;var a=[],o=0;s&&s.forEach((function(e){var t=e.deviceid,i=D["a"].getDeviceNameByDeviceId(t),s=e.records;s&&s.sort((function(e,t){return e.updatetime-t.updatetime})),s.forEach((function(e,s){var o=0,r=0;if(e.deviceid=t,e.devicename=i,e.updatetimeStr=C["a"].longToLocalDateTimeStr(e.updatetime),e.speed=Number((e.speed/1e3).toFixed(0)),65535!=e.temp1&&536870911!=e.temp1?(e.temp1=e.temp1/100,o+=e.temp1,r++):e.temp1="-",65535!=e.temp2&&536870911!=e.temp2?(e.temp2=e.temp2/100,o+=e.temp2,r++):e.temp2="-",65535!=e.temp3&&536870911!=e.temp3?(e.temp3=e.temp3/100,o+=e.temp3,r++):e.temp3="-",65535!=e.temp4&&536870911!=e.temp4?(e.temp4=e.temp4/100,o+=e.temp4,r++):e.temp4="-",e.humi1<0||e.humi1>1e3?e.humi1="-":e.humi1=(e.humi1/10).toFixed(1),0==r)e.averageTemp="-";else{var c=(o/r).toFixed(2);e.averageTemp=c}var l=Object(g["M"])(n,e.callat,e.callon);e.address=l||"-",a.push(e)})),a.forEach((function(e,t){var i=a[t-1];i&&(e.isYellow=!1,i&&"-"!=i.temp1&&"-"!=e.temp1&&(e.isYellow=Math.abs(i.temp1)-Math.abs(e.temp1)>=1,e.isYellow&&o++))}))})),e.anomalyCount=o,e.totalList=a,Object(k["Pb"])(t).then((function(t){var i=t.temphumidetectorsetting;e.$refs.echartsIns.updateChartsOption(a,i)}))}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},exportData:function(){var e=this;this.loadingAddress||(this.exportLoading1=!0,this.queryAddress((function(){if(e.exportLoading1=!1,e.totalList.length){var t=[[e.$t("reportForm.index"),e.$t("alarm.devName"),e.$t("alarm.devNum"),e.$t("reportForm.date")]],i=e.isShowSpeed,s=e.isShowTemp1,n=e.isShowTemp2,a=e.isShowTemp3,o=e.isShowTemp4,r=e.isShowAverageTemp,c=e.isShowHumi;i&&t[0].push(e.$t("reportForm.speed")),s&&t[0].push(e.$t("reportForm.temp1")+"℃"),n&&t[0].push(e.$t("reportForm.temp2")+"℃"),a&&t[0].push(e.$t("reportForm.temp3")+"℃"),o&&t[0].push(e.$t("reportForm.temp4")+"℃"),r&&t[0].push(e.$t("reportForm.averageTemp")+"℃"),c&&t[0].push(e.$t("reportForm.humi")+"%"),t[0].push(e.$t("reportForm.address")),t[0].push(e.$t("monitor.coordinate"));var l="";console.log(e.totalList),e.totalList.forEach((function(e,h){0==h&&(l=e.deviceid);var d=[];d.push(h+1),d.push(e.devicename),d.push(e.deviceid),d.push(e.updatetimeStr),i&&d.push(Object(g["ob"])(e.speed)),s&&d.push(Object(g["ob"])(e.temp1)),n&&d.push(Object(g["ob"])(e.temp2)),a&&d.push(Object(g["ob"])(e.temp3)),o&&d.push(Object(g["ob"])(e.temp4)),r&&d.push(Object(g["ob"])(e.averageTemp)),c&&d.push(e.humi1),d.push(e.address),d.push(e.callon+","+e.callat),t.push(d)}));var h=D["a"].getDeviceNameByDeviceId(l),d=e.$refs.echartsIns.chartsIns.getDataURL({type:"png",pixelRatio:6,backgroundColor:"#fff"});console.log("data"),console.log(t);try{var p={title:e.$t("reportForm.tempAndHumi"),data:t,devicename:h,deviceid:l,dateRange:e.queryDetailDateRange,imgData:{imgBase64:d,echartTitle:e.$t("device.tempAndHumidityCurve"),tableList:e.getImgDataList(l)}};new ExcelCls(p).exportExcel(e)}catch(m){console.log(m)}}})))},getImgDataList:function(e){var t=this.isShowTemp1,i=this.isShowTemp2,s=this.isShowTemp3,n=this.isShowTemp4,a=this.isShowHumi,o=D["a"].getDeviceNameByDeviceId(e),r=this.queryDetailDateRange.split(" - "),c=[];c.push([o+" - "+e+" "+this.$t("device.tempAndHumidityCurve")]),c.push([this.$t("alarm.devName"),o,this.$t("alarm.devNum"),e]),c.push([this.$t("videoback.startTime"),r[0],this.$t("videoback.endTime"),r[1]]),c.push([this.$t("reportForm.sensorType"),this.$t("reportForm.maxValue"),this.$t("reportForm.minValue"),this.$t("reportForm.averageValue")]);var l=null,h=null,d=null,p=null,m=null;return t&&(l=[this.$t("reportForm.temp1")],c.push(l)),i&&(h=[this.$t("reportForm.temp2")],c.push(h)),s&&(d=[this.$t("reportForm.temp3")],c.push(d)),n&&(p=[this.$t("reportForm.temp4")],c.push(p)),a&&(m=[this.$t("reportForm.humi")],c.push(m)),this.pushTempAndHumiValue(l,h,d,p,m),c},pushTempAndHumiValue:function(e,t,i,s,n){var a=this.isShowTemp1,o=this.isShowTemp2,r=this.isShowTemp3,c=this.isShowTemp4,l=this.isShowHumi,h=99999,d=0,p=0,m=[],u=99999,v=0,f=0,g=[],y=99999,b=0,w=0,x=[],T=99999,$=0,k=0,C=[],D=99999,O=0,S=0,F=[];this.totalList.forEach((function(e){if(a&&(e.temp1>d&&(d=e.temp1),e.temp1<h&&(h=e.temp1),"-"==e.temp1&&(d="-",h="-",p="-"),m.push(e.temp1)),o&&(e.temp2>v&&(v=e.temp2),e.temp2<u&&(u=e.temp2),"-"==e.temp2&&(v="-",u="-",f="-"),g.push(e.temp2)),r&&(e.temp3>b&&(b=e.temp3),e.temp3<y&&(y=e.temp3),"-"==e.temp3&&(b="-",y="-",w="-"),x.push(e.temp3)),c&&(e.temp4>$&&($=e.temp4),e.temp4<T&&(T=e.temp4),"-"==e.temp4&&($="-",T="-",k="-"),C.push(e.temp4)),l){var t="-"==e.humi1?e.humi1:Number(e.humi1);t>O&&(O=t),e.humi1<D&&(D=t),"-"==t&&(D="-",O="-",S="-"),F.push(t)}})),a&&("-"!==d&&"-"!==h&&(d+="℃",h+="℃",p=this.calculateAverage(m),p=p.toFixed(1)+"℃"),e.push(d),e.push(h),e.push(p)),o&&("-"!==v&&"-"!==u&&(v+="℃",u+="℃",f=this.calculateAverage(g),f=f.toFixed(1)+"℃"),t.push(v),t.push(u),t.push(f)),r&&("-"!==b&&"-"!==y&&(b+="℃",y+="℃",w=this.calculateAverage(x),w=w.toFixed(1)+"℃"),i.push(b),i.push(y),i.push(w)),c&&("-"!==$&&"-"!==T&&($+="℃",T+="℃",k=this.calculateAverage(C),k=k.toFixed(1)+"℃"),s.push($),s.push(T),s.push(k)),l&&("-"!==O&&"-"!==D&&(O+="%",D+="%",S=this.calculateAverage(F),S=S.toFixed(1)+"%"),n.push(O),n.push(D),n.push(S))},calculateAverage:function(e){if(0===e.length)return 0;var t=e.reduce((function(e,t){return e+t}),0),i=t/e.length;return i}}),mounted:function(){this.queryDetailDateRange=null,this.singleDeviceid&&(this.deviceid=this.singleDeviceid)}},I=F,M=(i("e592"),Object(w["a"])(I,s,n,!1,null,null,null)),_=M.exports;t["default"]=_},b174:function(e,t,i){},d03a:function(e,t,i){"use strict";var s=i("26c6");t["a"]=s["a"]},d462:function(e,t,i){"use strict";var s=i("2ddc");t["a"]=s["a"]},e592:function(e,t,i){"use strict";i("4312")},e716:function(e,t,i){"use strict";i("271ae")},ec11:function(e,t,i){},eca4:function(e,t,i){"use strict";i("b174")},facb:function(e,t,i){"use strict";i("ec11")}}]);