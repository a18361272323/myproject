(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5809f4d4"],{"400c":function(t,e,i){"use strict";i("e452e")},"58d7":function(t,e,i){},"65ad":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full summary"},[e("div",{staticClass:"report-form-inner"},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[e("div",{staticClass:"f_left"},[e("SingleChoiceUser",{model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{type:"primary",loading:t.exportLoading1},on:{click:t.exportData}},[t._v(t._s(t.$t("common.export")))])],1)]),e("div",{staticClass:"summary-deitails"},[e("span",[t._v(t._s(t.$t("monitor.all"))+":"+t._s(t.all))]),e("span",[t._v(t._s(t.$t("monitor.online"))+":"+t._s(t.online))]),e("span",[t._v(t._s(t.$t("monitor.offline"))+":"+t._s(t.offline))]),e("span",[t._v(t._s(t.$t("reportForm.located"))+":"+t._s(t.located))]),e("span",[t._v(t._s(t.$t("reportForm.notLocated"))+":"+t._s(t.notLocated))])]),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"80px"}},[e("vxe-table",{attrs:{"menu-config":t.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.totalList},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"devicename",width:"140",title:t.$t("alarm.devName"),sortable:""}}),e("vxe-table-column",{attrs:{field:"deviceid",width:"140",title:t.$t("alarm.devNum"),sortable:""}}),e("vxe-table-column",{attrs:{field:"sim",title:t.$t("reportForm.sim"),sortable:""}}),e("vxe-table-column",{attrs:{field:"deviceType",width:"80",title:t.$t("reportForm.deviceType"),sortable:""}}),e("vxe-table-column",{attrs:{field:"operationStatus",width:"80",title:t.$t("reportForm.operationStatus"),sortable:""}}),e("vxe-table-column",{attrs:{field:"updatetimeStr",width:"160",title:t.$t("reportForm.updatetimeStr"),sortable:""}}),e("vxe-table-column",{attrs:{field:"lastPosition",title:t.$t("reportForm.lastPosition"),sortable:""}}),e("vxe-table-column",{attrs:{field:"status",title:t.$t("reportForm.status"),sortable:""}})],1)],1)])])},s=[],o=i("5530"),r=(i("14d9"),i("d3b7"),i("159b"),i("af94")),n=i("1c31"),l=i("5101"),c=i("6e52"),u=i("2f62"),d=i("c276"),m=i("a05b"),p={name:"summaryReport",data:function(){return{loading:!1,exportLoading1:!1,username:"",all:0,online:0,offline:0,notLocated:0,located:0,totalList:[]}},mixins:[m["a"]],components:{SingleChoiceUser:r["a"]},computed:Object(o["a"])({},Object(u["b"])(["deviceTypes","isZh"])),methods:{handleQuery:function(){var t=this,e=this.username;e?(this.loading=!0,Object(n["gb"])(e).then((function(e){t.loading=!1;var i=e.records,a=e.addressmap,s=t.getTotalList(i,a),o=s.totalList,r=s.all,n=s.online,l=s.offline,c=s.notLocated,u=s.located;t.totalList=o,t.all=r,t.online=n,t.offline=l,t.located=u,t.notLocated=c})).catch((function(t){console.log(t)}))):this.$XModal.message({message:this.$t("tips.selectUser"),status:"error",zIndex:9999})},getTotalList:function(t,e){var i=this,a=[],s=0,o=0,r=0,n=0,u=0;if(t){var m=this.deviceTypes,p=this.isZh;s=t.length,t.forEach((function(t){var s=t.deviceid,h=c["a"].deviceInfos[s];if(h){var f=h.devicename,v=t.updatetime,b=t.callat,$=t.callon,x=i.$t("common.notReported"),g="",y="",_="",w=m[t.devicetype].typename;y=Object(d["M"])(e,b,$),0==b&&0==$?n++:(x=l["a"].longToLocalDateTimeStr(t.updatetime),_=p?t.strstatus:t.strstatusen,u++),v>0&&Date.now()-v<6e5?(g=i.$t("monitor.online"),o++):(g=i.$t("monitor.offline"),r++),a.push({devicename:f,deviceid:s,deviceType:w,sim:t.simnum?t.simnum:"",updatetimeStr:x,operationStatus:g,lastPosition:y||"",status:_})}else console.log("This device is not available locally :"+s)}))}return{totalList:a,all:s,online:o,offline:r,notLocated:n,located:u}},exportData:function(){var t=this.totalList;if(t.length){var e=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.sim"),this.$t("reportForm.deviceType"),this.$t("reportForm.operationStatus"),this.$t("reportForm.updatetimeStr"),this.$t("reportForm.lastPosition"),this.$t("reportForm.status")]];t.forEach((function(t,i){var a=[];a.push(i+1),a.push(t.devicename),a.push(t.deviceid),a.push(t.sim),a.push(t.deviceType),a.push(t.operationStatus),a.push(t.updatetimeStr),a.push(t.lastPosition),a.push(t.status),e.push(a)}));var i={title:this.$t("reportForm.summary")+" - "+this.username,data:e};this.exportLoading1=!0,new ExcelCls(i).exportExcel(this)}}},mounted:function(){}},h=p,f=(i("400c"),i("2877")),v=Object(f["a"])(h,a,s,!1,null,null,null),b=v.exports;e["default"]=b},af94:function(t,e,i){"use strict";var a=i("d575");e["a"]=a["a"]},c6a1:function(t,e,i){"use strict";i("58d7")},d575:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"multi-choice single-choice-user"},[e("div",{staticClass:"multi-choice-label"},[t._v(" "+t._s(t.$t("reportForm.selectUser"))+" ")]),e("div",{staticClass:"multi-choice-input"},[e("ZtreeUserDropdown",{ref:"ztreeDropdown",attrs:{placeholder:t.userPlaceholder,isMounted:t.isMounted},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1)])},s=[],o=i("c7eb"),r=i("1da1"),n=i("5530"),l=i("2f62"),c=i("f514"),u=i("e285"),d={props:{value:{type:String,default:""},isMounted:{type:Boolean,default:!1}},name:"SingleChoiceUser",data:function(){return{username:"",userPlaceholder:this.$t("bgManage.pleaseEnterQueryUser")}},watch:{username:function(t){this.$emit("input",t)},isQueryInitData:function(){if(0==this.isMounted){var t=this.$store.state.user.userName;this.ininZtree(t,this)}}},computed:Object(n["a"])({},Object(l["b"])(["isQueryInitData"])),components:{ZtreeUserDropdown:c["a"]},methods:{ininZtree:function(){var t=Object(r["a"])(Object(o["a"])().mark((function t(e,i){var a,s,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["Tb"])(e,null);case 2:a=t.sent,s=a.status,r=a.rootuser,0==s&&i.$refs.ztreeDropdown.ininZtree(r);case 6:case"end":return t.stop()}}),t)})));function e(e,i){return t.apply(this,arguments)}return e}()},mounted:function(){var t=this;this.$nextTick((function(){if(t.isQueryInitData&&0==t.isMounted){var e=t.$store.state.user.userName;t.ininZtree(e,t)}}))}},m=d,p=(i("c6a1"),i("2877")),h=Object(p["a"])(m,a,s,!1,null,null,null);e["a"]=h.exports},e452e:function(t,e,i){}}]);