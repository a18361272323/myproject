(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10e258d1"],{"0a03":function(e,t,i){"use strict";i("76fb")},"3a98":function(e,t,i){"use strict";i("d1f4")},"4c3c":function(e,t,i){"use strict";i("4e82");t["a"]={data:function(){return{sortConfig:{sortMethod:function(e){var t=e.data,i=e.sortList,n=i[0],s=n.property,r=n.order,a=[];return a="desc"===r?t.sort((function(e,t){var i=e[s],n=t[s];if(isNaN(i)&&!isNaN(Date.parse(i))&&isNaN(n)&&!isNaN(Date.parse(n)))return Date.parse(n)-Date.parse(i);if(i=parseFloat(i),n=parseFloat(n),isNaN(i)||isNaN(n)){var r=t[s]+"";return r.localeCompare(e[s])}return n-i})):"asc"===r?t.sort((function(e,t){var i=e[s],n=t[s];if(isNaN(i)&&!isNaN(Date.parse(i))&&isNaN(n)&&!isNaN(Date.parse(n)))return Date.parse(i)-Date.parse(n);if(i=parseFloat(e[s]),n=parseFloat(t[s]),isNaN(i)||isNaN(n)){var r=e[s]+"";return r.localeCompare(t[s])}return i-n})):t.sort(),a}}}}}},5103:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));i("99af"),i("14d9"),i("b0c0"),i("d3b7"),i("159b");var n=i("c276"),s=i("6e52"),r=i("5101"),a=i("a47e"),o=i("0d33"),c=i("7fa8"),l=function(e,t,i,r){var a=s["a"].lastPositions,o=a[e.deviceid],c=Object(n["q"])(o,e,t),l=Object(n["eb"])(e,t,o,i);l&&(l=" ["+l+"]");var d=e.hasFunctions.isHasVideo,u={deviceid:e.deviceid,name:e.devicename+l,devicename:e.devicename,icon:c,id:e.deviceid,hasFunctions:e.hasFunctions,isOnline:t,nodeType:d?s["a"].NodeType_Device_Video:s["a"].NodeType_Device_Normal,checked:void 0!==r&&r,isStared:1==e.stared,loginname:e.loginname?e.loginname:"",remark:e.remark?e.remark:"",remark2:e.remark2?e.remark2:"",simiccid:e.simiccid?e.simiccid:"",simnum:e.simnum?e.simnum:""};return u},d=function(e,t){var i={name:a["a"].t("common.empty"),children:[],open:!0,icon:o,nodeType:s["a"].NodeType_User};if(e){var c=e.username,d=e.subusers;i.name=c,i.username=c;var p=Object(n["n"])(e.groups),f=Object(n["D"])(p,e.groups,d),v=null;null!=p&&(v=e.groups[p]);var m=h(e.groups,c,f,t);if(null!=c&&null!=d&&d.length>0){var g=u(d,t);i.children=m.concat(g)}else i.children=m;Object(n["Fb"])(i.children);var b=0,C=0;if(0==f&&v&&v.devices.length){var T=r["a"].getCurrentUTC(),y=s["a"].lastPositions;v.devices.forEach((function(e){if(e){var s=Object(n["E"])(y[e.deviceid],T);s&&C++,b++;var r=!!t[e.deviceid],a=l(e,s,T,r);i.children.push(a)}})),Object(n["Eb"])(i.children)}if(i.children)for(var I=0;I<i.children.length;++I){var k=i.children[I];void 0!=k.totalCount&&(b+=k.totalCount,C+=k.onlineCount)}i.totalCount=b,i.name+="("+C+"/"+b+")"}return i},u=function e(t,i){var a=[];if(null!=t&&t.length>0)for(var c,d,u,p,f,v,m,g,b,C,T,y,I,k=function(){if(c=t[x],d=c.username,u=c.subusers,p=c.showname,f=0,v={name:p||d,username:d,showname:p,icon:o,id:d+"_"+x,nodeType:s["a"].NodeType_User},m=Object(n["n"])(c.groups),g=Object(n["D"])(m,c.groups,u),b=null,null!=m&&(b=c.groups[m]),C=h(c.groups,d,g,i),C.forEach((function(e){f+=e.onlineCount})),null!=d&&null!=u&&u.length>0?(T=e(u,i),T.forEach((function(e){f+=e.onlineCount})),T=C.concat(T),v.children=T):v.children=C,Object(n["Fb"])(v.children),0==g&&b&&b.devices.length){var k=r["a"].getCurrentUTC(),w=s["a"].lastPositions;b.devices.forEach((function(e){if(e){var t=Object(n["E"])(w[e.deviceid],k);t&&f++;var s=!!i[e.deviceid],r=l(e,t,k,s);v.children.push(r)}})),Object(n["Eb"])(v.children)}if(y=0,v.children)for(I=0;I<v.children.length;++I){var O=v.children[I];void 0!=O.totalCount?y+=O.totalCount:y++}v.totalCount=y,v.onlineCount=f,v.name+="("+f+"/"+y+")",a.push(v)},x=0;x<t.length;++x)k();return a},h=function(e,t,i,o){var d=a["a"].t("common.defaultGroup"),u=[],h=s["a"].lastPositions;if(e)for(var p=r["a"].getCurrentUTC(),f=0;f<e.length;++f){var v=e[f],m=void 0===v.shared?0:v.shared,g=v.groupid>0;if(i||g){var b=g?v.groupname:d,C={groupid:v.groupid,name:b,groupname:b,icon:c,id:t+"_"+v.groupid,username:t,nodeType:s["a"].NodeType_Group},T=0;v.devices&&(C.totalCount=v.devices.length,C.children=[],v.devices.forEach((function(e){if(e){var t=Object(n["E"])(h[e.deviceid],p);t&&T++;var i=!!o[e.deviceid],s=l(e,t,p,i);C.children.push(s)}})),Object(n["Eb"])(C.children)),C.onlineCount=T,C.name=b+"("+T+"/"+v.devices.length+")",C.label+="(".concat(C.children.length,")"),1!==m&&u.push(C)}}return u}},"5bca":function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.$t("bgManage.importDeviceID")+"/SIM/ICCID",visible:e.value,center:"",width:"560px","append-to-body":"","close-on-click-modal":!1},on:{close:e.handleClose}},[t("TextareaIds",{ref:"textareaIds",on:{"on-change":e.onChange}}),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{staticStyle:{"text-align":"center"},attrs:{span:8,offset:8}},[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:e.loading},on:{click:e.handleClick}},[e._v(e._s(e.$t("common.determine")))])],1)],1)],1)},s=[],r=i("5530"),a=i("2f62"),o=i("9c0e1"),c=i("201d"),l={name:"ImportDeviceidsDialog",props:{value:{type:Boolean,default:!1}},data:function(){return{loading:!1}},components:{TextareaIds:o["a"],LabelWrap:c["a"]},computed:Object(r["a"])({},Object(a["b"])(["isZh"])),methods:{handleClick:function(){this.loading=!0,this.$refs.textareaIds.immediatelyMatching(),this.loading=!1,this.$emit("on-import",this.deviceids),this.handleClose()},handleClose:function(){this.$emit("input",!1)},onChange:function(e){this.deviceids=e,this.loading=!1}},mounted:function(){this.deviceids=[]}},d=l,u=i("2877"),h=Object(u["a"])(d,n,s,!1,null,null,null);t["a"]=h.exports},"76fb":function(e,t,i){},"7d2c":function(e,t,i){"use strict";i("be1c")},"7e15":function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"device-ztree-search full"},[t("div",{staticClass:"device-ztree-search-wrap"},[t("div",{staticClass:"device-ztree-search-wrap-input",style:{padding:"8px 38px 0px 10px"}},[t("div",[t("el-input",{staticStyle:{width:"100%",height:"32px"},attrs:{placeholder:e.$t("bgManage.pleaseEnterUsernameOrGroupname"),clearable:""},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}},[t("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),t("div",{staticClass:"device-ztree-search-wrap-refresh",style:{right:"2px"},on:{click:e.refreshZtree}},[e.reloadLoading?t("i",{staticClass:"el-icon-loading",staticStyle:{"font-size":"18px"}}):t("i",{staticClass:"el-icon-refresh-right",staticStyle:{"font-size":"18px"}})])])]),t("div",{staticClass:"device-ztree-search-ztree"},[t("el-scrollbar",{staticStyle:{height:"100%"}},[t("ul",{staticClass:"ztree",attrs:{id:e.ztreeId}})])],1)])},s=[],r=i("5530"),a=(i("c975"),i("14d9"),i("b0c0"),i("b64b"),i("d3b7"),i("498a"),i("159b"),i("2f62")),o=i("c276"),c=i("5103"),l=i("cd6d"),d=i.n(l),u=i("6e52"),h=i("5101"),p=i("b562"),f=i("0d33"),v={name:"Temp",props:{showClear:{type:Boolean,default:!1}},data:function(){return{searchText:"",reloadLoading:!1}},watch:{isQueryInitData:function(e){e&&this.initZtree()},searchText:function(e){this.searchZtree(this,e.trim())}},computed:Object(r["a"])(Object(r["a"])({},Object(a["b"])(["isQueryInitData"])),{},{ztreeId:function(){return"ztreeEl_".concat(this._uid)}}),methods:{handleClear:function(){this.$parent.totalCount=0,this.$parent.tableList=[],this.$parent.totalList=[],this.$parent.cacheDeviceids=[]},refreshZtree:function(){var e=this;0==this.reloadLoading&&(this.reloadLoading=!0,Object(p["S"])().then((function(t){var i=t.rootuser;e.reloadLoading=!1,u["a"].deviceInfos={},u["a"].rootuser=i,u["a"].setDeviceInfos(i),e.ztreeIns.destroy(),e.initZtree(),e.searchText="",e.selectedDeviceIds={},e.handleClear(),e.$emit("onTreeCheck",[])})).catch((function(t){e.reloadLoading=!1})))},updateZtreeIns:function(){var e=Object.keys(this.selectedDeviceIds);this.ztreeIns.destroy(),this.initZtree();for(var t=this.ztreeIns,i=t.transformToArray(t.getNodes()),n=0;n<e.length;n++){var s=e[n];this.selectedDeviceIds[s]=!0;for(var r=0;r<i.length;r++){var a=i[r];if(a.deviceid==s){t.checkNode(a,!0);break}}}},updateNodes:function(e){var t=this.ztreeIns,i=t.getNodes(),n=u["a"].deviceInfos,s=u["a"].lastPositions,r=h["a"].getCurrentUTC();e.forEach((function(e){var a=n[e],c=s[e],l=Object(o["gb"])(i,e);l&&(l.name=Object(o["db"])(a,c?c.online:0,c,r),t.updateNode(l))}))},initZtree:function(){this.selectedDeviceIds={};var e=Object(c["a"])(u["a"].rootuser,this.selectedDeviceIds);this.treeNodes=e,this.ztreeIns=$.fn.zTree.init($("#".concat(this.ztreeId)),this.setting,this.treeNodes)},onTreeCheck:function(e,t,i){var n=[];this.changeSelectedDeviceIds([i]);var s=this.selectedDeviceIds;for(var r in s)s.hasOwnProperty(r)&&1==s[r]&&n.push(r);this.$emit("onTreeCheck",n)},changeSelectedDeviceIds:function(e){var t=this.selectedDeviceIds;function i(e){for(var n in e){var s=e[n];s.deviceid?s.checked?t[s.deviceid]=!0:delete t[s.deviceid]:s.children&&s.children.length>0&&i(s.children)}}i(e)},cancelCheckNode:function(e){var t=Object(o["gb"])(this.ztreeIns.getNodes(),e);null!=t&&this.ztreeIns.checkNode(t,!1,!0),delete this.selectedDeviceIds[e]},selectedCheckNodes:function(e){var t=this;this.selectedDeviceIds={},this.ztreeIns.checkAllNodes(),e.forEach((function(e){t.selectedDeviceIds[e]=!0;var i=Object(o["gb"])(t.ztreeIns.getNodes(),e);null!=i&&t.ztreeIns.checkNode(i,!0,!0)})),this.$emit("onTreeCheck",e)},zTreeOnClick:function(e,t,i){this.ztreeIns.checkNode(i,!0,!0),this.onTreeCheck(e,t,i)},searchZtree:Object(o["e"])((function(e,t){if(e.ztreeIns.destroy(),0==t.length){var i=Object(c["a"])(u["a"].rootuser,e.selectedDeviceIds);e.ztreeIns=$.fn.zTree.init($("#".concat(e.ztreeId)),e.setting,i)}else{var n=e.variableDeepSearch(e.treeNodes.children,t),s=[{name:u["a"].rootuser.username,children:n,open:!0,icon:f,username:u["a"].rootuser.username,nodeType:u["a"].NodeType_User}];e.ztreeIns=$.fn.zTree.init($("#".concat(e.ztreeId)),e.setting,s)}}),1e3),variableDeepSearch:function(e,t){t=t.toLowerCase();for(var i=[],n=this,s=this.selectedDeviceIds,r=0;r<e.length;r++){var a=null,o=e[r];if(null!=o){var c=!1;if((-1!=o.name.toLowerCase().indexOf(t)||o.username&&-1!=o.username.toLowerCase().indexOf(t)||o.deviceid&&-1!=o.deviceid.toLowerCase().indexOf(t)||o.loginname&&-1!=o.loginname.toLowerCase().indexOf(t)||o.remark&&-1!=o.remark.toLowerCase().indexOf(t)||o.remark2&&-1!=o.remark2.toLowerCase().indexOf(t)||o.simiccid&&-1!=o.simiccid.toLowerCase().indexOf(t)||o.simnum&&-1!=o.simnum.toLowerCase().indexOf(t))&&(a=d()(o),a.open=!1,c=!0),0==c&&o.children&&o.children.length>0){var l=n.variableDeepSearch(o.children,t);l&&l.length>0&&(a=d()(o),a.children=l,a.open=!0,c=!0)}1==c&&(void 0!=a.deviceid&&1==s[a.deviceid]&&(a.checked=!0),i.push(a))}}return i},addDiyDom:function(e,t){if(t.nodeType==u["a"].NodeType_Device_Video){var i=document.getElementById("".concat(t.tId,"_switch"));t.isLastNode?i.className="button  switch bottom_docu":i.className="button  switch center_docu",i.onclick=null}}},created:function(){this.setting={view:{dblClickExpand:!1,addDiyDom:this.addDiyDom},check:{enable:!0,chkStyle:"checkbox",radioType:"all"},callback:{onCheck:this.onTreeCheck,onClick:this.zTreeOnClick}}},destroyed:function(){this.treeNodes=null,this.ztreeIns&&this.ztreeIns.destroy(),this.ztreeIns=null,this.selectedDeviceIds=null},mounted:function(){this.isQueryInitData&&this.initZtree()}},m=v,g=(i("0a03"),i("2877")),b=Object(g["a"])(m,n,s,!1,null,null,null);t["a"]=b.exports},"9c0e1":function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"textarea-ids"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{staticClass:"textarea-ids-red-star",attrs:{span:1}},[e._v("*")]),t("el-col",{attrs:{span:11}},[t("span",[e._v(" "+e._s(e.$t("common.deviceids")))]),e.showTips?e._e():t("span",{attrs:{span:""}},[e._v("/SIM/ICCID")]),e.showTips?t("el-tooltip",{attrs:{placement:"top",effect:"light"}},[t("div",{attrs:{slot:"content"},slot:"content"},[t("div",[e._v(e._s(e.$t("tips.addNewDeviceTip1")))]),t("div",[e._v(e._s(e.$t("tips.addNewDeviceTip2")))]),t("div",[e._v(e._s(e.$t("tips.addNewDeviceTip3")))]),t("div",[e._v(e._s(e.$t("tips.addNewDeviceTip4")))])]),t("i",{staticClass:"el-icon-warning-outline new-add-tips-icon",staticStyle:{position:"relative",top:"-1px"}})]):e._e(),t("div",{staticClass:"tips_clear noselect"},[t("div",{staticClass:"small-clear",on:{click:e.handleClear}},[e._v(e._s(e.$t("tips.clear")))])])],1),t("el-col",{attrs:{span:11}},[t("span",[e._v(e._s(e.$t("reportForm.result")))])])],1),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:11,offset:1}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:10,maxRows:10},rows:10,placeholder:e.textPlaceholder},on:{input:e.onChange},model:{value:e.ids,callback:function(t){e.ids=t},expression:"ids"}})],1),t("el-col",{class:[e.isOk?"correct":"error"],attrs:{span:11}},[t("el-input",{attrs:{type:"textarea",readonly:!0,disabled:"",autosize:{minRows:10,maxRows:10},rows:10},model:{value:e.errorTips,callback:function(t){e.errorTips=t},expression:"errorTips"}})],1)],1)],1)},s=[],r=(i("99af"),i("c975"),i("a15b"),i("14d9"),i("d3b7"),i("ac1f"),i("5319"),i("498a"),i("159b"),i("4795"),i("c276")),a={name:"Temp",props:{showTips:{type:Boolean,default:!1},textPlaceholder:{type:String,default:function(){return this.$t("tips.textareaids")}}},data:function(){return{ids:"",isOk:!1,isMatchingCompletado:!0,errorTips:""}},methods:{handleClear:function(){this.ids="",this.errorTips="",this.isOk=!1,this.isMatchingCompletado=!0,this.$emit("on-change",[])},onChange:function(e){if(""==e)return this.errorTips="",this.isOk=!1,void this.$emit("on-change",[]);e=e.replace(/\s+/g,"\n");var t=/[0-9A-Za-z]/g.exec(e);if(t){this.isMatchingCompletado=!1;var i=t.input;this.matchingDeviceIds(this,i)}else this.errorTips=this.$t("tips.deviceIdTips")},submitFailTips:function(e){var t=this,i="";e.forEach((function(e){var n=e.deviceid,s=e.cause,r=e.status,a=e.creater,o="";o=1==r?null!=a&&a.length>0?t.$t("tips.occupiedUser")+a:t.$t("tips.occupiedOtherUser"):s,i+="".concat(n,":").concat(o,"\n")})),this.errorTips=i,this.isOk=!1},immediatelyMatching:function(){var e=this,t=this.ids;if(e.isMatchingCompletado=!0,t&&t.length>0){var i=e.filtered(t),n=i.length;e.errorTips=e.$t("missing.totalNumber")+" : "+n,e.isOk=!0,e.ids=i.join("\n"),e.$emit("on-change",i)}else e.errorTips=e.$t("missing.adjustDeviceidLength"),e.isOk=!1,e.$emit("on-change",[]);setTimeout((function(){e.isMatchingCompletado=!1}),2e3)},matchingDeviceIds:Object(r["e"])((function(e,t){if(0==e.isMatchingCompletado)if(e.isMatchingCompletado=!0,t&&t.length>0){var i=e.filtered(t),n=i.length;e.errorTips=e.$t("missing.totalNumber")+" : "+n,e.isOk=!0,e.ids=i.join("\n"),console.log("newArr",i),e.$emit("on-change",i)}else e.errorTips=e.$t("missing.adjustDeviceidLength"),e.isOk=!1,e.$emit("on-change",[])}),2e3),filtered:function(e){function t(e){for(var t=[],i=0;i<e.length;i++)-1==t.indexOf(e[i])&&t.push(e[i]);return t}var i=[];return e.split("\n").forEach((function(e){e=e.trim(),e&&i.push(e)})),t(i)}},mounted:function(){}},o=a,c=(i("7d2c"),i("2877")),l=Object(c["a"])(o,n,s,!1,null,null,null);t["a"]=l.exports},ae31:function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.$t("bgManage.batchTransferDevice"),center:"",visible:e.value,width:"320px","append-to-body":"","close-on-click-modal":!1},on:{close:function(t){return e.$emit("input",!1)}}},[t("el-row",{staticClass:"margin_b10"},[t("el-col",{attrs:{span:24}},[t("div",{staticStyle:{"padding-left":"4px","font-size":"13px"}},[t("span",[e._v(e._s(e.$t("bgManage.selectedTransferDevices")))]),t("span",{staticStyle:{height:"32px","line-height":"32px","padding-left":"10px",color:"#1678FF"},domProps:{textContent:e._s(e.selectList.length)}})])])],1),t("el-row",{staticClass:"margin_b10"},[t("el-col",{attrs:{span:24}},[t("DropdownZtreeUserGroup",{attrs:{label:e.$t("bgManage.transferUser")},model:{value:e.target,callback:function(t){e.target=t},expression:"target"}})],1)],1),t("el-row",{staticStyle:{"margin-top":"20px"}},[t("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[t("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",loading:e.loading},on:{click:e.handleClickTransfer}},[e._v(e._s(e.$t("common.determine")))])],1)],1)],1)},s=[],r=i("5530"),a=(i("d81d"),i("201d")),o=i("cf40"),c=i("e285"),l=i("b562"),d=i("6e52"),u=i("2f62"),h={props:{value:{type:Boolean,default:!1},selectList:{type:Array,default:function(){return[]}}},data:function(){return{loading:!1,target:{}}},components:{LabelWrap:a["a"],DropdownZtreeUserGroup:o["a"]},mounted:function(){},methods:Object(r["a"])(Object(r["a"])({},Object(u["c"])(["setIsReloadRootuser","setReportTagList"])),{},{handleClickTransfer:function(){var e=this,t=this.target.creater,i=this.target.groupid;if(void 0!=t&&void 0!=i){var n=this.selectList.map((function(e){var t=e.deviceid;return t}));if(n.length>500)return void this.$XModal.message({message:this.$t("tips.transferDeviceExceed500"),status:"error",zIndex:9999});if(n.length>0){var s={action:"move",deviceids:n,targetgroupid:i,targetusername:t};this.loading=!0,Object(c["l"])(s).then((function(t){var i=t.status,n=t.success;e.loading=!1,0==i?(Object(l["S"])().then((function(t){var i=t.rootuser;d["a"].rootuser=i,d["a"].setDeviceInfos(i),e.$emit("transferSucc"),e.$emit("input",!1)})),e.$XModal.message({message:e.$t("tips.transferSucc",{success:n}),status:"success",zIndex:9999}),e.setReportTagList([]),e.setIsReloadRootuser(!0)):91==i?e.$XModal.message({message:e.$t("tips.noPermission"),status:"error",zIndex:9999}):e.$XModal.message({message:e.$t("tips.transferFail"),status:"error",zIndex:9999})})).catch((function(t){console.log(t),e.loading=!1}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})}else this.$XModal.message({message:this.$t("tips.transferTargetUser"),status:"error",zIndex:9999})}})},p=h,f=i("2877"),v=Object(f["a"])(p,n,s,!1,null,"06177afe",null);t["a"]=v.exports},be1c:function(e,t,i){},cf40:function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;return t("LabelWrap",{attrs:{label:e.label}},[t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClickOutside,expression:"handleClickOutside"}],staticClass:"full",staticStyle:{position:"relative"}},[t("el-input",{attrs:{placeholder:e.placeholder,clearable:""},on:{input:e.onChange},nativeOn:{click:function(t){e.show=!0}},model:{value:e.textVal,callback:function(t){e.textVal=t},expression:"textVal"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"el-popover el-popper",staticStyle:{width:"240px",position:"absolute",top:"32px","z-index":"3029"},attrs:{"x-placement":"bottom"}},[t("div",{staticStyle:{height:"280px",width:"100%"}},[t("el-scrollbar",{staticStyle:{height:"100%"}},[t("ul",{staticClass:"ztree",attrs:{id:e.ztreeId}})])],1),t("div",{staticClass:"popper__arrow",staticStyle:{left:"112.5px"},attrs:{"x-arrow":""}})])],1)])},s=[],r=i("5530"),a=(i("99af"),i("c975"),i("14d9"),i("b0c0"),i("498a"),i("4795"),i("0139")),o=i("6e52"),c=i("c276"),l=i("cd6d"),d=i.n(l),u=i("9169"),h=i("2f62"),p=i("0d33"),f=i("7fa8"),v={name:"DropdownZtreeUserGroup",props:{value:{type:Object,default:function(){return{}}},disableShare:{type:Boolean,default:!1},label:{type:String,default:""}},data:function(){return{show:!1,textVal:"",placeholder:""}},components:{LabelWrap:a["a"]},computed:Object(r["a"])(Object(r["a"])({},Object(h["b"])(["isQueryInitData","userName"])),{},{ztreeId:function(){return"ztreeEl_".concat(this._uid)}}),directives:{Clickoutside:u["a"]},methods:{handleClickOutside:function(){this.show=!1},onChange:function(e){this.searchUser(this,e)},searchUser:Object(c["e"])((function(e,t){if(0==e.show&&(e.show=!0),e.ztreeIns.destroy(),0==t.length)e.ztreeIns=$.fn.zTree.init($("#".concat(e.ztreeId)),e.setting,e.treeNodes);else{var i=e.variableDeepSearch(e.treeNodes,t.trim());e.ztreeIns=$.fn.zTree.init($("#".concat(e.ztreeId)),e.setting,i)}}),300),onTreeCheck:function(e,t,i){var n=i.name;if(this.textVal=n,this.placeholder=i.name,void 0==i.groupid)this.$emit("input",{creater:i.username,groupid:0,name:n});else{var s=i.getParentNode();this.$emit("input",{creater:s.username,groupid:i.groupid,name:n})}this.show=!1},emitValue:function(e){var t=this,i=this.getUserGroupNode(e);null==i?this.$emit("input",Object.assign({name:e.creater},e)):i.nodeType==o["a"].NodeType_User?this.$emit("input",Object.assign({name:i.showname},e)):i.nodeType==o["a"].NodeType_Group&&this.$emit("input",Object.assign({name:i.groupname},e)),null!=i&&setTimeout((function(){t.ztreeIns.checkNode(i,!0)}),500)},getUserGroupNode:function(e){for(var t=e.creater,i=e.groupid,n=e.nodeType,s=this.ztreeIns.transformToArray(this.ztreeIns.getNodes()),r=null,a=0;a<s.length;a++){var o=s[a];if("user"==o.nodeType&&t==o.username&&0==i){r=o;break}if(n==o.nodeType&&o.username==t&&o.groupid==i){r=o;break}}return r},selectedNode:function(e){for(var t=this,i=e.creater,n=e.groupid,s=e.nodeType,r=this.ztreeIns.transformToArray(this.ztreeIns.getNodes()),a=null,o=0;o<r.length;o++){var c=r[o];if(s==c.nodeType&&c.username==i&&c.groupid==n){a=c;break}}null!=a&&setTimeout((function(){t.ztreeIns.checkNode(a,!0)}),500)},zTreeOnClick:function(e,t,i){this.ztreeIns.checkNode(i),this.onTreeCheck(e,t,i)},ininZtree:function(){var e=this.castUsersTreeToDevicesTree(o["a"].rootuser);this.treeNodes=e,this.ztreeIns=$.fn.zTree.init($("#".concat(this.ztreeId)),this.setting,e)},selectedRoot:function(){var e=this.ztreeIns.getNodes()[0];e&&this.ztreeIns.checkNode(e,!0)},variableDeepSearch:function(e,t){t=t.toLowerCase();for(var i=[],n=this,s=0;s<e.length;s++){var r=null,a=e[s];if(null!=a){var o=!1;if(-1==a.name.toLowerCase().indexOf(t)&&-1==(a.username&&a.username.toLowerCase().indexOf(t))||(r=d()(a),r.open=!1,o=!0),0==o&&a.children&&a.children.length>0){var c=n.variableDeepSearch(a.children,t);c&&c.length>0&&(r=d()(a),r.children=c,r.open=!0,o=!0)}1==o&&i.push(r)}}return i},getDeviceListGroups:function(e,t){var i=[];if(e)for(var n=0;n<e.length;++n){var s=e[n],r=s.groupid>0;if(r){var a=void 0===s.shared?0:s.shared,l=s.groupname,d={groupid:s.groupid,name:l,groupname:l,icon:f,username:t,id:t+"_"+s.groupid,nodeType:o["a"].NodeType_Group,shared:a};if(this.disableShare&&1==s.shared)continue;i.push(d)}}return Object(c["Fb"])(i),i},castUsersTreeToDevicesTree:function(e){var t={name:"",icon:p,open:!0,nodeType:o["a"].NodeType_User};if(null!=e){var i=e.username,n=e.subusers,s=e.showname;t.name=i,t.username=i,t.showname=s;var r=this.getDeviceListGroups(e.groups,i);if(null!=i&&null!=n&&n.length>0){var a=this.doCastUsersTreeToDevicesTree(n);a.length>0&&(t.children=a)}var c=r.concat(t.children?t.children:[]);c.length&&(t.children=c)}return[t]},doCastUsersTreeToDevicesTree:function(e){var t=[];if(null!=e&&e.length>0)for(var i=0;i<e.length;++i){var n=e[i],s=n.username,r=n.subusers,a=n.showname,l={name:a||s,icon:p,nodeType:o["a"].NodeType_User,username:s,showname:a},d=this.getDeviceListGroups(n.groups,s);if(null!=s&&null!=r&&r.length>0){var u=this.doCastUsersTreeToDevicesTree(r);u.length>0&&(l.children=u)}var h=d.concat(l.children?l.children:[]);h.length>0&&(l.children=h),t.push(l)}return Object(c["Fb"])(t),t}},created:function(){this.setting={view:{dblClickExpand:!1},check:{enable:!0,chkStyle:"radio",radioType:"all"},callback:{onCheck:this.onTreeCheck,onClick:this.zTreeOnClick}}},watch:{isQueryInitData:function(e){e&&this.ininZtree()},value:function(e){this.textVal=e.name}},mounted:function(){var e=this;this.isQueryInitData&&this.ininZtree(),this.$nextTick((function(){e.placeholder=e.$t("bgManage.editUserTitle1")}))},destroyed:function(){this.ztreeIns.destroy()}},m=v,g=(i("3a98"),i("2877")),b=Object(g["a"])(m,n,s,!1,null,null,null);t["a"]=b.exports},d1f4:function(e,t,i){}}]);