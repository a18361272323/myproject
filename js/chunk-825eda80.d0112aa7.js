(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-825eda80"],{"1b56":function(e,t,a){},"271ae":function(e,t,a){},"2ddc":function(e,t,a){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"multi-choice",style:e.warpStyle},[t("div",{staticClass:"multi-choice-input"},["daterange"==e.dateType?t("div",[t("el-date-picker",{attrs:{type:e.dateType,"picker-options":e.pickerOptions,"range-separator":"-",align:"center","unlink-panels":"",clearable:!1,"start-placeholder":e.$t("device.driverinitialdate"),"end-placeholder":e.$t("device.drivereffectivedate")},on:{change:e.onChange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1):e._e(),"date"==e.dateType?t("div",[t("el-date-picker",{attrs:{type:"date","picker-options":e.datePickerOptions},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1):e._e(),"datetimerange"==e.dateType?t("div",{staticClass:"datetimerange"},[t("el-date-picker",{attrs:{type:e.dateType,"range-separator":"-","picker-options":e.pickerOptionsTime,align:"center","unlink-panels":"",clearable:!1,"start-placeholder":e.$t("device.driverinitialdate"),"end-placeholder":e.$t("device.drivereffectivedate"),"default-time":["00:00:00","23:59:59"]},on:{change:e.onChange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1):e._e(),"month"==e.dateType?t("div",[t("el-date-picker",{attrs:{type:"month"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1):e._e()])])},i=[],o=(a("99af"),a("5101")),r=a("5867"),s={name:"SelectDate",props:{value:{type:Array|Date,default:function(){return[]}},dateType:{type:String,default:"daterange"},label:{type:String,default:function(){return this.$t("common.selectTime")}}},computed:{isDaterange:function(){return"daterange"==this.dateType},warpStyle:function(){var e=200;switch(this.dateType){case"date":e=120;break;case"daterange":e=230;break;case"datetimerange":e=310;break}return{width:"".concat(e,"px")}}},mixins:[r["a"]],data:function(){var e=864e5;return{dateRange:[],date:new Date,month:new Date,pickerOptions:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(e){var t=new Date;e.$emit("pick",[t,t])}},{text:this.$t("reportForm.yesterDay"),onClick:function(t){var a=new Date;a.setTime(a.getTime()-e),t.$emit("pick",[a,a])}},{text:this.$t("missing.theWeek"),onClick:function(t){var a=new Date,n=new Date,i=a.getDay();a.setTime(a.getTime()-e*(i-1)),n.setTime(a.getTime()+6*e),t.$emit("pick",[a,n])}},{text:this.$t("missing.lastWeek"),onClick:function(t){var a=new Date,n=new Date,i=a.getDay(),o=a.getTime()-e*(i-1);a.setTime(o-7*e),n.setTime(o-e),t.$emit("pick",[a,n])}},{text:this.$t("missing.thisMonth"),onClick:function(e){var t=new Date,a=t.getFullYear(),n=t.getMonth()+1,i=new Date("".concat(a,"-").concat(n,"-01")),o=new Date("".concat(a,"-").concat(n,"-01 00:00:00"));o.setMonth(o.getMonth()+1),o=new Date(o.getTime()-1e3),e.$emit("pick",[i,o])}},{text:this.$t("missing.lastMonth"),onClick:function(e){var t=new Date;t.setMonth(t.getMonth()-1);var a=t.getFullYear(),n=t.getMonth()+1,i=new Date(new Date(a,n,1)-1).getDate(),o=new Date("".concat(a,"-").concat(n,"-01")),r=new Date("".concat(a,"-").concat(n,"-").concat(i));e.$emit("pick",[o,r])}}]},pickerOptionsTime:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(e){var t=new Date(o["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),a=new Date(o["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59");e.$emit("pick",[t,a])}},{text:this.$t("reportForm.yesterDay"),onClick:function(t){var a=new Date;a.setTime(a.getTime()-e),t.$emit("pick",[new Date(o["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(o["a"].format(a,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.theWeek"),onClick:function(t){var a=new Date,n=new Date,i=a.getDay();a.setTime(a.getTime()-e*(i-1)),n.setTime(a.getTime()+6*e),t.$emit("pick",[new Date(o["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(o["a"].format(n,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastWeek"),onClick:function(t){var a=new Date,n=new Date,i=a.getDay(),r=a.getTime()-e*(i-1);a.setTime(r-7*e),n.setTime(r-e),t.$emit("pick",[new Date(o["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(o["a"].format(n,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.thisMonth"),onClick:function(e){var t=new Date,a=t.getFullYear(),n=t.getMonth()+1,i=new Date("".concat(a,"-").concat(n,"-01")),r=new Date("".concat(a,"-").concat(n,"-01 00:00:00"));r.setMonth(r.getMonth()+1),r=new Date(r.getTime()-1e3),e.$emit("pick",[new Date(o["a"].format(i,"yyyy-MM-dd")+" 00:00:00"),new Date(o["a"].format(r,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastMonth"),onClick:function(e){var t=new Date;t.setMonth(t.getMonth()-1);var a=t.getFullYear(),n=t.getMonth()+1,i=new Date(new Date(a,n,1)-1).getDate(),r=new Date("".concat(a,"-").concat(n,"-01")),s=new Date("".concat(a,"-").concat(n,"-").concat(i));e.$emit("pick",[new Date(o["a"].format(r,"yyyy-MM-dd")+" 00:00:00"),new Date(o["a"].format(s,"yyyy-MM-dd")+" 23:59:59")])}}]}}},watch:{dateRange:function(e){null==e?this.$emit("input",[]):this.$emit("input",e)},value:function(e){this.dateRange=e},date:function(e){this.$emit("input",e)},month:function(e){this.$emit("input",e)}},methods:{onChange:function(e){this.$emit("input",e)}},mounted:function(){"date"==this.dateType?this.date=this.value:"month"==this.dateType?this.month=this.value:this.dateRange=this.value}},c=s,l=(a("e716"),a("2877")),u=Object(l["a"])(c,n,i,!1,null,"5dbb8594",null);t["a"]=u.exports},"4c3c":function(e,t,a){"use strict";a("4e82");t["a"]={data:function(){return{sortConfig:{sortMethod:function(e){var t=e.data,a=e.sortList,n=a[0],i=n.property,o=n.order,r=[];return r="desc"===o?t.sort((function(e,t){var a=e[i],n=t[i];if(isNaN(a)&&!isNaN(Date.parse(a))&&isNaN(n)&&!isNaN(Date.parse(n)))return Date.parse(n)-Date.parse(a);if(a=parseFloat(a),n=parseFloat(n),isNaN(a)||isNaN(n)){var o=t[i]+"";return o.localeCompare(e[i])}return n-a})):"asc"===o?t.sort((function(e,t){var a=e[i],n=t[i];if(isNaN(a)&&!isNaN(Date.parse(a))&&isNaN(n)&&!isNaN(Date.parse(n)))return Date.parse(a)-Date.parse(n);if(a=parseFloat(e[i]),n=parseFloat(t[i]),isNaN(a)||isNaN(n)){var o=e[i]+"";return o.localeCompare(t[i])}return a-n})):t.sort(),r}}}}}},"7c4b9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"report-form full"},[t("div",{staticClass:"report-form-inner"},[t("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[t("div",{staticClass:"f_left"},[t("MultiChoiceUserGroup",{attrs:{label:e.$t("common.userGroup")},on:{onSelect:e.onSelect}})],1),t("div",{staticClass:"f_left"},[t("SelectDate",{attrs:{dateType:"date"},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleQuery}},[e._v(e._s(e.$t("common.query")))])],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{type:"primary"},on:{click:e.exportData}},[e._v(e._s(e.$t("common.export")))])],1)]),t("div",{staticClass:"report-form-inner-content",staticStyle:{top:"39px"}},[t("vxe-table",{staticClass:"mytable-scrollbar",attrs:{"sort-config":e.sortConfig,"menu-config":e.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:e.totalList},on:{"menu-click":e.handleClickTableMenu}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"username",title:e.$t("reportForm.creater"),sortable:""}}),t("vxe-table-column",{attrs:{field:"groupname",title:e.$t("reportForm.groupName"),sortable:""}}),t("vxe-table-column",{attrs:{field:"onlineCountAanTotalCount",title:e.$t("reportForm.onlineCountAanTotalCount"),sortable:""}}),t("vxe-table-column",{attrs:{field:"onlineRate",title:e.$t("reportForm.onlineRate"),sortable:""}})],1)],1)])])},i=[],o=(a("14d9"),a("a9e3"),a("b680"),a("d3b7"),a("159b"),function(){var e=this,t=e._self._c;return t("LabelWrap",{attrs:{label:e.label}},[t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClickOutside,expression:"handleClickOutside"}],staticClass:"full",staticStyle:{position:"relative"}},[t("div",{staticStyle:{overflow:"hidden"}},[t("el-input",{staticStyle:{height:"31px","line-height":"height:31px"},attrs:{placeholder:e.placeholder,clearable:""},on:{input:e.onChange},nativeOn:{click:function(t){e.show=!0}},model:{value:e.textVal,callback:function(t){e.textVal=t},expression:"textVal"}})],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"el-popover el-popper",staticStyle:{width:"240px",position:"absolute",top:"32px","z-index":"3029"},attrs:{"x-placement":"bottom"}},[t("div",{staticStyle:{height:"280px",width:"100%"}},[t("el-scrollbar",{staticStyle:{height:"100%"}},[t("ul",{staticClass:"ztree",attrs:{id:e.ztreeId}})])],1),t("div",{staticClass:"popper__arrow",staticStyle:{left:"112.5px"},attrs:{"x-arrow":""}})])])])}),r=[],s=a("5530"),c=(a("99af"),a("c975"),a("b0c0"),a("498a"),a("0139")),l=a("6e52"),u=a("c276"),d=a("cd6d"),h=a.n(d),p=a("9169"),m=a("2f62"),f=a("0d33"),g=a("7fa8"),v={name:"MultiChoiceUserGroup",props:{label:{type:String,default:""}},data:function(){return{show:!1,textVal:"",placeholder:""}},components:{LabelWrap:c["a"]},computed:Object(s["a"])(Object(s["a"])({},Object(m["b"])(["isQueryInitData"])),{},{ztreeId:function(){return"ztreeEl_".concat(this._uid)}}),directives:{Clickoutside:p["a"]},methods:{handleClickOutside:function(){this.show=!1},onChange:function(e){""==e&&this.$emit("onSelect",[]),this.searchUser(this,e)},searchUser:Object(u["e"])((function(e,t){if(0==e.show&&(e.show=!0),e.ztreeIns.destroy(),0==t.length)e.ztreeIns=$.fn.zTree.init($("#".concat(e.ztreeId)),e.setting,e.treeNodes);else{var a=e.variableDeepSearch(e.treeNodes,t.trim());e.ztreeIns=$.fn.zTree.init($("#".concat(e.ztreeId)),e.setting,a)}}),300),onTreeCheck:function(e,t,a){this.placeholder=a.name;var n=this.ztreeIns.getCheckedNodes(),i=[],o="";n.forEach((function(e){var t=e.nodeType;t==l["a"].NodeType_Group&&(o+=e.name+",",i.push({username:e.username,groupid:e.groupid,groupname:e.name}))})),o=o.substring(0,o.length-2),this.textVal=o,this.$emit("onSelect",i)},zTreeOnClick:function(e,t,a){this.ztreeIns.checkNode(a),this.onTreeCheck(e,t,a)},ininZtree:function(){var e=this.castUsersTreeToDevicesTree(l["a"].rootuser);this.treeNodes=e,this.ztreeIns=$.fn.zTree.init($("#".concat(this.ztreeId)),this.setting,e)},selectedRoot:function(){var e=this.ztreeIns.getNodes()[0];e&&(this.textVal=e.name,this.placeholder=e.name,this.ztreeIns.checkNode(e,!0,!0),this.$emit("onSelect",[{username:e.username,groupid:0,groupname:"default"}]))},variableDeepSearch:function(e,t){t=t.toLowerCase();for(var a=[],n=this,i=0;i<e.length;i++){var o=null,r=e[i];if(null!=r){var s=!1;if(-1!=r.name.toLowerCase().indexOf(t)&&(o=h()(r),o.open=!1,s=!0),0==s&&r.children&&r.children.length>0){var c=n.variableDeepSearch(r.children,t);c&&c.length>0&&(o=h()(r),o.children=c,o.open=!0,s=!0)}1==s&&a.push(o)}}return a},getDeviceListGroups:function(e,t){var a=[{groupid:0,name:this.$t("common.defaultGroup"),groupname:this.$t("common.defaultGroup"),username:t,icon:g,id:t+"_0",nodeType:l["a"].NodeType_Group}];if(e)for(var n=0;n<e.length;++n){var i=e[n],o=i.groupid>0;if(o){var r=i.groupname,s={groupid:i.groupid,name:r,groupname:r,username:t,icon:g,id:t+"_"+i.groupid,nodeType:l["a"].NodeType_Group};a.push(s)}}return a},castUsersTreeToDevicesTree:function(e){var t={name:"",icon:f,open:!0,checked:!1,nodeType:l["a"].NodeType_User};if(null!=e){var a=e.username,n=e.subusers,i=e.showname;t.name=i||a,t.username=a,t.showname=i;var o=this.getDeviceListGroups(e.groups,a);if(null!=a&&null!=n&&n.length>0){var r=this.doCastUsersTreeToDevicesTree(n);r.length>0&&(t.children=r)}var s=o.concat(t.children?t.children:[]);s.length&&(t.children=s)}return[t]},doCastUsersTreeToDevicesTree:function(e){var t=[];if(null!=e&&e.length>0)for(var a=0;a<e.length;++a){var n=e[a],i=n.username,o=n.subusers,r=n.showname,s={name:r||i,icon:f,nodeType:l["a"].NodeType_User,username:i,showname:r},c=this.getDeviceListGroups(n.groups,i);if(null!=i&&null!=o&&o.length>0){var d=this.doCastUsersTreeToDevicesTree(o);d.length>0&&(s.children=d)}var h=c.concat(s.children?s.children:[]);h.length>0&&(s.children=h),t.push(s)}return Object(u["Fb"])(t),t}},created:function(){this.setting={view:{dblClickExpand:!1},check:{enable:!0,chkStyle:"checkbox"},callback:{onCheck:this.onTreeCheck,onClick:this.zTreeOnClick}}},watch:{isQueryInitData:function(e){e&&this.ininZtree()},value:function(e){this.textVal=e.name}},mounted:function(){var e=this;this.isQueryInitData&&this.ininZtree(),this.$nextTick((function(){e.placeholder=e.$t("bgManage.editUserTitle1")}))},destroyed:function(){this.ztreeIns.destroy()}},y=v,D=(a("e504"),a("2877")),w=Object(D["a"])(y,o,r,!1,null,null,null),k=w.exports,T=k,b=a("d462"),C=a("1c31"),x=a("5101"),M=a("4c3c"),N=a("a05b"),_={name:"fleetDayOnline",data:function(){return{loading:!1,date:new Date,totalList:[]}},components:{MultiChoiceUserGroup:T,SelectDate:b["a"]},mixins:[M["a"],N["a"]],methods:{onSelect:function(e){this.userGroups=e},handleQuery:function(){var e=this,t=this.userGroups;if(0!=t.length){this.loading=!0;var a={groups:t,offset:x["a"].getOffset(),daystr:x["a"].format(this.date,"yyyy-MM-dd")};Object(C["O"])(a).then((function(t){var a=t.records;a&&a.length?(a.forEach((function(e){0==e.totalcount?(e.onlineCountAanTotalCount="0/0",e.onlineRate="0%"):(e.onlineCountAanTotalCount=e.onlinecount+"/"+e.totalcount,e.onlineRate=100*Number((e.onlinecount/e.totalcount).toFixed(2))+"%")})),e.totalList=a):e.totalList=[],e.loading=!1}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},exportData:function(){var e=[[vRoot.$t("reportForm.index"),vRoot.$t("reportForm.creater"),vRoot.$t("monitor.groupName"),vRoot.$t("reportForm.onlineCountAanTotalCount"),vRoot.$t("reportForm.onlineRate")]];this.tableData.forEach((function(t,a){var n=[];n.push(a+1),n.push(t.creater),n.push(t.groupname),n.push(t.onlineCountAanTotalCount),n.push(t.onlineRate),e.push(n)}));var t={title:vRoot.$t("reportForm.vehicleMonthOnline"),data:e,dateRange:this.queryDateRange};new ExcelCls(t).exportExcel(this)}},mounted:function(){this.userGroups=[],this.queryDateRange=null}},S=_,z=(a("96c6"),Object(D["a"])(S,n,i,!1,null,null,null)),R=z.exports;t["default"]=R},"96c6":function(e,t,a){"use strict";a("1b56")},"9c75":function(e,t,a){},d462:function(e,t,a){"use strict";var n=a("2ddc");t["a"]=n["a"]},e504:function(e,t,a){"use strict";a("9c75")},e716:function(e,t,a){"use strict";a("271ae")}}]);