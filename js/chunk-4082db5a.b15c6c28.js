(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4082db5a"],{"26c6":function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"multi-choice single-choice-vehicle",style:{width:e.width}},[e.showLabel?t("div",{staticClass:"multi-choice-label"},[e._v(" "+e._s(e.$t("common.selectDevice"))+" ")]):e._e(),t("div",{staticClass:"multi-choice-input"},[t("ZtreeDeviceDropdown",{attrs:{placeholder:e.placeholder,disableShare:e.disableShare,isQueryInitData:e.isQueryInitData},model:{value:e.deviceid,callback:function(t){e.deviceid=t},expression:"deviceid"}})],1)])},s=[],n=i("5530"),l=i("2f62"),o=i("2df7"),r={props:{value:{type:String,default:""},width:{type:String,default:"230px"},showLabel:{type:Boolean,default:!1},disableShare:{type:Boolean,default:!1},placeholder:{type:String,default:""}},name:"SingleChoiceVehicle",data:function(){return{deviceid:""}},watch:{value:function(e){e&&(this.deviceid=e)},deviceid:function(e){this.$emit("input",e)}},computed:Object(n["a"])({},Object(l["b"])(["isQueryInitData"])),components:{ZtreeDeviceDropdown:o["a"]},methods:{},mounted:function(){this.value&&(this.deviceid=this.value)}},c=r,d=(i("facb"),i("2877")),u=Object(d["a"])(c,a,s,!1,null,null,null);t["a"]=u.exports},"28f8":function(e,t,i){"use strict";i("87d5")},"2df7":function(e,t,i){"use strict";i("498a");var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ztree-device"},[t("el-popover",{attrs:{placement:"bottom",width:"320",trigger:"manual","append-to-body":!0,"popper-options":{boundariesElement:"body",gpuAcceleration:!0,positionFixed:!0,preventOverflow:!0}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClickOutside,expression:"handleClickOutside"}],staticClass:"ztree-drapdown",staticStyle:{height:"360px",width:"100%",overflow:"hidden"}},[t("el-scrollbar",{staticStyle:{height:"100%"}},[t("ul",{staticClass:"ztree",attrs:{id:e.ztreeId}})])],1),t("el-input",{attrs:{slot:"reference",placeholder:e.placeholder,"prefix-icon":"el-icon-search"},on:{input:e.onChange},nativeOn:{click:function(t){return e.handleClickInput.apply(null,arguments)}},slot:"reference",model:{value:e.textVal,callback:function(t){e.textVal="string"===typeof t?t.trim():t},expression:"textVal"}},[t("span",{staticClass:"el-input__suffix-inner",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.clearText},slot:"suffix"},[t("i",{staticClass:"el-input__icon el-icon-circle-close"})])])],1)],1)},s=[],n=i("5530"),l=(i("99af"),i("4de4"),i("c975"),i("d81d"),i("14d9"),i("b0c0"),i("d3b7"),i("159b"),i("4795"),i("cd6d")),o=i.n(l),r=i("6e52"),c=i("c276"),d=i("9169"),u=i("2f62"),p=i("0d33"),m=i("7fa8"),h={name:"ZtreeDeviceDropdown",props:{value:{type:String,default:""},isCheck:{type:Boolean,default:!1},isClickAll:{type:Boolean,default:!1},disableShare:{type:Boolean,default:!1},selectDeviceIds:{type:Array,default:function(){return[]}},isQueryInitData:{type:Boolean,default:!1},placeholder:{type:String,default:""}},directives:{Clickoutside:d["a"]},computed:Object(n["a"])(Object(n["a"])({},Object(u["b"])(["isZh"])),{},{ztreeId:function(){return"ztreeEl_".concat(this._uid)}}),data:function(){return{textVal:"",show:!1}},watch:{textVal:function(e){this.isClickAll?this.$emit("input",e):0==this.isCheck?e||this.$emit("input",""):e||this.$emit("onTreeCheck",[])},isQueryInitData:function(e){var t=this;this.$nextTick((function(){t.init()}))}},created:function(){this.ztreeIns=null,this.setting={view:{addDiyDom:this.addDiyDom,dblClickExpand:!1},check:{enable:!0,chkStyle:this.isCheck?"checkbox":"radio",radioType:"all"},callback:{onCheck:this.onTreeCheck,onClick:this.zTreeOnClick}}},mounted:function(){var e=this;this.$nextTick((function(){e.init()}))},destroyed:function(){this.ztreeIns&&this.ztreeIns.destroy()},methods:{init:function(){var e=this;if(this.isQueryInitData&&null==this.ztreeIns)if(this.initZtree(),0==this.isCheck){if(this.value){var t=r["a"].deviceInfos[this.value].devicename;this.textVal=t;var i=Object(c["hb"])(this.ztreeIns.getNodes(),this.value);i?this.ztreeIns.checkNode(i):console.log("ZtreeDeviceDropdown 没找到node this.textVal = ",this.textVal)}}else if(this.selectDeviceIds.length>0){var a=this.ztreeIns.getNodes();this.selectDeviceIds.forEach((function(t){var i=Object(c["hb"])(a,t);i&&e.ztreeIns.checkNode(i,!0)})),this.isZh?this.textVal="已选中".concat(this.selectDeviceIds.length,"个单位"):this.textVal="".concat(this.selectDeviceIds.length," is selected"),this.$emit("onTreeCheck",this.selectDeviceIds)}},handleClickInput:function(){var e=this;if(this.show=!0,0==this.isCheck){var t=r["a"].deviceInfos[this.value],i=t?t.devicename:null;if(i&&(this.textVal=i,this.ztreeIns&&this.ztreeIns.getNodes)){var a=Object(c["hb"])(this.ztreeIns.getNodes(),this.value);a&&setTimeout((function(){e.ztreeIns.selectNode(a)}),30)}}},clearText:function(){this.textVal="",this.ztreeIns&&(this.ztreeIns.destroy(),this.ztreeIns=null),this.treeNodeChildren.length&&(this.treeNodeChildren[0].open=!0),this.ztreeIns=$.fn.zTree.init($("#".concat(this.ztreeId)),this.setting,this.treeNodeChildren),this.isCheck?this.$emit("onTreeCheck",[]):this.$emit("input","")},handleClickOutside:function(){this.show=!1},searchDevice:Object(c["e"])((function(e,t){if(0==e.show&&(e.show=!0),e.ztreeIns.destroy(),0==t.length)e.treeNodeChildren.length&&(e.treeNodeChildren[0].open=!0),e.ztreeIns=$.fn.zTree.init($("#".concat(e.ztreeId)),e.setting,e.treeNodeChildren);else{t=t.trim();var i=e.variableDeepSearch(e.treeNodeChildren,t,0);e.ztreeIns=$.fn.zTree.init($("#".concat(e.ztreeId)),e.setting,i)}}),300),variableDeepSearch:function(e,t,i){t=t.toLowerCase();for(var a=[],s=this,n=0;n<e.length;n++){var l=null,r=e[n];if(null!=r){var c=!1;if((-1!=r.name.toLowerCase().indexOf(t)||r.showname&&-1!=r.showname.toLowerCase().indexOf(t)||r.deviceid&&-1!=r.deviceid.toLowerCase().indexOf(t)||r.simiccid&&-1!=r.simiccid.toLowerCase().indexOf(t)||r.loginname&&-1!=r.loginname.toLowerCase().indexOf(t)||r.remark&&-1!=r.remark.toLowerCase().indexOf(t)||r.remark2&&-1!=r.remark2.toLowerCase().indexOf(t)||r.simiccid&&-1!=r.simiccid.toLowerCase().indexOf(t)||r.simnum&&-1!=r.simnum.toLowerCase().indexOf(t))&&(l=r,l.open=!1,c=!0),0==c&&r.children&&r.children.length>0){var d=s.variableDeepSearch(r.children,t,i);d&&d.length>0&&(l=o()(r),l.children=d,l.open=!0,c=!0)}if(1==c&&(i++,a.push(l),i>1e3))break}}return a},onChange:function(e){this.searchDevice(this,e)},getCheckedDeviceIds:function(){var e=this.ztreeIns.getCheckedNodes(),t=[];return e.forEach((function(e){var i=e.deviceid;void 0!=i&&t.push(i)})),t},initZtree:function(){var e=this.castUsersTreeToDevicesTree(r["a"].rootuser);this.isCheck?this.treeNodeChildren=[e]:e.children&&e.children.length?this.treeNodeChildren=e.children:this.treeNodeChildren=[],this.ztreeIns=$.fn.zTree.init($("#".concat(this.ztreeId)),this.setting,this.treeNodeChildren)},addDiyDom:function(e,t){var i=$("#"+t.tId+"_check"),a=$("#"+t.tId+"_ico");a.remove(),i.before(a)},selectNode:function(e){var t=this;if(0==this.isCheck){var i=r["a"].deviceInfos[e],a=i?i.devicename:null;if(a&&(this.textVal=a,this.$emit("input",e),this.ztreeIns&&this.ztreeIns.getNodes)){var s=Object(c["hb"])(this.ztreeIns.getNodes(),this.value);s&&setTimeout((function(){t.ztreeIns.selectNode(s)}),30)}}},onTreeCheck:function(e,t,i){var a=this.ztreeIns.getCheckedNodes();if(this.isClickAll){var s=i.nodeType;if(s==r["a"].NodeType_User)this.textVal=i.username,this.$emit("input",this.textVal);else if(s==r["a"].NodeType_Group)this.textVal=i.groupname,this.$emit("input",this.textVal);else{var n=i.deviceid,l=r["a"].deviceInfos[n].devicename;this.textVal=l,this.$emit("input",n)}}else if(0==a.length)this.textVal="";else if(this.isCheck){var o=a.filter((function(e){return void 0==e.children})).map((function(e){return e.deviceid}));this.isZh?this.textVal="已选中".concat(o.length,"个单位"):this.textVal="".concat(o.length," is selected"),this.$emit("onTreeCheck",o)}else if(i.deviceid){var c=i.deviceid,d=r["a"].deviceInfos[c].devicename;this.textVal=d,this.$emit("input",c),this.show=!1}},zTreeOnClick:function(e,t,i){$("#"+i.tId+"_switch").click(),i.nodeType!=r["a"].NodeType_Device_Normal&&i.nodeType!=r["a"].NodeType_Device_Video||(this.ztreeIns.checkNode(i,!i.checked,!0),this.onTreeCheck(e,t,i))},castUsersTreeToDevicesTree:function(e){var t=this,i={name:"空",children:[],open:!0,icon:p,nodeType:r["a"].NodeType_User,nocheck:!this.isCheck};if(e){var a=e.username,s=e.subusers;i.name=a,i.username=a,i.id=a;var n=Object(c["o"])(e.groups),l=Object(c["E"])(n,e.groups,s),o=null;null!=n&&(o=e.groups[n]);var d=this.getDeviceListGroups(e.groups,a,l);if(null!=a&&null!=s&&s.length>0){var u=this.doCastUsersTreeToDevicesTree(s);i.children=d.concat(u)}else i.children=d;i.children.forEach((function(e){e.nocheck=!t.isCheck})),Object(c["Gb"])(i.children);var m=0,h=0;if(0==l&&o&&o.devices.length){var v=this.$dateformat.getCurrentUTC(),g=r["a"].lastPositions;o.devices.forEach((function(e){if(e){m++;var t=Object(c["F"])(g[e.deviceid],v);t&&h++;var a=Object(c["t"])(e,t,v);i.children.push(a)}})),Object(c["Fb"])(i.children)}if(i.children)for(var f=0;f<i.children.length;++f){var b=i.children[f];void 0!=b.totalCount&&(m+=b.totalCount,h+=b.onlineCount)}i.totalCount=m,i.name+="("+h+"/"+m+")"}return i},doCastUsersTreeToDevicesTree:function(e){var t=this,i=[];if(null!=e&&e.length>0)for(var a,s,n,l,o,d,u,m,h,v,g,f,b,x=function(){if(a=e[y],s=a.username,n=a.subusers,l=a.showname,o=0,d={name:l||s,username:s,showname:l,icon:p,nodeType:r["a"].NodeType_User},u=Object(c["o"])(a.groups),m=Object(c["E"])(u,i.groups,n),h=null,null!=u&&(h=a.groups[u]),v=t.getDeviceListGroups(a.groups,s,m),v.forEach((function(e){o+=e.onlineCount})),null!=s&&null!=n&&n.length>0?(g=t.doCastUsersTreeToDevicesTree(n),g.forEach((function(e){o+=e.onlineCount})),g=v.concat(g),d.children=g):d.children=v,Object(c["Gb"])(d.children),d.children.forEach((function(e){e.nocheck=!t.isCheck})),0==m&&h&&h.devices.length){var x=t.$dateformat.getCurrentUTC(),w=r["a"].lastPositions;h.devices.forEach((function(e){if(e){var t=Object(c["F"])(w[e.deviceid],x);t&&o++;var i=Object(c["t"])(e,t,x);d.children.push(i)}})),Object(c["Fb"])(d.children)}if(f=0,d.children)for(b=0;b<d.children.length;++b){var C=d.children[b];void 0!=C.totalCount?f+=C.totalCount:f++}d.totalCount=f,d.onlineCount=o,d.name+="("+o+"/"+f+")",i.push(d)},y=0;y<e.length;++y)x();return i},getDeviceListGroups:function(e,t,i){var a=[],s=r["a"].lastPositions,n=this.$t("common.defaultGroup");if(e)for(var l=this.$dateformat.getCurrentUTC(),o=0;o<e.length;++o){var d=e[o],u=(void 0===d.shared||d.shared,d.groupid>0);if(i||u){var p=u?d.groupname:n,h=__pinyin.get(p),v=h.l,g=h.p,f={groupid:d.groupid,name:p,label:p,groupname:p,icon:m,username:t,nodeType:r["a"].NodeType_Group,l:v,p:g,status:""},b=0;if(d.devices&&(f.totalCount=d.devices.length,f.children=[],d.devices.forEach((function(e){if(e){var t=Object(c["F"])(s[e.deviceid],l);t&&b++;var i=Object(c["t"])(e,t,l);f.children.push(i)}})),Object(c["Fb"])(f.children)),f.onlineCount=b,f.name+="("+b+"/"+d.devices.length+")",f.label+="(".concat(f.children.length,")"),u){if(this.disableShare&&1==d.shared)continue;a.push(f)}else f.children.length&&a.push(f)}}return a}}},v=h,g=(i("eca4"),i("2877")),f=Object(g["a"])(v,a,s,!1,null,"98b76e1e",null),b=f.exports;t["a"]=b},"4c3c":function(e,t,i){"use strict";i("4e82");t["a"]={data:function(){return{sortConfig:{sortMethod:function(e){var t=e.data,i=e.sortList,a=i[0],s=a.property,n=a.order,l=[];return l="desc"===n?t.sort((function(e,t){var i=e[s],a=t[s];if(isNaN(i)&&!isNaN(Date.parse(i))&&isNaN(a)&&!isNaN(Date.parse(a)))return Date.parse(a)-Date.parse(i);if(i=parseFloat(i),a=parseFloat(a),isNaN(i)||isNaN(a)){var n=t[s]+"";return n.localeCompare(e[s])}return a-i})):"asc"===n?t.sort((function(e,t){var i=e[s],a=t[s];if(isNaN(i)&&!isNaN(Date.parse(i))&&isNaN(a)&&!isNaN(Date.parse(a)))return Date.parse(i)-Date.parse(a);if(i=parseFloat(e[s]),a=parseFloat(t[s]),isNaN(i)||isNaN(a)){var n=e[s]+"";return n.localeCompare(t[s])}return i-a})):t.sort(),l}}}}}},"4d3b":function(e,t,i){"use strict";var a=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,center:"",visible:e.value,width:"760px","append-to-body":"","close-on-click-modal":!1},on:{close:e.handleClose}},[t("div",{staticClass:"temp-marking noselect"},[t("el-row",{staticClass:"temp-marking-header",attrs:{gutter:10}},[t("el-col",{staticClass:"my-switch",attrs:{span:15}},[t("span",{domProps:{textContent:e._s(e.$t("device.overtempAlarm"))}}),t("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#C0C4CC"},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}}),t("span",{staticStyle:{margin:"0px 5px"}},[e._v(e._s(e.isOpen?e.$t("device.open"):e.$t("device.close")))])],1),t("el-col",{attrs:{span:6}},[t("SingleChoiceVehicle",{attrs:{placeholder:this.$t("tips.selectSingleDevice"),width:"180px"},model:{value:e.selectDeviceid,callback:function(t){e.selectDeviceid=t},expression:"selectDeviceid"}})],1),t("el-col",{attrs:{span:3}},[t("el-button",{attrs:{type:"primary"},on:{click:e.onCopyOtherDevice}},[e._v(e._s(e.$t("device.copy")))])],1)],1),t("div",{staticClass:"temp-marking-row"},[t("div",{staticClass:"temp-index",domProps:{textContent:e._s(e.$t("device.way1"))}}),t("div",{domProps:{textContent:e._s(e.$t("device.maxTemp"))}}),t("div",{staticClass:"temp-input"},[t("el-input",{model:{value:e.highest1,callback:function(t){e.highest1=t},expression:"highest1"}},[t("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("℃")])])],1),t("div",{domProps:{textContent:e._s(e.$t("device.minTemp"))}}),t("div",{staticClass:"temp-input"},[t("el-input",{model:{value:e.lowest1,callback:function(t){e.lowest1=t},expression:"lowest1"}},[t("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("℃")])])],1),t("div",{domProps:{textContent:e._s(e.$t("device.exceedAndContinue"))}}),t("div",{staticClass:"temp-input"},[t("el-input",{model:{value:e.duration1,callback:function(t){e.duration1=e._n(t)},expression:"duration1"}},[t("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("S")])])],1),t("div",{domProps:{textContent:e._s(e.$t("device.rearAlarm"))}})]),t("div",{staticClass:"temp-marking-row"},[t("div",{staticClass:"temp-index",domProps:{textContent:e._s(e.$t("device.way2"))}}),t("div",{domProps:{textContent:e._s(e.$t("device.maxTemp"))}}),t("div",{staticClass:"temp-input"},[t("el-input",{model:{value:e.highest2,callback:function(t){e.highest2=t},expression:"highest2"}},[t("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("℃")])])],1),t("div",{domProps:{textContent:e._s(e.$t("device.minTemp"))}}),t("div",{staticClass:"temp-input"},[t("el-input",{model:{value:e.lowest2,callback:function(t){e.lowest2=t},expression:"lowest2"}},[t("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("℃")])])],1),t("div",{domProps:{textContent:e._s(e.$t("device.exceedAndContinue"))}}),t("div",{staticClass:"temp-input"},[t("el-input",{model:{value:e.duration2,callback:function(t){e.duration2=e._n(t)},expression:"duration2"}},[t("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("S")])])],1),t("div",{domProps:{textContent:e._s(e.$t("device.rearAlarm"))}})]),t("div",{staticClass:"temp-marking-row"},[t("div",{staticClass:"temp-index",domProps:{textContent:e._s(e.$t("device.way3"))}}),t("div",{domProps:{textContent:e._s(e.$t("device.maxTemp"))}}),t("div",{staticClass:"temp-input"},[t("el-input",{model:{value:e.highest3,callback:function(t){e.highest3=t},expression:"highest3"}},[t("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("℃")])])],1),t("div",{domProps:{textContent:e._s(e.$t("device.minTemp"))}}),t("div",{staticClass:"temp-input"},[t("el-input",{model:{value:e.lowest3,callback:function(t){e.lowest3=t},expression:"lowest3"}},[t("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("℃")])])],1),t("div",{domProps:{textContent:e._s(e.$t("device.exceedAndContinue"))}}),t("div",{staticClass:"temp-input"},[t("el-input",{model:{value:e.duration3,callback:function(t){e.duration3=e._n(t)},expression:"duration3"}},[t("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("S")])])],1),t("div",{domProps:{textContent:e._s(e.$t("device.rearAlarm"))}})]),t("div",{staticClass:"temp-marking-row"},[t("div",{staticClass:"temp-index",domProps:{textContent:e._s(e.$t("device.way4"))}}),t("div",{domProps:{textContent:e._s(e.$t("device.maxTemp"))}}),t("div",{staticClass:"temp-input"},[t("el-input",{model:{value:e.highest4,callback:function(t){e.highest4=t},expression:"highest4"}},[t("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("℃")])])],1),t("div",{domProps:{textContent:e._s(e.$t("device.minTemp"))}}),t("div",{staticClass:"temp-input"},[t("el-input",{model:{value:e.lowest4,callback:function(t){e.lowest4=t},expression:"lowest4"}},[t("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("℃")])])],1),t("div",{domProps:{textContent:e._s(e.$t("device.exceedAndContinue"))}}),t("div",{staticClass:"temp-input"},[t("el-input",{model:{value:e.duration4,callback:function(t){e.duration4=e._n(t)},expression:"duration4"}},[t("span",{attrs:{slot:"suffix"},slot:"suffix"},[e._v("S")])])],1),t("div",{domProps:{textContent:e._s(e.$t("device.rearAlarm"))}})]),t("div",{staticStyle:{"text-align":"center","font-size":"12px",width:"250px",margin:"0px auto"}},[t("el-alert",{attrs:{title:e.$t("device.lastSetTime")+":"+e.lastchangetimeStr,type:"warning",closable:!1}})],1)],1),t("div",{staticStyle:{"text-align":"center",height:"60px","padding-top":"20px"}},[t("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",loading:e.loading},on:{click:e.saveTempHumiDetectors}},[e._v(e._s(e.$t("common.determine")))])],1)])},s=[],n=(i("99af"),i("14d9"),i("d3b7"),i("159b"),i("d03a")),l=i("e285"),o=i("5101"),r={name:"TempMarkingDialog",props:{value:{type:Boolean,default:!1},deviceid:{type:String,default:""},deviceName:{type:String,default:""},isBatch:{type:Boolean,default:!1}},data:function(){return{loading:!1,isOpen:!1,lowest1:"",highest1:"",duration1:"",lowest2:"",highest2:"",duration2:"",lowest3:"",highest3:"",duration3:"",lowest4:"",highest4:"",duration4:"",lastchangetimeStr:"",selectDeviceid:""}},watch:{value:function(e){e?this.queryTempHumiDetectors(this.deviceid):(this.isOpen=!1,this.lowest1="",this.highest1="",this.duration1="",this.lowest2="",this.highest2="",this.duration2="",this.lowest3="",this.highest3="",this.duration3="",this.lowest4="",this.highest4="",this.duration4="")}},components:{SingleChoiceVehicle:n["a"]},computed:{title:function(){return this.isBatch?"".concat(this.$t("device.overTemperatureSetting")):"".concat(this.$t("device.overTemperatureSetting")," - ").concat(this.deviceName)}},methods:{handleClose:function(){this.$emit("input",!1)},onCopyOtherDevice:function(){this.selectDeviceid&&this.queryTempHumiDetectors(this.selectDeviceid)},queryTempHumiDetectors:function(e){var t=this;Object(l["Pb"])(e).then((function(e){var i=e.status,a=e.temphumidetectorsetting;if(0==i){t.isOpen=1==a.temphumialarmstatus,t.lastchangetimeStr=0==a.lastchangetime?"-":o["a"].longToLocalDateTimeStr(a.lastchangetime);var s=a.temphumidetectors;s&&s.forEach((function(e,i){0==i?(t.lowest1=999999!=e.lowest?e.lowest/100:"",t.highest1=999999!=e.highest?e.highest/100:"",t.duration1=e.duration):1==i?(t.lowest2=999999!=e.lowest?e.lowest/100:"",t.highest2=999999!=e.highest?e.highest/100:"",t.duration2=e.duration):2==i?(t.lowest3=999999!=e.lowest?e.lowest/100:"",t.highest3=999999!=e.highest?e.highest/100:"",t.duration3=e.duration):3==i&&(t.lowest4=999999!=e.lowest?e.lowest/100:"",t.highest4=999999!=e.highest?e.highest/100:"",t.duration4=e.duration)}))}}))},saveTempHumiDetectors:function(){var e=this,t=this,i=this.lowest1,a=this.highest1,s=this.duration1,n=this.lowest2,r=this.highest2,c=this.duration2,d=this.lowest3,u=this.highest3,p=this.duration3,m=this.lowest4,h=this.highest4,v=this.duration4;""==i||isNaN(i)?i=999999:i*=100,""==n||isNaN(n)?n=999999:n*=100,""==d||isNaN(d)?d=999999:d*=100,""==m||isNaN(m)?m=999999:m*=100,""==a||isNaN(a)?a=999999:a*=100,""==r||isNaN(r)?r=999999:r*=100,""==u||isNaN(u)?u=999999:u*=100,""==h||isNaN(h)?h=999999:h*=100;var g=[];if(g.push({lowest:i,highest:a,duration:s}),g.push({lowest:n,highest:r,duration:c}),g.push({lowest:d,highest:u,duration:p}),g.push({lowest:m,highest:h,duration:v}),this.isBatch){var f={temphumidetectorsetting:{temphumialarmstatus:this.isOpen?1:0,temphumidetectors:g}};this.$emit("onSetHumiture",f)}else{var b={deviceid:this.deviceid,temphumidetectorsetting:{temphumialarmstatus:this.isOpen?1:0,temphumidetectors:g}};this.loading=!0,Object(l["kc"])(b).then((function(i){var a=i.status,s=i.temphumidetectorsetting;e.loading=!1,0==a?(t.lastchangetimeStr=o["a"].longToLocalDateTimeStr(s.lastchangetime),t.$XModal.message({message:t.$t("tips.setSucc"),status:"success",zIndex:9999})):t.$XModal.message({message:t.$t("tips.setFail"),status:"error",zIndex:9999})}))}}}},c=r,d=(i("8a52"),i("2877")),u=Object(d["a"])(c,a,s,!1,null,null,null),p=u.exports;t["a"]=p},"522f":function(e,t,i){},72762:function(e,t,i){},"87d5":function(e,t,i){},"8a52":function(e,t,i){"use strict";i("72762")},"8ac1":function(e,t,i){"use strict";i("ec62")},"8c2f":function(e,t,i){"use strict";i("522f")},"927b":function(e,t,i){"use strict";i.r(t);var a=i("ade3"),s=(i("c975"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"query-device full"},[t("div",{staticClass:"query-device-header"},[t("div",{staticClass:"f_left",staticStyle:{width:"210px"}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.queryDevice"),showLabel:!1}},[t("ZtreeDeviceDropdown",{attrs:{placeholder:this.$t("tips.selectSingleDevice"),isQueryInitData:e.isQueryInitData,isClickAll:!0},model:{value:e.queryText,callback:function(t){e.queryText=t},expression:"queryText"}})],1)],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handleClickQuery}},[e._v(e._s(e.$t("common.query")))])],1),t("div",{staticClass:"f_right",staticStyle:{"padding-top":"3px"}},[t("el-button",{staticStyle:{position:"relative",top:"-1px"},attrs:{type:"info",size:"mini",loading:e.exportAllLoading},on:{click:e.exportDataAll}},[e._v(e._s(e.$t("device.exportAllDevice")))])],1),t("div",{staticClass:"f_right",staticStyle:{"padding-top":"3px"}},[t("el-button",{staticStyle:{position:"relative",top:"-1px"},attrs:{type:"info",size:"mini",loading:e.exportLoading},on:{click:e.exportData}},[e._v(e._s(e.$t("device.exportCurrentDevice")))])],1),t("div",{staticClass:"f_right"},[t("el-radio",{attrs:{label:"-1"},model:{value:e.queryType,callback:function(t){e.queryType=t},expression:"queryType"}},[e._v(e._s(e.$t("device.expired"))),"-1"==e.queryType?t("span",[e._v("("+e._s(e.totalcount)+")")]):e._e()])],1),t("div",{staticClass:"f_right"},[t("el-radio",{attrs:{label:"60"},model:{value:e.queryType,callback:function(t){e.queryType=t},expression:"queryType"}},[e._v(e._s(e.$t("device.daysOverdue60"))),"60"==e.queryType?t("span",[e._v("("+e._s(e.totalcount)+")")]):e._e()])],1),t("div",{staticClass:"f_right"},[t("el-radio",{attrs:{label:"7"},model:{value:e.queryType,callback:function(t){e.queryType=t},expression:"queryType"}},[e._v(e._s(e.$t("device.daysOverdue7"))),"7"==e.queryType?t("span",[e._v("("+e._s(e.totalcount)+")")]):e._e()])],1),t("div",{staticClass:"f_right",staticStyle:{width:"auto"}},[t("el-radio",{attrs:{label:"0"},model:{value:e.queryType,callback:function(t){e.queryType=t},expression:"queryType"}},[e._v(e._s(e.$t("device.allDevice"))),"0"==e.queryType?t("span",[e._v("("+e._s(e.totalcount)+")")]):e._e()])],1)]),t("div",{staticClass:"query-device-content",staticStyle:{top:"39px"}},[t("vxe-table",{ref:"xTable",attrs:{"sort-config":e.sortConfig,"menu-config":e.tableMenu,border:"","auto-resize":"",resizable:"","show-overflow":"","highlight-current-row":"",size:"mini",height:"auto",data:e.tableList},on:{"menu-click":e.handleClickTableMenu,"current-change":e.currentChangeEvent,"cell-dblclick":e.cellDblclick}},[t("vxe-table-column",{attrs:{title:e.$t("reportForm.action"),width:"100",fixed:"left"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticStyle:{"padding-top":"7px"}},[t("span",{staticStyle:{padding:"0px 11px 0px 0px"}},[t("img",{staticStyle:{width:"17px",cursor:"pointer"},attrs:{src:e.editIcon},on:{click:function(t){return e.handleEdit(i)}}})]),e.isDeleteDevicePermission?t("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-info","icon-color":"red","confirm-button-text":e.$t("common.confirm"),"cancel-button-text":e.$t("common.cancel"),title:e.$t("tips.confirmDelete")},on:{confirm:function(t){return e.handleDelete(i)}}},[t("span",{attrs:{slot:"reference"},slot:"reference"},[t("img",{staticStyle:{width:"16px",cursor:"pointer"},attrs:{src:e.deleteIcon}})])]):e._e(),t("el-dropdown",{attrs:{trigger:"click",size:"mini"},on:{command:e.onCommand}},[t("span",{staticStyle:{padding:"0px 10px",position:"relative",top:"1px"}},[t("img",{staticStyle:{width:"18px",cursor:"pointer"},attrs:{src:e.moreIcon}})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"oil"}},[e._v(e._s(e.$t("device.oilMarking")))]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"weight"}},[e._v(e._s(e.$t("device.weightMarking")))]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"temp"}},[e._v(e._s(e.$t("device.overTemperatureSetting")))]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"io"}},[e._v(e._s(e.$t("device.ioConfig")))]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"password"}},[e._v(e._s(e.$t("common.resetPassword")))]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"records"}},[e._v(e._s(e.$t("bgManage.renew")))]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"bindUsers"}},[e._v(e._s(e.$t("device.viewBindList")))]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"cleanPosi"}},[e._v(e._s(e.$t("device.clearLocation")))]),e.userType<2?t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"cleanRecord"}},[e._v(e._s(e.$t("device.clearTrack")))]):e._e(),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"replaceDevice"}},[e._v(e._s(e.$t("device.replaceDevice")))]),e.permissionList.indexOf("monitor-viewsimdetail")>-1?t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"simDetails"}},[e._v(e._s(e.$t("common.simDetail")))]):e._e()],1)],1)],1)]}}])}),t("vxe-table-column",{attrs:{type:"seq",fixed:"left",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"devicename",sortable:"",fixed:"left",width:"140",title:e.$t("alarm.devName")}}),t("vxe-table-column",{attrs:{field:"deviceid",sortable:"",width:"140",title:e.$t("alarm.devNum")}}),t("vxe-table-column",{attrs:{field:"deviceType",sortable:"",title:e.$t("reportForm.deviceType"),width:"90"}}),t("vxe-table-column",{attrs:{field:"creater",sortable:"",title:e.$t("reportForm.creater"),width:"130"}}),t("vxe-table-column",{attrs:{field:"groupName",sortable:"",title:e.$t("reportForm.groupName"),width:"110"}}),t("vxe-table-column",{attrs:Object(a["a"])({field:"simiccid",sortable:"",title:"ICCID",width:"160"},"sortable","")}),t("vxe-table-column",{attrs:Object(a["a"])({field:"simnum",sortable:"",title:e.$t("reportForm.sim"),width:"130"},"sortable","")}),t("vxe-table-column",{attrs:Object(a["a"])({field:"addTime",sortable:"",title:e.$t("reportForm.addTime"),width:"110"},"sortable","")}),t("vxe-table-column",{attrs:Object(a["a"])({field:"firstLocTime",sortable:"",title:e.$t("reportForm.firstLocTime"),width:"110"},"sortable","")}),t("vxe-table-column",{attrs:Object(a["a"])({field:"installtimeStr",sortable:"",title:e.$t("reportForm.installTime"),width:"110"},"sortable","")}),t("vxe-table-column",{attrs:Object(a["a"])({field:"expireTime",sortable:"",title:e.$t("alarm.expireTime"),width:"110"},"sortable","")}),t("vxe-table-column",{attrs:Object(a["a"])({field:"alarmactionStr",sortable:"",title:e.$t("bgManage.alarmAction"),width:"100"},"sortable","")}),t("vxe-table-column",{attrs:Object(a["a"])({field:"loginenableStr",sortable:"",title:e.$t("login.logining"),width:"100"},"sortable","")}),t("vxe-table-column",{attrs:Object(a["a"])({field:"distanceratio",sortable:"",title:e.$t("bgManage.mileageRatio"),width:"100"},"sortable","")}),e.userType<2?t("vxe-table-column",{attrs:{field:"remark",sortable:"",title:e.$t("reportForm.remarks"),width:"200"}}):t("vxe-table-column",{attrs:{field:"remark2",sortable:"",title:e.$t("reportForm.remarks"),width:"200"}}),t("vxe-table-column",{attrs:{field:"packagesStr",sortable:"",title:e.$t("systemManage.packages"),width:"200"}}),t("vxe-table-column",{attrs:{field:"monitor",sortable:"",title:e.$t("device.tutelageUser"),width:"120"}}),t("vxe-table-column",{attrs:{field:"bindpwd",sortable:"",title:e.$t("reportForm.bindPwd"),width:"120"}}),t("vxe-table-column",{attrs:{field:"vin",sortable:"",title:e.$t("reportForm.vinno"),width:"120"}})],1)],1),t("div",{staticStyle:{position:"absolute",left:"0px",right:"10px",bottom:"0px"}},[t("el-pagination",{attrs:{currentPage:e.currentPage,"current-page":e.currentChangePage,"page-sizes":[20,40,60,80],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalcount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),t("RecordsDialog",{attrs:{deviceid:e.deviceid,deviceName:e.deviceName},model:{value:e.recordsDialog,callback:function(t){e.recordsDialog=t},expression:"recordsDialog"}}),t("OilMarkingDialog",{attrs:{deviceid:e.deviceid,deviceName:e.deviceName},model:{value:e.oilMarkDiglog,callback:function(t){e.oilMarkDiglog=t},expression:"oilMarkDiglog"}}),t("EditDevice",{attrs:{deviceid:e.deviceid,info:e.currentRow},on:{editSucc:e.onEditSucc},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}}),t("WeightMarkingDialog",{attrs:{deviceid:e.deviceid,deviceName:e.deviceName},model:{value:e.weightDialog,callback:function(t){e.weightDialog=t},expression:"weightDialog"}}),t("IoMarkingDialog",{attrs:{deviceid:e.deviceid,deviceName:e.deviceName},model:{value:e.ioDialog,callback:function(t){e.ioDialog=t},expression:"ioDialog"}}),t("TempMarkingDialog",{attrs:{deviceid:e.deviceid,deviceName:e.deviceName},model:{value:e.tempDialog,callback:function(t){e.tempDialog=t},expression:"tempDialog"}}),t("ReplaceDeviceDialog",{attrs:{deviceid:e.deviceid,deviceName:e.deviceName},model:{value:e.replaceDialog,callback:function(t){e.replaceDialog=t},expression:"replaceDialog"}}),t("BindUsersDialog",{attrs:{deviceid:e.deviceid},model:{value:e.bindUsersDialog,callback:function(t){e.bindUsersDialog=t},expression:"bindUsersDialog"}})],1)}),n=[],l=i("5530"),o=(i("14d9"),i("a9e3"),i("d3b7"),i("159b"),i("0139")),r=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,center:"",visible:e.value,width:"860px","append-to-body":"","close-on-click-modal":!1},on:{close:e.handleClose}},[t("vxe-table",{attrs:{border:"",resizable:"","show-overflow":"",size:"mini",height:"420",data:e.tableList}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"devicename",title:e.$t("alarm.devName")}}),t("vxe-table-column",{attrs:{field:"deviceid",title:e.$t("alarm.devNum")}}),t("vxe-table-column",{attrs:{field:"deviceType",title:e.$t("reportForm.deviceType"),width:"100"}}),t("vxe-table-column",{attrs:{field:"chargeyears",title:e.$t("device.renewalYears")}}),t("vxe-table-column",{attrs:{field:"chargetimeStr",title:e.$t("device.rechargeTime")}}),t("vxe-table-column",{attrs:{field:"postoverduetimeStr",title:e.$t("device.beforeRecharging")}}),t("vxe-table-column",{attrs:{field:"preoverduetimeStr",title:e.$t("device.afterRecharging")}})],1)],1)},c=[],d=(i("99af"),i("2f62")),u=i("e285"),p=i("6e52"),m=i("5101"),h={name:"RecordsDialog",props:{value:{type:!1,default:!1},deviceid:{type:String,default:""},deviceName:{type:String,default:""}},data:function(){return{tableList:[]}},computed:Object(l["a"])(Object(l["a"])({},Object(d["b"])(["deviceTypes"])),{},{title:function(){return"".concat(this.$t("bgManage.renew")," - ").concat(this.deviceName)}}),watch:{value:function(e){e?this.queryChargeDeviceRecords(this.deviceid):this.tableList=[]}},methods:{handleClose:function(){this.$emit("input",!1)},queryChargeDeviceRecords:function(e){var t=this,i=this.deviceTypes;Object(u["hb"])(e).then((function(a){var s=a.records;s.forEach((function(t){t.devicename=p["a"].getDeviceNameByDeviceId(e),t.deviceType=i[t.devicetype].typename,t.postoverduetimeStr=0==t.preoverduetime?"-":m["a"].format(new Date(t.preoverduetime),"yyyy-MM-dd"),t.preoverduetimeStr=0==t.postoverduetime?"-":m["a"].format(new Date(t.postoverduetime),"yyyy-MM-dd"),t.chargetimeStr=0==t.chargetime?"-":m["a"].format(new Date(t.chargetime),"yyyy-MM-dd")})),t.tableList=s}))}}},v=h,g=i("2877"),f=Object(g["a"])(v,r,c,!1,null,null,null),b=f.exports,x=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,center:"",visible:e.value,width:"760px","append-to-body":"","close-on-click-modal":!1},on:{close:e.handleClose}},[t("div",{staticClass:"oil-marking-tabs",staticStyle:{width:"100%"}},[t("el-tabs",{attrs:{type:"card"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:e.$t("device.tank1"),name:"0"}}),t("el-tab-pane",{attrs:{label:e.$t("device.tank2"),name:"1"}}),t("el-tab-pane",{attrs:{label:e.$t("device.tank3"),name:"2"}}),t("el-tab-pane",{attrs:{label:e.$t("device.tank4"),name:"3"}})],1),t("div",{staticStyle:{"border-left":"1px solid #C4BCBC","border-right":"1px solid #C4BCBC","border-bottom":"1px solid #C4BCBC","margin-top":"10px","border-top":"1px solid #C4BCBC"}},e._l(e.oilDetectors,(function(i,a){return t("div",[a==e.activeName?t("div",[t("OilMarkingItem",{attrs:{item:i,deviceid:e.deviceid}})],1):e._e()])})),0)],1),t("el-row",{staticClass:"margin_b10"},[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"oil-marking-checkbox",staticStyle:{height:"40px","line-height":"40px"}},[t("el-checkbox",{model:{value:e.travelOil,callback:function(t){e.travelOil=t},expression:"travelOil"}},[e._v(e._s(e.$t("device.mergeStatistical")))]),t("el-checkbox",{model:{value:e.noTravelOil,callback:function(t){e.noTravelOil=t},expression:"noTravelOil"}},[e._v(e._s(e.$t("device.notRunOilMergeStatistical")))])],1)]),t("el-col",{attrs:{span:1,offset:11}},[t("div",{staticStyle:{"padding-top":"8px",float:"right",cursor:"pointer"}},[t("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.onCommand}},[t("img",{attrs:{src:e.icon1,width:"14px"}}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"save"}},[t("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:e.icon2,width:"16px"}}),t("span",{staticStyle:{"font-size":"12px",position:"relative",top:"1px"}},[e._v(e._s(e.$t("device.saveTemplate")))])]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"import"}},[t("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:e.icon3,width:"16px"}}),t("span",{staticStyle:{"font-size":"12px",position:"relative",top:"1px"}},[e._v(e._s(e.$t("device.ImportFromTemplate")))])])],1)],1)],1)])],1),t("el-row",{staticClass:"margin_b10",staticStyle:{height:"60px","padding-top":"20px"}},[t("el-col",{staticStyle:{"text-align":"center"},attrs:{span:8,offset:8}},[t("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary",loading:e.loading},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("common.determine")))])],1)],1),t("el-dialog",{attrs:{title:e.$t("device.addTempInfo"),visible:e.saveTemp,"close-on-click-modal":!1,center:"",width:"360px","append-to-body":!0},on:{"update:visible":function(t){e.saveTemp=t},close:function(t){e.saveTemp=!1}}},[t("div",{staticStyle:{width:"320px",margin:"0 auto"}},[t("el-row",{staticClass:"margin_b10",staticStyle:{"margin-bottom":"20px"}},[t("el-col",{attrs:{span:24}},[t("LabelWrap",{attrs:{label:e.$t("device.templateInfo")}},[t("el-input",{attrs:{placeholder:e.$t("device.inputTemplateInfo")},model:{value:e.templatename,callback:function(t){e.templatename=t},expression:"templatename"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10",staticStyle:{"margin-bottom":"20px"}},[t("el-col",{attrs:{span:24}},[t("LabelWrap",{attrs:{label:e.$t("device.oilRodBrand")}},[t("el-input",{attrs:{placeholder:e.$t("device.inputBrandOil")},model:{value:e.brand,callback:function(t){e.brand=t},expression:"brand"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10",staticStyle:{"margin-bottom":"20px"}},[t("el-col",{attrs:{span:24}},[t("LabelWrap",{attrs:{label:e.$t("device.OilRodModel")}},[t("el-input",{attrs:{placeholder:e.$t("device.inputBrandOilType")},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10",staticStyle:{"margin-top":"30px"}},[t("el-col",{staticStyle:{"text-align":"center"},attrs:{span:24}},[t("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.saveOilDetectorTemplate}},[e._v(e._s(e.$t("common.save")))])],1)],1)],1)]),t("el-dialog",{attrs:{title:e.$t("device.saveTemplate"),visible:e.importTemp,"close-on-click-modal":!1,center:"",width:"680px","append-to-body":!0},on:{"update:visible":function(t){e.importTemp=t},close:function(t){e.importTemp=!1}}},[t("div",{staticStyle:{width:"100%"}},[t("el-row",{staticClass:"margin_b10"},[t("el-col",{attrs:{span:8}},[t("LabelWrap",{attrs:{label:e.$t("common.exactQuery")}},[t("el-input",{attrs:{placeholder:e.$t("device.inputTemplateName")},model:{value:e.filterTemp,callback:function(t){e.filterTemp=t},expression:"filterTemp"}})],1)],1),t("el-col",{staticStyle:{"padding-top":"6px"},attrs:{span:3,offset:1}},[t("el-checkbox",{model:{value:e.allTemp,callback:function(t){e.allTemp=t},expression:"allTemp"}},[e._v(e._s(e.$t("device.displayAllTemplate")))])],1),t("el-col",{attrs:{span:2,offset:10}},[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.queryOilDetectorTemplate}},[e._v(e._s(e.$t("common.query")))])],1)],1),t("vxe-table",{attrs:{border:"",resizable:"",size:"mini",height:"410",data:e.tempList}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"templatename",title:e.$t("device.templateName")}}),t("vxe-table-column",{attrs:{field:"brand",title:e.$t("device.brand")}}),t("vxe-table-column",{attrs:{field:"model",title:e.$t("device.model")}}),t("vxe-table-column",{attrs:{field:"oilCount",title:e.$t("device.oilCount"),width:"60"}}),t("vxe-table-column",{attrs:{title:e.$t("reportForm.action"),width:"100"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticStyle:{"line-height":"18px"}},[e._v("1."+e._s(i.row.oil1))]),t("div",{staticStyle:{"line-height":"18px"}},[e._v("2."+e._s(i.row.oil2))]),t("div",{staticStyle:{"line-height":"18px"}},[e._v("3."+e._s(i.row.oil3))]),t("div",{staticStyle:{"line-height":"18px"}},[e._v("4."+e._s(i.row.oil4))])]}}])}),t("vxe-table-column",{attrs:{title:e.$t("reportForm.action"),width:"75"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticStyle:{"padding-top":"6px"}},[t("span",{staticStyle:{cursor:"pointer"},attrs:{title:e.$t("device.import")},on:{click:function(t){return e.handleClickImport(i)}}},[t("img",{staticStyle:{width:"18px",height:"18px"},attrs:{src:e.importIcon}})]),t("span",{staticStyle:{display:"inline-block",width:"6px"}}),t("span",{staticStyle:{cursor:"pointer"},attrs:{title:e.$t("common.delete")},on:{click:function(t){return e.handleClickDelete(i)}}},[t("img",{staticStyle:{width:"18px",height:"18px"},attrs:{src:e.deleteIcon}})])])]}}])})],1)],1)])],1)},y=[],w=(i("4e82"),i("b680"),i("b0c0"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"oil-marking-item"},[t("div",{staticStyle:{padding:"10px"}},[t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:8}},[t("LabelWrap",{attrs:{label:e.$t("device.purpose")}},[t("el-select",{model:{value:e.item.useas,callback:function(t){e.$set(e.item,"useas",t)},expression:"item.useas"}},e._l(e.useasOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:8}},[t("LabelWrap",{attrs:{label:e.$t("device.tankShape")}},[t("el-select",{model:{value:e.item.appearance,callback:function(t){e.$set(e.item,"appearance",t)},expression:"item.appearance"}},e._l(e.appearanceOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),t("el-col",{attrs:{span:1}},[t("div",{staticClass:"f_left"},[t("el-tooltip",{attrs:{placement:"top"}},[t("div",{attrs:{slot:"content"},slot:"content"},[e._v(" "+e._s(e.$t("tips.thresholdTip1"))+" "),t("br"),e._v(" "+e._s(e.$t("tips.thresholdTip2"))+" "),t("br"),e._v(" "+e._s(e.$t("tips.thresholdTip3"))+" "),t("br")]),t("div",{staticStyle:{cursor:"pointer","padding-top":"6px"}},[t("i",{staticClass:"el-icon-info",staticStyle:{color:"#FF9900","font-size":"18px"}})])])],1)]),t("el-col",{attrs:{span:7}},[t("LabelWrap",{attrs:{label:e.$t("device.threshold")+"(L)"}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:999999999999},model:{value:e.item.threshold,callback:function(t){e.$set(e.item,"threshold",t)},expression:"item.threshold"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10"},[t("el-col",{attrs:{span:24}},[t("LabelWrap",{attrs:{label:e.$t("device.remarkInfo")}},[t("el-input",{attrs:{placeholder:e.$t("device.fuelRemarkTip")},model:{value:e.item.name,callback:function(t){e.$set(e.item,"name",t)},expression:"item.name"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:24}},[t("i",{staticClass:"el-icon-info",staticStyle:{color:"#FF9900"}}),t("span",{staticStyle:{color:"#818181","font-size":"13px"},domProps:{textContent:e._s(e.$t("missing.tankAppropriateThresholdTip"))}})])],1)],1),e.item.appearance>0?t("div",{staticStyle:{padding:"10px","border-top":"1px solid #C4BCBC"}},[1==e.item.appearance?t("div",{staticClass:"marking-tank-info"},[t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:16}},[t("div",{staticClass:"marking-tank-info-title"},[t("span",{staticStyle:{color:"#000000"},domProps:{textContent:e._s(e.$t("device.maxVolume"))}}),t("span",{staticStyle:{color:"#75A5FF",padding:"0px 10px"}},[e._v(e._s(e.item.capacity)+"L")]),t("span",{staticStyle:{color:"#B6B6B6"}},[e._v("("+e._s(e.$t("device.saveChange"))+")")])])]),t("el-col",{attrs:{span:8}},[t("LabelWrap",{attrs:{label:e.$t("device.maxAnalogQuantity")}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:65535},model:{value:e.item.maxAdValue,callback:function(t){e.$set(e.item,"maxAdValue",t)},expression:"item.maxAdValue"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:8}},[t("LabelWrap",{attrs:{label:e.$t("device.tankLength")+"(cm)"}},[t("el-input",{attrs:{placeholder:e.$t("device.inputTankLenthTip")},model:{value:e.item.length,callback:function(t){e.$set(e.item,"length",e._n(t))},expression:"item.length"}})],1)],1),t("el-col",{attrs:{span:8}},[t("LabelWrap",{attrs:{label:e.$t("device.tankWidth")+"(cm)"}},[t("el-input",{attrs:{placeholder:e.$t("device.inputTankWidthTip")},model:{value:e.item.width,callback:function(t){e.$set(e.item,"width",e._n(t))},expression:"item.width"}})],1)],1),t("el-col",{attrs:{span:8}},[t("LabelWrap",{attrs:{label:e.$t("device.tankHeight")+"(cm)"}},[t("el-input",{attrs:{placeholder:e.$t("device.inputTankHeightTip")},model:{value:e.item.height,callback:function(t){e.$set(e.item,"height",e._n(t))},expression:"item.height"}})],1)],1)],1)],1):e._e(),2==e.item.appearance?t("div",{staticClass:"marking-tank-info"},[t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:16}},[t("div",{staticClass:"marking-tank-info-title"},[t("span",{staticStyle:{color:"#000000"},domProps:{textContent:e._s(e.$t("device.maxVolume"))}}),t("span",{staticStyle:{color:"#75A5FF",padding:"0px 10px"}},[e._v(e._s(e.item.capacity)+"L")]),t("span",{staticStyle:{color:"#B6B6B6"}},[e._v("("+e._s(e.$t("device.saveChange"))+")")])])]),t("el-col",{attrs:{span:8}},[t("LabelWrap",{attrs:{label:e.$t("device.maxAnalogQuantity")}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:65535},model:{value:e.item.maxAdValue,callback:function(t){e.$set(e.item,"maxAdValue",t)},expression:"item.maxAdValue"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("device.tankHeight")+"(cm)"}},[t("el-input",{attrs:{placeholder:e.$t("device.inputTankHeightTip")},model:{value:e.item.height,callback:function(t){e.$set(e.item,"height",e._n(t))},expression:"item.height"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("device.tankDiameter")+"(cm)"}},[t("el-input",{attrs:{placeholder:e.$t("device.inputTankDiameterTip")},model:{value:e.item.diameter,callback:function(t){e.$set(e.item,"diameter",e._n(t))},expression:"item.diameter"}})],1)],1)],1)],1):e._e(),3==e.item.appearance?t("div",{staticClass:"marking-tank-info"},[t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:16}},[t("div",{staticClass:"marking-tank-info-title"},[t("span",{staticStyle:{color:"#000000"},domProps:{textContent:e._s(e.$t("device.maxVolume"))}}),t("span",{staticStyle:{color:"#75A5FF",padding:"0px 10px"}},[e._v(e._s(e.item.capacity)+"L")]),t("span",{staticStyle:{color:"#B6B6B6"}},[e._v("("+e._s(e.$t("device.saveChange"))+")")])])]),t("el-col",{attrs:{span:8}},[t("LabelWrap",{attrs:{label:e.$t("device.maxAnalogQuantity")}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1,max:65535},model:{value:e.item.maxAdValue,callback:function(t){e.$set(e.item,"maxAdValue",t)},expression:"item.maxAdValue"}})],1)],1)],1),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("device.tankWidth")+"(cm)"}},[t("el-input",{attrs:{placeholder:e.$t("device.inputTankWidthTip")},model:{value:e.item.width,callback:function(t){e.$set(e.item,"width",e._n(t))},expression:"item.width"}})],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("device.tankDiameter")+"(cm)"}},[t("el-input",{attrs:{placeholder:e.$t("device.inputTankDiameterTip")},model:{value:e.item.diameter,callback:function(t){e.$set(e.item,"diameter",e._n(t))},expression:"item.diameter"}})],1)],1)],1)],1):e._e(),4==e.item.appearance?t("div",{staticClass:"marking-tank-info"},[t("div",{staticClass:"marking-tank-info-title"},[t("span",{staticStyle:{color:"#000000"},domProps:{textContent:e._s(e.$t("device.maxVolume"))}}),t("span",{staticStyle:{color:"#75A5FF",padding:"0px 10px"}},[e._v(e._s(e.item.capacity)+"L")]),t("span",{staticStyle:{color:"#B6B6B6"}},[e._v("("+e._s(e.$t("device.saveChange"))+")")])]),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:8}},[t("LabelWrap",{attrs:{label:e.$t("device.scale")}},[t("el-input",{attrs:{placeholder:e.$t("device.inputSrcadTip")},model:{value:e.adHeight,callback:function(t){e.adHeight=e._n(t)},expression:"adHeight"}})],1)],1),t("el-col",{attrs:{span:8}},[t("LabelWrap",{attrs:{label:e.$t("device.calibratedFluid")}},[t("el-input",{attrs:{placeholder:e.$t("device.inputCalibratedFluidTip")},model:{value:e.adVolume,callback:function(t){e.adVolume=e._n(t)},expression:"adVolume"}})],1)],1),t("el-col",{attrs:{span:2,offset:1}},[t("el-button",{staticStyle:{height:"34px",width:"81px"},attrs:{type:"info"},on:{click:e.handleAddAd}},[e._v(e._s(e.$t("common.add")))])],1)],1),t("div",{staticClass:"margin_b10"},[t("vxe-table",{attrs:{border:"",resizable:"","show-overflow":"",size:"mini",height:"160",data:e.item.markers}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"height",title:e.$t("device.scale")}}),t("vxe-table-column",{attrs:{field:"volume",title:e.$t("reportForm.oil")}}),t("vxe-table-column",{attrs:{title:e.$t("reportForm.action"),width:"70"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticStyle:{width:"48px",height:"30px","padding-top":"4px","text-align":"center",cursor:"pointer"},on:{click:function(t){return e.handleClickDelete(i)}}},[t("img",{staticStyle:{width:"22px",height:"22px"},attrs:{src:e.icon}})])]}}],null,!1,4061483848)})],1)],1),t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:e.isZh?3:4,offset:e.isZh?15:12}},[t("el-button",{staticStyle:{height:"34px",width:"100%"},attrs:{type:"info"},on:{click:e.downloadTemp}},[e._v(e._s(e.$t("insure.templateDownload")))])],1),t("el-col",{attrs:{span:e.isZh?3:4}},[t("el-button",{staticStyle:{height:"34px",width:"100%"},attrs:{type:"info"},on:{click:e.importTemp}},[e._v(e._s(e.$t("common.importMark")))])],1),t("el-col",{attrs:{span:e.isZh?3:4}},[t("el-button",{staticStyle:{height:"34px",width:"100%"},attrs:{type:"info"},on:{click:e.exportTemp}},[e._v(e._s(e.$t("common.exportMark")))])],1)],1)],1):e._e()]):e._e(),t("input",{ref:"fileEl",staticStyle:{display:"none"},attrs:{type:"file"}})])}),C=[],k=(i("caad"),i("d81d"),i("2532"),i("201d")),$=i("b059"),D={name:"OilMarkingItem",props:{item:{type:Object,default:function(){return{}}},deviceid:{type:String,default:""}},data:function(){return{icon:$,remark:"",maxAdValue:65535,threshold:10,useas:0,useasOptions:[],appearanceOptions:[],length:"",width:"",height:"",adHeight:"",adVolume:"",adList:[]}},components:{LabelWrap:k["a"]},computed:Object(l["a"])({},Object(d["b"])(["isZh"])),methods:{downloadTemp:function(){var e=document.createElement("a");e.href=this.isZh?"./xlsxtemplates/oiladtemplate.xlsx":"./xlsxtemplates/oiladtemplate_en.xlsx",e.download="oiladtemplate.xlsx",e.click()},importTemp:function(){var e=this.$refs.fileEl;e.value="",e.click()},exportTemp:function(){var e=[[this.$t("device.scale"),this.$t("reportForm.oil")]];this.item.markers.forEach((function(t){var i=[t.height,t.volume];e.push(i)}));var t=this.deviceid,i=p["a"].getDeviceNameByDeviceId(t);this.devicenameAndDeviceid=i+"-"+t;var a={title:this.isZh?"测量标定":"VolumeCalibration",data:e,hideTitle:!0};new ExcelCls(a).exportExcel(this)},handleAddAd:function(){var e=this.adHeight,t=this.adVolume;if(e&&t){var i=this.item.markers,a=i.map((function(e){return e.height})),s=a.indexOf(e);a.includes(e)?i[s].volume=t:(i.push({height:e,volume:t}),i.sort((function(e,t){return t.height-e.height})))}},handleClickDelete:function(e){var t=e.rowIndex;this.$delete(this.item.markers,t)},readWorkbookFromLocalFile:function(e,t){var i=new FileReader;i.onload=function(e){var i=e.target.result,a=new ExcelJS.Workbook;a.xlsx.load(i).then((function(){t&&t(a)}))},i.readAsBinaryString(e)},parserExcelData:function(e){console.log("worksheet",e);try{var t=[];e.eachRow({includeEmpty:!0},(function(e,i){if(i>1){var a={};e.eachCell({includeEmpty:!0},(function(e,t){switch(t){case 1:a.height=e.text;break;case 2:a.volume=e.text;break}})),t.push(a)}})),t.sort((function(e,t){return t.height-e.height})),this.item.markers=t}catch(i){console.log(i),this.$XModal.message({message:this.$t("tips.useTemplateTips"),status:"error",zIndex:9999})}}},mounted:function(){var e=this;this.excelX=["A","B"],this.$nextTick((function(){var t=e.$refs.fileEl;t.onchange=function(t){var i=t.target.files[0];e.readWorkbookFromLocalFile(i,(function(t){var i="测量标定",a=t.getWorksheet(i);void 0==a&&(i="VolumeCalibration",a=t.getWorksheet(i)),void 0==a&&(i="excel_oil",a=t.getWorksheet(i)),e.parserExcelData(a)}))}})),this.$nextTick((function(){e.useasOptions=[{label:e.$t("device.travel"),value:0},{label:e.$t("device.storage"),value:1}],e.appearanceOptions=[{label:e.$t("device.noTank"),value:0},{label:e.$t("device.cuboid"),value:1},{label:e.$t("device.verticalCylinder"),value:2},{label:e.$t("device.transverseCylinder"),value:3},{label:e.$t("device.irregular"),value:4}]}))}},T=D,S=(i("8c2f"),Object(g["a"])(T,w,C,!1,null,null,null)),A=S.exports,_=i("d71b"),O=i("fa04"),I=i("e6ad"),N=i("addb2"),M=i("e173"),L={name:"OilMarkingDialog",props:{value:{type:!1,default:!1},deviceid:{type:String,default:""},deviceName:{type:String,default:""}},data:function(){return{loading:!1,activeName:"0",travelOil:!1,noTravelOil:!1,saveTemp:!1,importTemp:!1,icon1:_,icon2:O,icon3:I,importIcon:N,deleteIcon:M,oilDetectors:[{markers:[]},{markers:[]},{markers:[]},{markers:[]}],templatename:"",brand:"",model:"",filterTemp:"",allTemp:!1,tempList:[]}},computed:{title:function(){return"".concat(this.$t("device.oilMarking")," - ").concat(this.deviceName)}},components:{OilMarkingItem:A,LabelWrap:k["a"]},watch:{value:function(e){var t=this;e?(this.activeName="0",Object(u["zb"])(this.deviceid).then((function(e){var i=e.oildetectors,a=e.combinestatus;i&&i.length&&i.forEach((function(e){e.capacity=Number(e.capacity.toFixed(2)),null==e.markers&&(e.markers=[])})),t.oilDetectors=i,t.travelOil=1==(1&a),t.noTravelOil=1==(1&a)}))):(this.saveTemp=!1,this.importTemp=!1,this.tableList=[])},importTemp:function(e){var t=this;if(e){var i=this;Object(u["yb"])(this.allTemp).then((function(e){var a=e.records;a.forEach((function(e){var t=e.oildetectors,a=t[0],s=t[1],n=t[2],l=t[3],o=0;e.oil1=i.getTankShape(a?a.appearance:0),e.oil2=i.getTankShape(s?s.appearance:0),e.oil3=i.getTankShape(n?n.appearance:0),e.oil4=i.getTankShape(l?l.appearance:0),t.forEach((function(e){0!=e.appearance&&o++})),e.oilCount=o})),t.tempList=a}))}else this.allTemp=!1,this.tempList=[]}},methods:{getTankShape:function(e){var t="";switch(e){case 0:t=this.$t("device.noTank");break;case 1:t=this.$t("device.cuboid");break;case 2:t=this.$t("device.verticalCylinder");break;case 3:t=this.$t("device.transverseCylinder");break;case 4:t=this.$t("device.irregular");break}return t},handleClose:function(){this.$emit("input",!1)},handleClickImport:function(e){var t=e.row.oildetectors;t.forEach((function(e){null==e.markers&&(e.markers=[]),e.markers.sort((function(e,t){return t.height-e.height}))})),this.oilDetectors=t,this.$XModal.message({message:this.$t("tips.importSucc"),status:"success",zIndex:9999})},handleClickDelete:function(e){var t=e.rowIndex,i=e.row.oildetectortemplateid;this.$delete(this.tempList,t),Object(u["E"])(i)},queryOilDetectorTemplate:function(){var e=this,t=this.filterTemp,i=this;Object(u["yb"])(this.allTemp).then((function(a){var s=a.records,n=[];s&&(""==t?(s.forEach((function(e){var t=e.oildetectors,a=t[0],s=t[1],n=t[2],l=t[3],o=0;e.oil1=i.getTankShape(a?a.appearance:0),e.oil2=i.getTankShape(s?s.appearance:0),e.oil3=i.getTankShape(n?n.appearance:0),e.oil4=i.getTankShape(l?l.appearance:0),t.forEach((function(e){0!=e.appearance&&o++})),e.oilCount=o})),n=s):s.forEach((function(e){if(e.templatename.indexOf(t)>-1){var a=e.oildetectors,s=a[0],l=a[1],o=a[2],r=a[3],c=0;e.oil1=i.getTankShape(s.appearance),e.oil2=i.getTankShape(l.appearance),e.oil3=i.getTankShape(o?o.appearance:0),e.oil4=i.getTankShape(r?r.appearance:0),a.forEach((function(e){0!=e.appearance&&c++})),e.oilCount=c,n.push(e)}}))),e.tempList=n}))},saveOilDetectorTemplate:function(){var e=this,t=this.templatename,i=this.model,a=this.brand,s={deviceid:this.deviceid,templatename:t,model:i,brand:a,independent:this.travelOil?0:1,oildetectors:this.oilDetectors};Object(u["ic"])(s).then((function(t){var i=t.status;0==i?e.$XModal.message({message:e.$t("tips.saveSucc"),status:"success",zIndex:9999}):1==i?e.$XModal.message({message:e.$t("tips.duplicateTemplateName"),status:"error",zIndex:9999}):e.$XModal.message({message:e.$t("tips.saveFail"),status:"error",zIndex:9999})}))},getCombinestatus:function(){var e=0;return this.travelOil&&(e|=1),this.noTravelOil&&(e|=2),e},onCommand:function(e){"save"==e?this.saveTemp=!0:this.importTemp=!0},handleSubmit:function(){var e=this,t={deviceid:this.deviceid,oildetectors:this.oilDetectors,combinestatus:this.getCombinestatus()};this.loading=!0,Object(u["jc"])(t).then((function(t){var i=t.status,a=t.oildetectors;e.loading=!1,0==i?(a&&a.length&&(a.forEach((function(e){e.capacity=Number(e.capacity.toFixed(2)),null==e.markers&&(e.markers=[])})),e.oilDetectors=a),e.$XModal.message({message:e.$t("tips.saveSucc"),status:"success",zIndex:9999}),e.handleClose()):e.$XModal.message({message:e.$t("tips.saveFail"),status:"error",zIndex:9999})}))}}},E=L,F=(i("8ac1"),Object(g["a"])(E,x,y,!1,null,null,null)),z=F.exports,j=z,R=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,center:"",visible:e.value,width:"560px","append-to-body":"","close-on-click-modal":!1},on:{close:e.handleClose}},[t("div",{staticClass:"weight-marking"},[t("input",{ref:"fileEl",staticStyle:{display:"none"},attrs:{type:"file"}}),t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("device.communicationProtocol")}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.protocoltype,callback:function(t){e.protocoltype=t},expression:"protocoltype"}},[t("el-option",{attrs:{label:"河北重优",value:1}}),t("el-option",{attrs:{label:"上海通立",value:2}})],1)],1)],1),t("el-col",{attrs:{span:12}},[t("LabelWrap",{attrs:{label:e.$t("device.sensorChannel")}},[t("el-select",{staticStyle:{width:"100%"},model:{value:e.weightindex,callback:function(t){e.weightindex=t},expression:"weightindex"}},[t("el-option",{attrs:{label:"1",value:0}}),t("el-option",{attrs:{label:"2",value:1}}),t("el-option",{attrs:{label:"3",value:2}}),t("el-option",{attrs:{label:"4",value:3}})],1)],1)],1)],1),t("div",{staticStyle:{"border-top":"8px solid #F7F7F7","padding-top":"10px"}},[t("el-row",{staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:10}},[t("LabelWrap",{attrs:{label:e.$t("device.scale")}},[t("el-input",{model:{value:e.advalue,callback:function(t){e.advalue=e._n(t)},expression:"advalue"}})],1)],1),t("el-col",{attrs:{span:10}},[t("LabelWrap",{attrs:{label:e.$t("device.weightValue")}},[t("el-input",{model:{value:e.weight,callback:function(t){e.weight=e._n(t)},expression:"weight"}})],1)],1),t("el-col",{attrs:{span:4}},[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v(e._s(e.$t("common.determine")))])],1)],1),t("div",{staticClass:"margin_b10"},[t("vxe-table",{attrs:{border:"",resizable:"","show-overflow":"","highlight-current-row":"",size:"mini",height:"180",data:e.weightList}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"advalue",title:e.$t("device.scale")}}),t("vxe-table-column",{attrs:{field:"weight",title:e.$t("device.weightValue")}})],1)],1),t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:e.isZh?4:5,offset:e.isZh?12:9}},[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.handleImport}},[e._v(e._s(e.$t("device.importData")))])],1),t("el-col",{attrs:{span:e.isZh?4:5}},[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.handleExport}},[e._v(e._s(e.$t("common.exportData")))])],1),t("el-col",{attrs:{span:e.isZh?4:5}},[t("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:e.downloadTemp}},[e._v(e._s(e.$t("insure.templateDownload")))])],1)],1)],1)],1),t("div",{staticStyle:{"margin-top":"10px","text-align":"center",height:"70px","padding-top":"20px"}},[t("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",loading:e.loading},on:{click:e.handleSendDevice}},[e._v(e._s(e.$t("device.sendToDevice")))]),t("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",loading:e.qloading},on:{click:e.handleOnlineQuery}},[e._v(e._s(e.$t("device.onlineQuery")))])],1)])},q=[],U=(i("baa5"),i("fb6a"),i("4795"),{name:"WeightMarkingDialog",props:{value:{type:Boolean,default:!1},deviceid:{type:String,default:""},deviceName:{type:String,default:""}},data:function(){return{loading:!1,qloading:!1,protocoltype:1,weightindex:0,advalue:"",weight:"",weightList:[]}},components:{LabelWrap:k["a"]},computed:Object(l["a"])(Object(l["a"])({},Object(d["b"])(["isZh"])),{},{title:function(){return"".concat(this.$t("device.weightMarking")," - ").concat(this.deviceName)}}),watch:{value:function(e){var t=this;e?setTimeout((function(){var e=t.$refs.fileEl;e.onchange=function(e){var i=e.srcElement.value.lastIndexOf("."),a=e.srcElement.value.slice(i);if(-1!=a.indexOf("xlsx")){var s=e.target.files[0];t.readWorkbookFromLocalFile(s,(function(e){var i="载重标定",a=e.getWorksheet(i);void 0==a&&(i="weightmarker",a=e.getWorksheet(i)),t.parserExcelData(a)}))}else t.$XModal.message({message:t.$t("insure.importExcelTips"),status:"error",zIndex:9999})}}),1e3):(this.advalue="",this.weight="",this.weightList=[])}},methods:{downloadTemp:function(){var e=document.createElement("a");e.href=this.isZh?"./xlsxtemplates/weightemplate.xlsx":"./xlsxtemplates/weightemplate_en.xlsx",e.download="weightemplate.xlsx",e.click()},handleImport:function(){var e=this.$refs.fileEl;e.value="",e.click()},handleExport:function(){var e=[[this.$t("device.scale"),this.$t("device.weightValue")]];this.weightList.forEach((function(t){var i=[t.advalue,t.weight];e.push(i)}));var t=this.deviceid,i=p["a"].getDeviceNameByDeviceId(t);this.devicenameAndDeviceid=i+"-"+t;var a={title:this.isZh?"载重标定":"weightmarker",data:e,devicename:i,hideTitle:!0};new ExcelCls(a).exportExcel(this)},handleClose:function(){this.$emit("input",!1)},handleAdd:function(){var e=this.advalue,t=this.weight;if(e&&t){var i=this.weightList.map((function(e){return e.advalue}));i.includes(e)||(this.weightList.push({advalue:e,weight:t}),this.weightList.sort((function(e,t){return e.advalue-t.advalue})))}},handleSendDevice:function(){var e=this;if(!this.qloading){this.loading=!0;var t={deviceid:this.deviceid,weightindex:this.weightindex,markers:this.weightList,protocoltype:this.protocoltype};Object(u["lc"])(t).then((function(t){var i=t.status,a=t.cause;e.loading=!1,0==i?e.$XModal.message({message:e.$t("monitor.CMD_SEND_RESULT_UNCONFIRM"),status:"error",zIndex:9999}):1===i?e.$XModal.message({message:e.$t("monitor.CMD_SEND_RESULT_PASSWORD_ERROR"),status:"error",zIndex:9999}):2===i?e.$XModal.message({message:e.$t("monitor.CMD_SEND_RESULT_OFFLINE_NOT_CACHE"),status:"error",zIndex:9999}):3===i?e.$XModal.message({message:e.$t("monitor.CMD_SEND_RESULT_OFFLINE_CACHED"),status:"error",zIndex:9999}):4===i?e.$XModal.message({message:e.$t("monitor.CMD_SEND_RESULT_MODIFY_DEFAULT_PASSWORD"),status:"error",zIndex:9999}):5===i?e.$XModal.message({message:e.$t("monitor.CMD_SEND_RESULT_DETAIL_ERROR")+a,status:"error",zIndex:9999}):6===i?(e.$XModal.message({message:e.$t("tips.saveSucc")+a,status:"success",zIndex:9999}),e.handleClose()):7===i?e.$XModal.message({message:e.$t("monitor.CMD_SEND_OVER_RETRY_TIMES"),status:"error",zIndex:9999}):8===i&&e.$XModal.message({message:e.$t("monitor.CMD_SEND_SYNC_TIMEOUT")+a,status:"error",zIndex:9999})}))}},handleOnlineQuery:function(){var e=this;if(0==this.loading){this.qloading=!0;var t={deviceid:this.deviceid,weightindex:this.weightindex,protocoltype:this.protocoltype};Object(u["Ub"])(t).then((function(t){var i=t.markers;e.qloading=!1,null!=i&&(e.weightList=i)}))}},readWorkbookFromLocalFile:function(e,t){var i=new FileReader;i.onload=function(e){var i=e.target.result,a=new ExcelJS.Workbook;a.xlsx.load(i).then((function(){t&&t(a)}))},i.readAsBinaryString(e)},parserExcelData:function(e){try{var t=[];e.eachRow({includeEmpty:!0},(function(e,i){if(i>1){var a={};e.eachCell({includeEmpty:!0},(function(e,t){switch(t){case 1:a.advalue=e.text;break;case 2:a.weight=e.text;break}})),t.push(a)}})),this.weightList=t}catch(i){this.$XModal.message({message:this.$t("insure.importExcelFailTips"),status:"error",zIndex:9999})}}},mounted:function(){this.excelX=["A","B","C"]}}),B=U,X=(i("28f8"),Object(g["a"])(B,R,q,!1,null,null,null)),W=X.exports,P=W,V=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,center:"",visible:e.value,width:"560px","append-to-body":"","close-on-click-modal":!1},on:{close:e.handleClose}},[t("el-row",{staticClass:"margin_b10"},[t("el-col",{attrs:{span:11,offset:1}},[t("SingleChoiceVehicle",{attrs:{placeholder:this.$t("tips.selectSingleDevice"),width:"180px"},model:{value:e.vehicleid,callback:function(t){e.vehicleid=t},expression:"vehicleid"}})],1),t("el-col",{attrs:{span:3}},[t("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.handleConsult}},[e._v(e._s(e.$t("device.copy")))])],1)],1),t("el-row",{staticClass:"margin_b10"},[t("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:4,offset:1}},[e._v(" "+e._s(e.$t("device.ioNumber"))+" ")]),t("el-col",{attrs:{span:4,offset:4}},[t("el-input-number",{staticStyle:{width:"100%"},attrs:{min:0,max:16,"controls-position":"right"},model:{value:e.num,callback:function(t){e.num=t},expression:"num"}})],1)],1),t("div",{staticStyle:{"max-height":"200px","overflow-x":"hidden","overflow-y":"auto"}},e._l(e.ioList,(function(i,a){return t("el-row",{key:a,staticClass:"margin_b10",attrs:{gutter:10}},[t("el-col",{attrs:{span:11,offset:1}},[t("LabelWrap",{attrs:{label:e.$t("device.io".concat(a+1,"Open"))}},[t("el-input",{model:{value:i.ioOpen,callback:function(t){e.$set(i,"ioOpen",t)},expression:"item.ioOpen"}})],1)],1),t("el-col",{attrs:{span:11}},[t("LabelWrap",{attrs:{label:e.$t("device.io".concat(a+1,"Close"))}},[t("el-input",{model:{value:i.ioClose,callback:function(t){e.$set(i,"ioClose",t)},expression:"item.ioClose"}})],1)],1)],1)})),1),t("div",{staticStyle:{"text-align":"center",height:"70px","padding-top":"20px"}},[t("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v(e._s(e.$t("common.determine")))])],1)],1)},Q=[],Z=i("26c6"),Y={name:"IoMarkingDialog",props:{value:{type:Boolean,default:!1},deviceid:{type:String,default:""},deviceName:{type:String,default:""}},components:{LabelWrap:k["a"],SingleChoiceVehicle:Z["a"]},data:function(){return{num:0,vehicleid:"",ioList:[]}},watch:{value:function(e){var t=this;e?Object(u["vb"])(this.deviceid).then((function(e){var i=e.records;if(i){var a=[];t.num=i.length,i.forEach((function(e){a.push({ioOpen:e.openstr,ioClose:e.closestr})})),t.ioList=a}else t.num=0,t.$XModal.message({message:t.$t("tips.noData"),status:"error",zIndex:9999})})):setTimeout((function(){t.ioList=[],t.num=0}),1e3)},num:function(e){var t=this.ioList.length;if(e>t){var i=e-t,a=0;while(a<i)a++,this.ioList.push({ioOpen:"",ioClose:""})}else this.ioList.length=e}},computed:{title:function(){return"".concat(this.$t("device.ioConfig")," - ").concat(this.deviceName)}},methods:{handleClose:function(){this.$emit("input",!1)},handleConsult:function(){var e=this;this.vehicleid?Object(u["vb"])(this.vehicleid).then((function(t){var i=t.records;if(i){var a=[];e.num=i.length,i.forEach((function(e){a.push({ioOpen:e.openstr,ioClose:e.closestr})})),e.ioList=a}else e.num=0,e.ioList=[]})):this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},handleSubmit:function(){var e=this,t={deviceid:this.deviceid,records:[]};this.ioList.forEach((function(e,i){t.records.push({index:i+1,openstr:e.ioOpen,closestr:e.ioClose})})),Object(u["nc"])(t).then((function(t){var i=t.status;0==i?(e.$XModal.message({message:e.$t("tips.setSucc"),status:"success",zIndex:9999}),e.handleClose()):e.$XModal.message({message:e.$t("tips.setFail"),status:"error",zIndex:9999})}))}}},J=Y,H=Object(g["a"])(J,V,Q,!1,null,null,null),K=H.exports,G=K,ee=i("f1b2"),te=i("4d3b"),ie=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,center:"",visible:e.value,width:"680px","append-to-body":"","close-on-click-modal":!1},on:{close:e.handleClose}},[t("vxe-table",{attrs:{border:"",resizable:"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"240",data:e.tableList}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"username",title:e.$t("device.tutelageUser")}}),t("vxe-table-column",{attrs:{field:"nickname",title:e.$t("bgManage.nickname")}}),t("vxe-table-column",{attrs:{field:"deviceid",title:e.$t("alarm.devNum")}}),t("vxe-table-column",{attrs:{field:"bindtimeStr",title:e.$t("reportForm.time"),width:"100"}}),t("vxe-table-column",{attrs:{field:"bindstateStr",title:e.$t("bgManage.type"),width:"60"}}),t("vxe-table-column",{attrs:{title:e.$t("reportForm.action"),width:"80"},scopedSlots:e._u([{key:"default",fn:function(i){return[t("el-popconfirm",{attrs:{placement:"top",icon:"el-icon-info","icon-color":"red","confirm-button-text":e.$t("common.confirm"),"cancel-button-text":e.$t("common.cancel"),title:e.$t("tips.confirmUnbind")},on:{confirm:function(t){return e.handleDelete(i)}}},[t("el-button",{attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[e._v(e._s(e.$t("common.unbind")))])],1)]}}])})],1)],1)},ae=[],se={name:"BindUsersDialog",props:{value:{type:Boolean,default:!1},deviceid:{type:String,default:""}},data:function(){return{deviceName:"",tableList:[]}},watch:{value:function(e){var t=this;e&&(this.deviceName=p["a"].getDeviceNameByDeviceId(this.deviceid),Object(u["eb"])(this.deviceid).then((function(e){var i=e.binds;console.log("result",i);var a=[];i&&i.length&&(i.forEach((function(e){e.bindtimeStr=m["a"].format(new Date(e.bindtime),"yyyy-MM-dd"),e.bindstateStr=1==e.bindstate?t.$t("bgManage.master"):t.$t("bgManage.slave")})),a=i),t.tableList=a})))}},computed:{title:function(){return"".concat(this.$t("device.tutelageUser")," - ").concat(this.deviceName)}},methods:{handleClose:function(){this.$emit("input",!1)},handleDelete:function(e){var t=this,i=e.rowIndex,a=e.row,s={operator:a.username,deviceid:a.deviceid,username:a.username};Object(u["Yb"])(s).then((function(e){var a=e.status;0==a?(t.$delete(t.tableList,i),t.$XModal.message({message:t.$t("device.actionSucc"),status:"success",zIndex:9999})):1==a?t.$XModal.message({message:t.$t("device.actionFail"),status:"error",zIndex:9999}):2==a?t.$XModal.message({message:t.$t("tips.noPermission"),status:"error",zIndex:9999}):t.$XModal.message({message:t.$t("device.actionFail"),status:"error",zIndex:9999})}))}}},ne=se,le=Object(g["a"])(ne,ie,ae,!1,null,null,null),oe=le.exports,re=oe,ce=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,center:"",visible:e.value,width:"360px","append-to-body":"","close-on-click-modal":!1},on:{close:e.handleClose}},[t("div",{staticStyle:{"text-align":"center"}},[t("div",[t("i",{staticClass:"el-icon-warning",staticStyle:{color:"#F56C6C"}}),t("span",{staticStyle:{color:"#F56C6C","padding-left":"4px"},domProps:{textContent:e._s(e.$t("tips.replaceDeviceTip"))}})])]),t("div",{staticClass:"margin_b10 noselect",staticStyle:{"margin-top":"18px"}},[t("LabelWrap",{attrs:{label:e.$t("device.oldDeviceid")}},[t("el-input",{attrs:{disabled:""},model:{value:e.deviceid,callback:function(t){e.deviceid=t},expression:"deviceid"}})],1)],1),t("div",{staticClass:"margin_b10 noselect",staticStyle:{"margin-top":"18px"}},[t("LabelWrap",{attrs:{label:e.$t("device.newDeviceid")}},[t("el-input",{model:{value:e.newDeviceid,callback:function(t){e.newDeviceid=t},expression:"newDeviceid"}})],1)],1),t("div",{staticStyle:{"text-align":"center",height:"60px","padding-top":"20px"}},[t("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",loading:e.loading},on:{click:e.handleClick}},[e._v(e._s(e.$t("common.determine")))])],1)])},de=[],ue=i("c276"),pe={name:"ReplaceDeviceDialog",props:{value:{type:Boolean,default:!1},deviceid:{type:String,default:""},deviceName:{type:String,default:""}},components:{LabelWrap:k["a"]},data:function(){return{loading:!1,newDeviceid:""}},watch:{value:function(e){}},computed:{title:function(){return"".concat(this.$t("device.replaceDevice")," - ").concat(this.deviceName)}},methods:Object(l["a"])(Object(l["a"])({},Object(d["c"])(["isZh","setIsReloadRootuser","setReportTagList"])),{},{handleClose:function(){this.$emit("input",!1)},handleClick:function(){var e=this,t=(this.isZh,{olddeviceid:this.deviceid,newdeviceid:this.newDeviceid});if(""!=t.newdeviceid){var i=this.$store.state.deviceTypes;Object(u["Zb"])(t).then((function(a){var s=a.status,n=a.cause,l=a.newdevice,o=a.olddevice;0==s?(Object.assign(cacheMgr.deviceInfos[t.olddeviceid],o),cacheMgr.deviceInfos[t.newdeviceid]=l,l.hasFunctions=Object(ue["D"])(l,i),cacheMgr.addDevice(l),e.$XModal.message({message:e.$t("missing.replacementSucceeded"),status:"success",zIndex:9999}),e.setReportTagList([]),e.setIsReloadRootuser(!0),e.handleClose()):-1==s?e.$XModal.message({message:e.$t("missing.replacementFailed")+":"+n,status:"error",zIndex:9999}):1==s?e.$XModal.message({message:e.$t("missing.oldEquipmentDoesNotExis"),status:"error",zIndex:9999}):2==s?e.$XModal.message({message:e.$t("missing.newEquipmentSerialNumberAlreadyExists"),status:"error",zIndex:9999}):3==s&&e.$XModal.message({message:e.$t("missing.addNewDeviceException")+":"+n,status:"error",zIndex:9999})}))}}})},me=pe,he=Object(g["a"])(me,ce,de,!1,null,null,null),ve=he.exports,ge=ve,fe=i("2df7"),be=i("b562"),xe=i("7cf8"),ye=i("a05b"),we=i("4c3c"),Ce=i("61fc"),ke=i("e173"),$e=i("7b49"),De={name:"QueryDevice",data:function(){return{totalColumns:["devicename","deviceid","deviceType","creater","groupName","simiccid","simnum","addTime","firstLocTime","installtimeStr","expireTime","alarmactionStr","loginenableStr","distanceratio","remark"],editIcon:Ce,deleteIcon:ke,moreIcon:$e,loading:!1,editDialog:!1,recordsDialog:!1,oilMarkDiglog:!1,editDiglog:!1,weightDialog:!1,ioDialog:!1,tempDialog:!1,replaceDialog:!1,bindUsersDialog:!1,queryText:"",queryType:"0",tableList:[],totalcount:0,deviceid:"",deviceName:"",currentRow:{},pageSize:20,currentPage:1,exportLoading:!1,exportAllLoading:!1}},mixins:[ye["a"],we["a"]],components:{LabelWrap:o["a"],RecordsDialog:b,OilMarkingDialog:j,EditDevice:ee["a"],WeightMarkingDialog:P,IoMarkingDialog:G,TempMarkingDialog:te["a"],ReplaceDeviceDialog:ge,ZtreeDeviceDropdown:fe["a"],BindUsersDialog:re},computed:Object(l["a"])(Object(l["a"])({},Object(d["b"])(["isZh","deviceTypes","isQueryInitData","userType","permissionList"])),{},{isDeleteDevicePermission:function(){return-1!=this.permissionList.indexOf("manage-managedevice-querydevice-deletedevice")}}),watch:{isQueryInitData:function(e){var t=this;e&&Object(be["X"])({filterenabled:0}).then((function(e){var i=e.packages;i=i||[],i.forEach((function(e){e.packagename=t.$t("systemManage.package"+e.packageid)})),t.packages=i;var a={count:t.pageSize,keyword:t.queryText,offset:1,all:!1,expiredays:0};t.queryDevices(a)}))},queryType:function(){this.totalcount=0;var e={count:this.pageSize,keyword:this.queryText,offset:0,all:!1,expiredays:Number(this.queryType)};this.queryDevices(e)}},destroyed:function(){this.tableList=null},methods:Object(l["a"])(Object(l["a"])({},Object(d["c"])(["setIsReloadRootuser","setReportTagList"])),{},{onEditSucc:function(e){var t=e.deviceid,i=this.deviceTypes,a=i[e.devicetype].typename;this.currentRow.deviceType=a,this.currentRow.devicename=e.devicename,this.currentRow.creater=e.creater,this.currentRow.simiccid=e.simiccid,this.currentRow.simnum=e.simnum,this.currentRow.offlinedelay=e.offlinedelay,this.currentRow.parkdrifting=e.parkdrifting,this.currentRow.parktimeout=e.parktimeout,this.currentRow.loginenableStr=0==e.loginenable?this.$t("bgManage.ban"):this.$t("bgManage.allow"),this.currentRow.installtimeStr=m["a"].format(new Date(e.installtime),"yyyy-MM-dd"),p["a"].deviceInfos[t].offlinedelay=e.offlinedelay},cellDblclick:function(e){this.handleEdit(e)},exportData:function(){var e=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.deviceType"),"ICCID",this.$t("reportForm.sim"),this.$t("reportForm.addTime"),this.$t("reportForm.firstLocTime"),this.$t("reportForm.installTime"),this.$t("alarm.expireTime"),this.$t("reportForm.creater"),this.$t("reportForm.groupName"),this.$t("reportForm.remarks"),this.$t("device.tutelageUser"),this.$t("reportForm.bindPwd"),this.$t("reportForm.vinno")]],t=this.userType;this.tableList.forEach((function(i,a){var s=[];s.push(++a),s.push(i.devicename),s.push(i.deviceid),s.push(i.deviceType),s.push(i.simiccid?i.simiccid:""),s.push(i.simnum?i.simnum:""),s.push(i.addTime),s.push(i.firstLocTime),s.push(i.installtimeStr),s.push(i.expireTime),s.push(i.creater),s.push(i.groupName),t<2?s.push(i.remark?i.remark:""):s.push(i.remark2?i.remark2:""),s.push(i.monitor?i.monitor:""),s.push(i.bindpwd?i.bindpwd:""),s.push(i.vin?i.vin:""),e.push(s)}));var i={title:this.$t("bgManage.deviceList"),data:e,dateRange:null};new ExcelCls(i).exportExcel(this)},exportDataAll:function(){var e=this,t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.deviceType"),"ICCID",this.$t("reportForm.sim"),this.$t("reportForm.addTime"),this.$t("reportForm.firstLocTime"),this.$t("reportForm.installTime"),this.$t("alarm.expireTime"),this.$t("reportForm.creater"),this.$t("reportForm.groupName"),this.$t("bgManage.mileageRatio"),this.$t("reportForm.remarks"),this.$t("device.tutelageUser"),this.$t("reportForm.bindPwd"),this.$t("reportForm.vinno")]],i=this.userType,a=this.deviceTypes,s=p["a"].deviceInfos;this.exportAllLoading=!0,Object(u["ob"])({all:!1,keyword:this.queryText,count:this.totalcount,offset:0}).then((function(n){var l=n.devices;if(e.exportAllLoading=!1,l){l.forEach((function(n,l){var o=[],r="",c=s[n.deviceid];c&&(r=0==c.groupid?e.$t("common.defaultGroup"):c.groupname);var d=m["a"].format(new Date(n.createtime),"yyyy-MM-dd"),u=0==n.firstloctime?"-":m["a"].format(new Date(n.firstloctime),"yyyy-MM-dd"),p=0==n.installtime?"-":m["a"].format(new Date(n.installtime),"yyyy-MM-dd"),h=a[n.devicetype].typename,v=m["a"].format(new Date(n.expirenotifytime),"yyyy-MM-dd");o.push(++l),o.push(n.devicename),o.push(n.deviceid),o.push(h),o.push(n.simiccid?n.simiccid:""),o.push(n.simnum?n.simnum:""),o.push(d),o.push(u),o.push(p),o.push(v),o.push(n.creater),o.push(r),o.push(n.distanceratio+"%"),i<2?o.push(n.remark?n.remark:""):o.push(n.remark2?n.remark2:""),o.push(n.monitor?n.monitor:""),o.push(n.bindpwd?n.bindpwd:""),o.push(n.vin?n.vin:""),t.push(o)}));var o={title:e.$t("bgManage.deviceList"),data:t,dateRange:null,exportMaxLength:1e5};new ExcelCls(o).exportExcel(e)}})).catch((function(t){e.exportAllLoading=!1}))},onCommand:function(e){var t=this,i=this.isZh;switch(e){case"oil":this.oilMarkDiglog=!0;break;case"temp":this.tempDialog=!0;break;case"weight":this.weightDialog=!0;break;case"io":this.ioDialog=!0;break;case"password":Object(u["cc"])(this.currentRow.deviceid).then((function(e){var a=e.status,s=e.cause,n=e.newpass;i?0==a?t.$XModal.message({message:"重置密码成功,新密码:"+n,status:"success",zIndex:9999}):t.$XModal.message({message:"重置密码失败:"+s,status:"error",zIndex:9999}):0==a?t.$XModal.message({message:"Password reset succeeded. New password:"+n,status:"success",zIndex:9999}):t.$XModal.message({message:"Password reset failed:"+s,status:"error",zIndex:9999})}));break;case"records":this.recordsDialog=!0;break;case"bindUsers":this.bindUsersDialog=!0;break;case"cleanPosi":this.$confirm(this.$t("bgManage.clearTheLastPosition"),{title:this.$t("bgManage.tip"),center:!0,customClass:"MessageBox_confirm"}).then((function(e){if("confirm"==e){var i=t.currentRow.deviceid;Object(u["p"])({deviceid:i}).then((function(e){var a=e.status;0==a?(delete p["a"].lastPositions[i],t.$XModal.message({message:t.$t("tips.setSucc"),status:"success",zIndex:9999})):t.$XModal.message({message:t.$t("tips.setFail"),status:"error",zIndex:9999})})).catch((function(e){console.log(e)}))}})).catch((function(e){}));break;case"cleanRecord":this.$confirm(this.$t("bgManage.clearTheHistoryTrack"),{title:this.$t("bgManage.tip"),center:!0,customClass:"MessageBox_confirm"}).then((function(e){"confirm"==e&&Object(u["o"])(t.currentRow.deviceid).then((function(e){var i=e.status;0==i?t.$XModal.message({message:t.$t("tips.setSucc"),status:"success",zIndex:9999}):t.$XModal.message({message:t.$t("tips.setFail"),status:"error",zIndex:9999})}))})).catch((function(e){}));break;case"replaceDevice":this.replaceDialog=!0;break;case"simDetails":var a=this.currentRow.deviceid;Object(xe["T"])(a).then((function(e){var i=e.status,a=e.accessurl;if(0==i){var s=document.createElement("a");s.setAttribute("target","_blank"),s.href=a,s.click()}else 1==i?t.$XModal.message({message:t.$t("tips.noPermission"),status:"success",zIndex:9999}):2==i?t.$XModal.message({message:t.$t("tips.deviceNotIncludedSim"),status:"success",zIndex:9999}):3==i&&t.$XModal.message({message:t.$t("tips.notFoundSim"),status:"success",zIndex:9999})}));break}},handleEdit:function(e){this.currentRow=e.row,this.deviceid=e.row.deviceid,this.deviceName=e.row.devicename,this.editDialog=!0},currentChangeEvent:function(e){var t=e.row;this.currentRow=t,this.deviceid=t.deviceid,this.deviceName=t.devicename},handleClickQuery:function(){var e={count:this.pageSize,keyword:this.queryText,offset:0,all:!1,expiredays:0};this.queryDevices(e)},handleDelete:function(e){var t=this,i=e.row,a=e.rowIndex,s=i.deviceid,n=i.groupid,l=i.creater,o=p["a"].deviceInfos;Object(u["A"])({deviceid:s}).then((function(e){var i=e.status;0==i?(t.$delete(t.tableList,a),t.totalcount--,delete o[s],delete p["a"].lastPositions[s],p["a"].removeDevice(l,n,s),t.setReportTagList([]),t.setIsReloadRootuser(!0),t.$XModal.message({message:t.$t("tips.deleteSucc"),status:"success",zIndex:9999})):t.$XModal.message({message:t.$t("tips.deleteFail"),status:"error",zIndex:9999})}))},getAlarmActionStr:function(e){var t=this.$t("bgManage.platform");return 1==(1&e)&&(t+="+"+this.$t("bgManage.voice")),2==(2&e)&&(t+="+"+this.$t("bgManage.pop_up")),4==(4&e)&&(t+="+"+this.$t("common.weChat")),8==(8&e)&&(t+="+"+this.$t("bgManage.relieve")),t},queryDevices:function(e){var t=this;this.loading=!0;var i=this.packages,a=this.deviceTypes,s=p["a"].deviceInfos;Object(u["ob"])(e).then((function(e){var n=e.devices,l=e.totalcount;t.totalcount=l,n.forEach((function(e){var n=e.deviceid,l=s[n],o="-";try{o=a[e.devicetype].typename}catch(r){console.log(e)}e.installtime||(e.installtime=0),Object(ue["rb"])(e,i,e.packageids),e.addTime=m["a"].format(new Date(e.createtime),"yyyy-MM-dd"),e.expireTime=m["a"].format(new Date(e.expirenotifytime),"yyyy-MM-dd"),e.firstLocTime=0==e.firstloctime?"-":m["a"].format(new Date(e.firstloctime),"yyyy-MM-dd"),e.installtimeStr=0==e.installtime?"-":m["a"].format(new Date(e.installtime),"yyyy-MM-dd"),e.deviceType=o,e.alarmactionStr=t.getAlarmActionStr(e.alarmaction),e.loginenableStr=0==e.loginenable?t.$t("bgManage.ban"):t.$t("bgManage.allow"),l&&(0==l.groupid?e.groupName=t.$t("common.defaultGroup"):e.groupName=l.groupname)})),t.tableList=n,t.loading=!1})).catch((function(e){console.log(e),t.loading=!1}))},currentChangePage:function(e){var t={count:this.pageSize,keyword:this.queryText,offset:e-1,all:!1,expiredays:0};this.queryDevices(t)},handleSizeChange:function(e){this.pageSize=e,this.currentChangePage(this.currentPage)},handleCurrentChange:function(e){this.currentChangePage(e)}}),mounted:function(){var e=this;this.isQueryInitData&&Object(be["X"])({filterenabled:0}).then((function(t){var i=t.packages;i=i||[],i.forEach((function(t){t.packagename=e.$t("systemManage.package"+t.packageid)})),e.packages=i;var a={count:e.pageSize,keyword:e.queryText,offset:0,all:!1,expiredays:0};e.queryDevices(a)}))}},Te=De,Se=(i("e182"),Object(g["a"])(Te,s,n,!1,null,null,null)),Ae=Se.exports;t["default"]=Ae},addb2:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAABC1JREFUWEftmF9oW3UUxz/ntiZTcI7Q3sYymYpDnUPFgRN8WeeEzRehMBRRmajIhg92sOa2e8jy4HJTtfNlIkyGMETEyaQqCtP6JjJB9MHV6RAZE5Obus0JronJPZK06W7ucvOnSUYfdt+Sc37f8/md37/z+wnL/JNlzsc1wHZHKDCD0TFd5yovCGxTuA0ItxtsoX1O4TeBLwzhnXRSTtbTvQJwXVxDs3kmUXYCRoeggmRchEOhOUbOHpBLtZyqAMtwOT4DtnQZzC8/3Rdm28mE5P2GKkDT0oPArqsMNx9OOOgk5eVAwGhM73GFH4Eej9OvCFYhxJfnEnKxE+CRuK7szbMFxQbWejSLhnJfOiU/eeMsZrA/pgdEeMVj/CUfZuOFhFzoBJhfY1VcV4VyfAvcWbGp8mY2JSM1AQcsnVG4q2IUeCpjy/vdgKtommM6jPKRJ+bPGVvurgloWpoDQhVjj7Lmz5ScaQQ4uE9vyF9iaEWe6aCVGKTRN6o3GgbeqZN3bKnazhaH2LRUvUKGYKaTkq0HOLhXbykUmEJYK8KTmaR82qhDfrs/rmNL1cINBJQCA5nXxQnsvaUbDPgKuKm8CIXHM0mZWhaA/ZZuFfjcBzPs2HLsqgEGDbEZ05cQ3q4BchaYwuVjZ0KONwu65CGuBWhaOglUbQO1QBRmRHjXCTFJQgr1YDsGOBDTwyo812xmFvxOi7I7k5JPgtq1DRgd0/6iywciDLUIt+iuwv5sUvbWat82oDmmu1HeWCqcZxM+nLHl+SqduBpmjqL3v6a3mcocjIzq6h6DIwKb2oUE9jm2JCo6q0f0+nyYf9sCXDyWLJ0A9rQJOesqO2ZTUirpyl/bQ+wFMmP6NMKRNiBL9d7FYg/3//Wq/FHSGbB0s1cvY8u093fLR505rvfi8h6w3ieUpJdDbo5e6cVUlwdEeAzYekWHlO+dlGxopqMtA5ZFS5N7jg8Rhi8vVR52UvKNP2jU0k0Ke5QyrHdlb88m5WgjyCWfxQvzJ16a+OUgwrNOUgKH34zpToS3PEBnHFvWLBkQg6izXzKNBMwxfQZlh+uya3ZCTtXzN0f1UYzynee6kp8BD6Zt+a5em8AM5iDyty3nGwG2ah8Y1/Xq8jXQh3LUScn2ZgGrClYtcnP2NUm3CtCMf9+oDhoGM8BK/8bsb7+YQX/Jr8oT2fMcuyOMUYi09kTSe45y8Xs6wn8kxK0FXS52i5Qq9pRjixXUsXqXplP5MA/NX5p0wU+qqu5G2SpdjOpduqLjOlRUNmdDxIM6cjmD83Pjh1rXTrfI8dkJ+acRkN9+a1xX/J6QuYbt4mo0BFzYNjp2cRd4xH8qNASt4dC1p4+uAJY60KnHo64BVrJcegopCi/K/Fl6e2VzbXaYDJeN6Qk50ax/w1XcrlC32l97Am43s8s+g/8D6wHPODIU0XIAAAAASUVORK5CYII="},b059:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAAu1JREFUWEftmDuMTVEUQNcmPgUJEf8JQUIxtYZK4RsUCgalROIzmIoOHdX4zESl9JkpNAQzEho0WiQKEt/BEILGCEf2u/vOO+9+5t773vXmFU43887ee539OWfvK7TYkhbjoRCQg0nAemAtsBJYCsywQ30FXgCPgDvAgMCvogfOBeQCo0eA/cDsnEY+Ab3AGQGFzbUygRx0qFJgbi6N8U0f9DACV/PIpwI5mAicB/ZFFL0CrgB3gafAMEEo24DFwBpgO7AkIncB6BT4PRZYIpDB9APbPGEFOQb0Zyk1eYU6BSzydFxT2LHk04DUMwc9RTeA3QLf8rg93ONgOnAZ2OzJ9Uqt7hqVMSAHO6iN9zmgS+BPERgPagLQDRzy5DsE+pL01QBZNT0D5thmFdop4OqB8aDUjuadHlbXR2BFUvVFgU4Ax03oNdAu8L0RmEj4Hns5dVJA7SWHzMFk4I13z2jOaPxLWw52AZdMoVZnm8CIb2DUQy5IvOv240tgWVY1FSW16ntu14OKbxHQghldPpAmb6f9clqCEi99ueAqOGqKe6Rqs/IvH+g+sNo2bhAYKJ2GSnXoW3jbdD+Uqs0YkGZ++E5pbN/+I6CFlquqfliqFR0D+kmQ2LqmCujfeqKNwEVgfp2AQ8AegVumT21UdAMjAlPScigN6F0DMKGtIYEFRYESQ+agDKD3Yh52kDtkD4BV0aR2sMlCNq/OkGku7hW4aR7KndQtV/bNuBj1odU2V/smXVulehnHqkyzX/Nllm0e36fD4us/rtqQ6eP6o87cqRFzMA14kvtxNSBt5pvRfujDujyz/TCoZjRo2mMlNv1pLWwPcMDz+fi1sOYlnTjSmvy+rHa29Cbfg0obg7Rxu2dJqje8Lm17220M0rCXNwb55WGD4lmvzy5adAp8uOFBMQKl1ddleRXeU1lgn22U7i51lI6AhR8b1nkfG2bani/ex4ZBYDDaL2edQH/PnO3zKClzz3+gLG+2nIf+AjPc2CWQPrm+AAAAAElFTkSuQmCC"},b174:function(e,t,i){},d03a:function(e,t,i){"use strict";var a=i("26c6");t["a"]=a["a"]},d71b:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAA0VJREFUWEftmE1sTFEUx3/nTar1UZQxQ9lggVpILAhbIj42NhILLEgkRIiEMW0kVQmmJSLtQlgQiQ2JjUVZWLERiQgJIvGxQvumJD4mWp15R+6YaV9r3rw3+kYTvN3L+5//+eWce++79wpALKmXUTYjRMx7NR+Bu2TZ2XtG7CB5JJbUK8COIOIQNY/slCwP4mcANYgwbI3WUp9uk69+vgbwG1BXEN5Q4a4Fll9gRd8dFGGBwv5CXCZbS+PHNvns52MAjajeCAW29qbkml/Q73yPJrTRsnhbiP3iOMzt65Avfl4jAYWDvafknF/Q73yPH9X5muV1IfaTnZLpQXx8AaMJXRSx2KuwFpgPTAxiXIHGDLE3wK1oLS3P2uS7O7YsYCyprcCRKkCV5hc+OjlW93XIi6LAE3BOQpfkLB7+Mbhh5BdTMyx72SUD+XkxYpK4xmA8qV0K+ypoVWhSVfan26WrLGAsqU+BJlfW247Fzr6T8j40EiDaonMsh0vAepfvfTslq/wAzWCtKQY5Fo1hwxW9C5DvXIADdkrya7Nni0f/YeyUSJiVG+3lle8/YNCq/7sVjDfrSsehRsDxrJaFqIMg9KRT8rKULvwKbtFIbCHdwLqgbTQ6y2FlT4c8qPokaTymk7L9ZCqBy2uVVrtdjlcd0CSIN2unOmyv4KjQq7ChVJvDb3GhBPFDOjlnBdvgltv/VQ2w4hZ7BPwHHGsl/44Komy32+WqqUbVNwu7tYaLMlisfLkKmrVsUn5rA50qXDervgj33G0LdTezRSM0obTJ0N+nHGCgg3uogCUGrDfgEb2DsMZvkI8b4NxmnTmo3ASWml+lCzR/mC8+4wZYBJjVqlP0mxmGPx/LYsS1xHgANrXqBM9tfNVn8agxVSrftKQ2lAP8Y4emWYd1tkRwnxa/2impjya0vhzgiGOnQLeTY1f6tPT4TahKvs9I6LwaiwsKG11xw8dOL7NYUs8CBytJFpZWhQPpU9JZWJtL25r+18ErhYawEgf0eTI1w4qhq49yQebKjCzdCosDmo9V9jgXYdOHE1K8RxxeVryczVT/0M8eLLapsgSYPFaKUfEZEZ7jcHVmHed/uX4LOVnodlW9zgiD9gcHaPATe7HGuwAAAABJRU5ErkJggg=="},e182:function(e,t,i){"use strict";i("ea5a")},e6ad:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAA6RJREFUWEftmEtoXGUYhp/vTNppwXqhyRmwgpeNgrQgrlyUgpsKtS4KRUHpwhuk3mrFzJmIxIA2Z1QqlnqpELBYBdESC+2yLtyKbnTrQtDinEkVG5OQ23nlP5mRaTOXc2bSECTfapjz/e888/637zvGOg9b53xsAPY6QyscHAh0H3DK4J5exRvHC34zYzgas2+y6K4A9AP9AtyVRSRD7myU50ZGbTHtmGaAMSRrsyL43lv+3HXEIIOdwO3A4mKe7X+O2pW0gs0Ap4AbEF9HZTuYVqhdnl9UGWMImFKeW6uj9k9a3WaA7t9tE5yvhrY/rVC7vIFAbxq8BvwdhXZzFs2WgAYXKqE9XBfrL2pfzmOvRB5jKfWPCAF7gHuBBcFpg3nEJsG0jDOTof3QSi8VYKGkRyTOpYbKmBh73D95zH5sNiwVoB/oDPA4JG6kXj8dOPuArbWcoSi0d3oBPAU86+DimLvdYs9o0op0y7HXxFfugcTz1bJ90D1gSR8iBoErUWg39Qrnxg+UtNvEd4mWOByV7aPVAJyKY3ZMvm09O+g2nWec3wDsdrrXzMGBQA95sE/gYckuvzY8iXlPjFfK9lPjuXrdp/iOEW2ZmWM2pYs/R6G5OzmJtXFwRH2FOc4JdreFFEvyOFkds9fXFrDuxpC2tQPMxcSVd226Mccv6QDirPvOxJFK2d5fV8dMIdCDgos1qMEotI/XFSAj8vx5TgC3LG5msFWNmPYudtfQYXfFrdZBnXJjrayW/UD1evDLamiP1a6lt0wMrwagX9JJif7NxnO/j9nlTqDtSv5fgQs1gXo915ODfqDPgCeSjQFHK6G9lx2wqL8wWlW9XQP6RZ3FOFADqnjGzj/GrJoZsFDUfhnHgULD4C3Apm6n2A90GjhU07tsHo9WjtnF/objybaiZr1Ky47tqsEexw2ezgw4oj5/ji+AxuZrKumR4bZr3IsR41HZXmn8PlVL6Qdyjr6ctenZUdL2BTHZaRobn0ehXcWUCrAQaFzwJDAr4xAx00lx0CRyyyXDTCW0b11LXAg4IpIlUw/3hmEiFnfWe+6almuoJqqhfZrdwaI+wXgmixMGJyqhvZQcU0W9YJYcyi4iiYPVsi1X0x0ilYPufY1B066rjf5EFFp917oS/0UT/923EnvSQKYCdBD+sHaxxAMYOZZ73eZhmBkLuTyfX3rDZhqT/ECvAq6iySOeisrmusW2kRqwk9D1er4B2KuzGw7+7x38F6GuEkf7sxM5AAAAAElFTkSuQmCC"},ea5a:function(e,t,i){},ec11:function(e,t,i){},ec62:function(e,t,i){},eca4:function(e,t,i){"use strict";i("b174")},fa04:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAAnlJREFUWEft109IFVEUx/HvmTIriiJ8M0IlBLWqtULUIqJNu0IoKCMMt1JQOgNBtHrXgiJoWQgZJUXYuoX0Z1H7CIJoERnpVRMriur5TsxrDIme3PdmBgTfne25Zz7zu3Pnj7DEhyxxHw1g2hVqJLi8EwzO6zZKXFfYmzaJ/80XKAEjE0ZOVeu/6D3oh/oM2JMHbmFPa6SqY3FgpNMom4BxlFcIAbAraf4SxTrjhTZgB6ACT1UpIZWLL1sja+tN8CPQqnBj0kiP36cH8HgUN/Ng37iRx67AQqjdAjcT0Ip4nh/qO6Ct/gRDHQM2A7etka5CpJ2i3K+ghEO2KA+dgZH2inItBmozGyYvylc/1PfAlvRA4Y4tyrEg1CMKwwmq0xp54AoMQj2jcCUG/oCWWSMzfhLAsgUetkZGnBOM9LQqV/NNsF+PqnA3uQd326I8dwX6/XocYSiubxJaPhRlOvMlLoR6UmAwQY2KEu9Cp6EeO1Ha4+JfysaZAZnNHBhE2qHKCydR9aKf1khz8pipPCUy2yRx00Ko/QK9wPqaocoUwrn53Z95gn9BF3Rly3fW1AqcuiRfFs7JD1irrEp9A5g2yNwSDM6qX2qqfOXUNLxVjMXv4PlJuQBb+7S97PEEWF2T7k/xNHN02MvyNrfHjB9pF8qtOnDJC4j9E0ZGcwPGjYNIe1D8sjLnBBXEA6+svJkckHu5LrETyLEol3vQ8dxOZQ2gU0yLFGWXIAxZIyfSgv6dn8U/yXi8aUUZnBiQ7qUI/Dz/WSXwWmFVJkhBKwdsj/vV/T1YCHVY4CCwrvKjmf34BnyyRrZWa53HSTO9jAYwbZyNBNMm+Bulxok4aKp6lAAAAABJRU5ErkJggg=="},facb:function(e,t,i){"use strict";i("ec11")}}]);