(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-52607016"],{"1de3":function(e,t){e.exports="data:image/png;base64,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"},2909:function(e,t,a){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=Array(t);a<t;a++)i[a]=e[a];return i}function n(e){if(Array.isArray(e))return i(e)}a.d(t,"a",(function(){return l}));a("a4d3"),a("e01a"),a("d28b"),a("a630"),a("d3b7"),a("3ca3"),a("ddb0");function s(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}a("fb6a"),a("b0c0"),a("ac1f"),a("00b4"),a("25f0");function r(e,t){if(e){if("string"==typeof e)return i(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(e,t):void 0}}a("d9e2");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return n(e)||s(e)||r(e)||o()}},"5e2f":function(e,t,a){},"8bec":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"role full"},[t("div",{staticClass:"role-header"},[t("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:e.$t("bgManage.roleAuthorize"),name:"authorize"}}),t("el-tab-pane",{attrs:{label:e.$t("bgManage.roleLists"),name:"roleList"}})],1)],1),t("div",{staticStyle:{"margin-top":"6px"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"authorize"==e.activeName,expression:"activeName=='authorize'"}],staticClass:"role-header-right"},[t("div",{staticStyle:{width:"280px"}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.queryUser")}},[t("el-input",{attrs:{placeholder:e.$t("bgManage.pleaseEnterQueryUser"),clearable:""},model:{value:e.searchTextUser,callback:function(t){e.searchTextUser=t},expression:"searchTextUser"}})],1)],1),t("div",{staticStyle:{width:"10px"}}),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.queryLocalUser}},[e._v(e._s(e.$t("common.query"))+"("+e._s(e.authorizeList.length)+")")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:"roleList"==e.activeName,expression:"activeName=='roleList'"}],staticClass:"role-header-right"},[t("div",{staticStyle:{width:"280px"}},[t("LabelWrap",{attrs:{label:e.$t("bgManage.qeuryRole")}},[t("el-select",{attrs:{filterable:"",clear:""},model:{value:e.searchTextRole,callback:function(t){e.searchTextRole=t},expression:"searchTextRole"}},[t("el-option",{attrs:{label:e.$t("monitor.all"),value:"all"}}),e._l(e.roleOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],2)],1)],1),t("div",{staticStyle:{width:"10px"}}),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.queryLocalRole}},[e._v(e._s(e.$t("common.query"))+"("+e._s(e.tableList.length)+")")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onOpenDialog}},[e._v(e._s(e.$t("common.add")))])],1)]),t("div",{staticClass:"role-table"},[t("div",{style:{zIndex:"roleList"==e.activeName?20:1}},[t("vxe-table",{attrs:{border:"",resizable:"","auto-resize":"","show-overflow":"",size:"mini","menu-config":e.tableMenu,height:"auto",data:e.tableList},on:{"menu-click":e.handleClickTableMenu,"cell-click":e.cellClick,"cell-dblclick":e.cellDblclick}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"rolename",title:e.$t("bgManage.roleName")}}),t("vxe-table-column",{attrs:{field:"creater",title:e.$t("monitor.creator")}}),t("vxe-table-column",{attrs:{field:"creatertimeStr",title:e.$t("alarm.createTime")}}),t("vxe-table-column",{attrs:{field:"remark",title:e.$t("reportForm.remarks")}}),t("vxe-table-column",{attrs:{field:"roletypeStr",title:e.$t("bgManage.roleType"),width:"85"}}),t("vxe-table-column",{attrs:{title:e.$t("reportForm.action"),width:"65"},scopedSlots:e._u([{key:"default",fn:function(a){return[1==a.row.roletype?t("div",{staticStyle:{"padding-top":"7px"}},[t("div"),t("el-dropdown",{attrs:{trigger:"click",size:"mini"},on:{command:e.onCommand}},[t("span",{staticStyle:{padding:"0px 10px"}},[t("img",{staticStyle:{width:"18px",cursor:"pointer"},attrs:{src:e.moreIcon}})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"see"}},[e._v(e._s(e.$t("common.see")))])],1)],1)],1):t("div",{staticStyle:{"padding-top":"7px"}},[t("div"),t("el-dropdown",{attrs:{trigger:"click",size:"mini"},on:{command:e.onCommand}},[t("span",{staticStyle:{padding:"0px 10px"}},[t("img",{staticStyle:{width:"18px",cursor:"pointer"},attrs:{src:e.moreIcon}})]),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"permission"}},[e._v(e._s(e.$t("common.permissionList")))]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"username"}},[e._v(e._s(e.$t("bgManage.userList")))]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"edit"}},[e._v(e._s(e.$t("common.edit")))]),t("el-dropdown-item",{staticClass:"clearfix",attrs:{command:"delete"}},[e._v(e._s(e.$t("common.delete")))])],1)],1)],1)]}}])})],1)],1),t("div",{style:{zIndex:"authorize"==e.activeName?20:1}},[t("vxe-table",{attrs:{border:"","menu-config":e.tableMenu,resizable:"","auto-resize":"","show-overflow":"",size:"mini",height:"auto",data:e.authorizeList},on:{"menu-click":e.handleClickTableMenu}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{title:e.$t("bgManage.user"),field:"username",sortable:""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[t("div",{staticClass:"parents-wrapper"},e._l(e.parentsList,(function(a){return t("div",{key:a.username},[e._v(e._s(a.username)+"("+e._s(a.usertypeStr)+")")])})),0),t("el-button",{staticStyle:{color:"#000000"},attrs:{slot:"reference",type:"text"},on:{click:function(t){return e.queryParents(a.row.username)}},slot:"reference"},[e._v(e._s(a.row.username))])],1)]}}])}),t("vxe-table-column",{attrs:{field:"showname",title:e.$t("bgManage.displayName"),sortable:""}}),t("vxe-table-column",{attrs:{field:"usertypeStr",title:e.$t("bgManage.userType"),sortable:""}}),t("vxe-table-column",{attrs:{title:e.$t("bgManage.role"),width:"240"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-select",{on:{change:function(t){return e.onChangeRole(a.row)}},model:{value:a.row.roleuuid,callback:function(t){e.$set(a.row,"roleuuid",t)},expression:"scope.row.roleuuid"}},e._l(e.roleOptions,(function(e,a){return t("el-option",{key:a,attrs:{value:e.value,label:e.label}})})),1)]}}])})],1)],1)]),t("AddRole",{ref:"addAialog",attrs:{roleRow:e.roleRow},on:{"add-role":e.addRole},model:{value:e.addAialog,callback:function(t){e.addAialog=t},expression:"addAialog"}}),t("PermissionAialog",{ref:"permissionAialog",model:{value:e.permissionAialog,callback:function(t){e.permissionAialog=t},expression:"permissionAialog"}}),t("BindUsersDialog",{ref:"bindUsersDialog",attrs:{title:e.bindUserTitle,users:e.users},model:{value:e.bindUsersDialog,callback:function(t){e.bindUsersDialog=t},expression:"bindUsersDialog"}})],1)},n=[],s=a("5530"),r=(a("c975"),a("d81d"),a("14d9"),a("d3b7"),a("159b"),a("201d")),o=a("e285"),l=(a("498a"),function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,center:"",visible:e.value,width:"360px","append-to-body":"","close-on-click-modal":!1},on:{close:e.handleClose}},[t("div",{staticClass:"margin_b10"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{staticStyle:{"text-align":"right","line-height":"32px"},attrs:{span:5}},[e._v(e._s(e.$t("bgManage.roleName")))]),t("el-col",{attrs:{span:18}},[t("el-input",{model:{value:e.rolename,callback:function(t){e.rolename="string"===typeof t?t.trim():t},expression:"rolename"}})],1)],1)],1),t("div",{staticClass:"margin_b10"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{staticStyle:{"text-align":"right","line-height":"32px"},attrs:{span:5}},[e._v(e._s(e.$t("reportForm.remarks")))]),t("el-col",{attrs:{span:18}},[t("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.remark,callback:function(t){e.remark="string"===typeof t?t.trim():t},expression:"remark"}})],1)],1)],1),t("div",{staticStyle:{"text-align":"center"}},[null==e.roleRow?t("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:e.addRole}},[e._v(e._s(e.$t("common.add")))]):t("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:e.editRole}},[e._v(e._s(e.$t("common.edit")))])],1)])}),c=[],u=(a("e9c4"),a("b64b"),a("2f62")),d={name:"AddRole",props:{value:{type:Boolean,default:!1},roleRow:{type:Object,default:null}},data:function(){return{rolename:"",remark:"",roleName:""}},computed:Object(s["a"])(Object(s["a"])({},Object(u["b"])(["isZh","userName"])),{},{title:function(){return this.isZh?null==this.roleRow?"添加角色":this.roleName+" - 编辑角色":null==this.roleRow?"Add Role":this.roleName+" - Edit Role"}}),watch:{value:function(e){e&&(null==this.roleRow?(this.rolename="",this.remark=""):(this.rolename=this.roleRow.rolename,this.remark=this.roleRow.remark))}},mounted:function(){},methods:{handleClose:function(){this.$emit("input",!1)},addRole:function(){var e=this,t={rolename:this.rolename,creater:this.userName,remark:this.remark};Object(o["s"])(t).then((function(t){var a=t.status,i=t.cause,n=t.role;0==a?(e.$emit("add-role",n),e.handleClose(),e.$XModal.message({message:e.$t("tips.addSucc"),status:"success",zIndex:9999})):e.$XModal.message({message:e.$t("tips.addFail")+i,status:"error",zIndex:9999})})).catch((function(e){}))},editRole:function(){var e=this,t=JSON.parse(JSON.stringify(this.roleRow));t.rolename=this.rolename,t.remark=this.remark,Object(o["T"])(t).then((function(a){var i=a.status,n=a.cause;0==i?(e.handleClose(),e.roleRow.rolename=t.rolename,e.roleRow.remark=t.remark,e.$XModal.message({message:e.$t("tips.editSucc"),status:"success",zIndex:9999})):e.$XModal.message({message:e.$t("tips.editFail")+n,status:"error",zIndex:9999})}))}}},h=d,m=a("2877"),p=Object(m["a"])(h,l,c,!1,null,null,null),f=p.exports,g=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,center:"",visible:e.value,width:"460px","append-to-body":"","close-on-click-modal":!1},on:{close:e.handleClose}},[t("div",{staticStyle:{height:"460px"}},[t("div",{staticStyle:{height:"40px"}},[t("div",{staticClass:"el-input el-input--small"},[t("input",{ref:"inputText",staticClass:"el-input__inner",staticStyle:{padding:"0 30px"},attrs:{type:"text",autocomplete:"off",placeholder:""}}),t("span",{staticClass:"el-input__prefix"},[t("span",{staticClass:"el-input__prefix-inner"},[t("i",{staticClass:"el-input__icon el-icon-search"})])]),t("span",{staticClass:"el-input__suffix",staticStyle:{cursor:"pointer"},on:{click:e.handleClear}},[t("span",{staticClass:"el-input__suffix-inner"},[t("i",{staticClass:"el-input__icon el-icon-circle-close"})])])])]),t("div",{staticStyle:{height:"380px"}},[t("el-scrollbar",{staticStyle:{height:"100%"}},[t("ul",{staticClass:"ztree",attrs:{id:e.ztreeId}})])],1),t("div",{staticStyle:{height:"50px","text-align":"center","padding-top":"10px"}},[t("el-button",{staticStyle:{width:"120px"},on:{click:e.handleClose}},[e._v(e._s(e.$t("common.cancel")))]),t("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary",disabled:1==e.roletype&&"admin"!==e.userName,loading:e.loading},on:{click:e.handleSave}},[e._v(e._s(e.$t("common.save")))])],1)])])},b=[],v=a("2909"),A=(a("99af"),a("13d5"),a("4e82"),a("b0c0"),a("4d63"),a("c607"),a("ac1f"),a("2c3e"),a("25f0"),a("5319"),a("4795"),function(e,t,a,i){var n=$.fn.zTree.getZTreeObj(e);if(n){var s=n.setting.data.key.name;a=!1!==a,i=!!i,n.setting.view.nameIsHTML=a;var r="[\\[\\]\\\\^\\$\\.\\|\\?\\*\\+\\(\\)]",o=new RegExp(r,"gi");$(t).bind("input propertychange",(function(){var e=$(this).val();h(e.trim())}));var l=null,c=""}function u(e,t,n){function r(n){if(n&&n.oldname&&n.oldname.length>0&&(n[s]=n.oldname),e.updateNode(n),0==t.length)return e.showNode(n),e.expandNode(n,i),!0;if(n[s]&&-1!=n[s].toLowerCase().indexOf(t.toLowerCase())){if(a){var r=t.replace(o,(function(e){return"\\"+e}));n.oldname=n[s];var l=new RegExp(r,"gi");n[s]=n.oldname.replace(l,(function(e){var t='<span style="color: whitesmoke;background-color: darkred;">'+e+"</span>";return t})),e.updateNode(n)}return e.showNode(n),!0}return e.hideNode(n),!1}t||(t="");var l=e.getNodesByFilter(r);d(l,t)}function d(e,t){if(e&&e.length>0)if(t.length>0)$.each(e,(function(e,t){var a=t.getPath();if(a&&a.length>0)for(var i=0;i<a.length-1;i++)n.showNode(a[i]),n.expandNode(a[i],!0)}));else{var a=n.getNodesByParam("level","0");$.each(a,(function(e,t){n.expandNode(t,!0)}))}}function h(e){l&&clearTimeout(l),l=setTimeout((function(){c!==e&&(u(n,e),c=e)}),500)}}),y=a("bde4"),w=a("1de3"),x={name:"PermissionAialog",props:{value:{type:Boolean,default:!1}},data:function(){return{loading:!1,searchText:"",checkedCount:0,totalCount:0,roletype:1,roleName:""}},computed:Object(s["a"])({title:function(){return this.roleName+" - "+this.$t("common.setPermission")+"("+this.checkedCount+"/"+this.totalCount+")"},ztreeId:function(){return"ztreeEl_".concat(this._uid)}},Object(u["b"])(["isZh","userName"])),watch:{value:function(e){0==e&&(this.ztreeIns&&(this.ztreeIns.destroy(),this.ztreeIns=null),this.$refs.inputText.value="")},searchText:function(e){this.searchZtree(this,e.trim())}},mounted:function(){this.setting={view:{dblClickExpand:!1},check:{enable:!0,chkStyle:"checkbox",chkboxType:{Y:"ps",N:"s"}},callback:{onCheck:this.onTreeCheck,onClick:this.zTreeOnClick}},this.ztreeIns=null},methods:{handleClear:function(){this.$refs.inputText.value="",this.$refs.inputText.dispatchEvent(new InputEvent("input"))},queryPermissionsTree:function(e,t){var a=this,i=this.isZh;this.roleuuid=e,this.roletype=t,Object(o["Cb"])(e).then((function(e){var n=e.records;n&&(n.forEach((function(e){e.name=i?e.showname:e.shownameen})),a.records=n,a.setTreeNodes(),a.initZtree(a.treeNodes,t))}))},setTreeNodes:function(){var e=this.$t("monitor.all"),t=this.generateTree(this.records),a=0,i=0;t.forEach((function(e){a+=e.totalCount,i+=e.checkedCount,e.checked&&i++})),a+=t.length,this.checkedCount=i,this.totalCount=a;var n=[{name:"".concat(e,"(").concat(i,"/").concat(this.totalCount,")"),children:t,open:!0,icon:y,totalCount:a,showname:e,shownameen:e}];this.treeNodes=n},generateTree:function(e){var t=e.reduce((function(e,t){return e[t.permissiontemplateid]=t,e}),{}),a=[];function i(e){for(var t=0,a=0;a<e.length;a++){var n=e[a],s=n.children;s?t+=1+i(s):t++}return t}function n(e){for(var t=0,a=0;a<e.length;a++){var i=e[a],s=i.children;if(s){var r=n(s);t+=r,r>0&&t++}else i.checked&&t++}return t}function s(e){e.forEach((function(e){if(e.children&&e.children.length>0){var t=i(e.children),a=n(e.children);e.totalCount=t,e.checkedCount=a,e.name+="(".concat(a,"/").concat(t,")"),s(e.children)}}))}return e.forEach((function(e){if(!e.pid)return e.children?e.icon=y:e.icon=w,void a.push(e);e.icon=w;var i=t[e.pid];if(i){var n=[].concat(Object(v["a"])(i.children||[]),[e]);n.sort((function(e,t){return e.permissionlevel-t.permissionlevel})),i.icon=y,i.children=n}})),a.sort((function(e,t){return e.permissionlevel-t.permissionlevel})),s(a),a},handleClose:function(){this.$emit("input",!1)},initZtree:function(e,t){if(this.ztreeIns&&this.ztreeIns.destroy(),this.ztreeIns=$.fn.zTree.init($("#".concat(this.ztreeId)),this.setting,e),"admin"!==this.userName&&1==t){var a=this.ztreeIns.getNodes();this.ztreeIns.setChkDisabled(a[0],!0,!0,!0)}A(this.ztreeId,this.$refs.inputText,!1,!1)},updateTreeNodeCheckedCount:function(){var e=this.isZh,t=this.ztreeIns,a=t.getNodes();function i(e){for(var t=0,a=0;a<e.length;a++){var n=e[a],s=n.children;if(s){var r=i(s);t+=r,r>0&&t++}else n.checked&&t++}return t}function n(a){a.forEach((function(a){if(a.children&&a.children.length>0){var s=a.totalCount,r=i(a.children);a.checkedCount=r,a.name="".concat(e?a.showname:a.shownameen,"(").concat(r,"/").concat(s,")"),n(a.children),t.updateNode(a)}}))}n(a)},onTreeCheck:function(e,t,a){var i=this.$t("monitor.all"),n=this.ztreeIns.getNodes(),s=this.ztreeIns.transformToArray(n),r=0;s.forEach((function(e){e.showname!==i&&e.checked&&r++})),this.checkedCount=r,this.updateTreeNodeCheckedCount()},zTreeOnClick:function(e,t,a){this.ztreeIns.checkNode(a,!a.checked,!0),this.onTreeCheck(e,t,a)},handleSave:function(){var e=this,t=[],a=this.$t("monitor.all"),i=this.ztreeIns.getNodes(),n=this.ztreeIns.transformToArray(i);n.forEach((function(e){e.showname!==a&&e.checked&&t.push(e.permissionname)}));var s={roleuuid:this.roleuuid,permissions:t};this.loading=!0,Object(o["U"])(s).then((function(t){var a=t.status,i=t.cause;0==a?e.$XModal.message({message:e.$t("tips.saveSucc"),status:"success",zIndex:9999}):e.$XModal.message({message:e.$t("tips.saveFail")+i,status:"error",zIndex:9999}),e.loading=!1})).catch((function(t){e.loading=!1}))}}},k=x,C=Object(m["a"])(k,g,b,!1,null,null,null),S=C.exports,M=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.roleName+" - "+e.title,center:"",visible:e.value,width:"360px","append-to-body":"","close-on-click-modal":!1},on:{close:e.handleClose}},[t("vxe-table",{attrs:{border:"",resizable:"","auto-resize":"","show-overflow":"",size:"mini",height:"240",data:e.users}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index")}}),t("vxe-table-column",{attrs:{field:"user",title:e.$t("login.username"),sortable:""}})],1)],1)},L=[],z={name:"BindUsersDialog",props:{value:{type:Boolean,default:!1},title:{type:String,default:""},users:{type:Array,default:function(){return[]}}},data:function(){return{roleName:""}},mounted:function(){},methods:{handleClose:function(){this.$emit("input",!1)}}},N=z,T=Object(m["a"])(N,M,L,!1,null,null,null),O=T.exports,I=a("5101"),R=a("c276"),U=a("a05b"),E=a("7b49"),j={name:"RoleList",data:function(){return{moreIcon:E,activeName:"authorize",searchTextUser:"",searchTextRole:"",userOptions:[],roleOptions:[],addAialog:!1,permissionAialog:!1,bindUsersDialog:!1,loading:!1,roleRow:null,tableList:[],users:[],parentsList:[],bindUserTitle:"",authorizeList:[]}},computed:Object(s["a"])({},Object(u["b"])(["isZh","userName"])),mixins:[U["a"]],components:{AddRole:f,PermissionAialog:S,BindUsersDialog:O,LabelWrap:r["a"]},mounted:function(){this.permissions=[],this.queryRoles()},methods:{queryLocalUser:function(){var e=this.searchTextUser.toLocaleLowerCase(),t=[];this.cacheAuthorizeList.forEach((function(a){(""==e||-1!=a.username.toLocaleLowerCase().indexOf(e)||a.showname&&-1!=a.showname.toLocaleLowerCase().indexOf(e))&&t.push(a)})),this.authorizeList=t},queryLocalRole:function(){var e=this.searchTextRole,t=[];this.cacheTableList.forEach((function(a){"all"!=e&&a.roleuuid!=e||t.push(a)})),this.tableList=t},onChangeRole:function(e){var t=this;Object(o["V"])(e).then((function(e){var a=e.status;0==a?t.$XModal.message({message:t.$t("tips.editSucc"),status:"success",zIndex:9999}):t.$XModal.message({message:t.$t("tips.editFail"),status:"error",zIndex:9999})}))},onCommand:function(e){var t=this,a=this.row;switch(e){case"see":this.handleViewPermission(a);break;case"permission":this.handleViewPermission(a);break;case"edit":this.handleEdit(a);break;case"username":this.handleSee(a);break;case"delete":this.$confirm(this.$t("tips.confirmDelete"),{title:this.$t("bgManage.tip"),center:!0,customClass:"MessageBox_confirm"}).then((function(e){"confirm"==e&&t.handleDelete(a)})).catch((function(e){}));break}},queryParents:function(e){var t=this;this.parentsList=[],Object(o["Ab"])(e).then((function(e){var a=e.status,i=e.records;0==a&&(i.forEach((function(e){e.usertypeStr=Object(R["ab"])(t.isZh,e.usertype)})),t.parentsList=i)}))},cellClick:function(e){var t=e.row;this.row=t},cellDblclick:function(e){var t=e.row;this.handleViewPermission(t)},onOpenDialog:function(){this.roleRow=null,this.addAialog=!0},handleViewPermission:function(e){var t=e.roleuuid,a=e.roletype,i=e.rolename;this.permissionAialog=!0,this.$refs.permissionAialog.roleName=i,this.$refs.permissionAialog.queryPermissionsTree(t,a)},handleDelete:function(e){var t=this,a=(this.isZh,0);this.tableList.forEach((function(t,i){t.roleuuid==e.roleuuid&&(a=i)})),Object(o["G"])(e.roleuuid).then((function(i){var n=i.status,s=i.users;if(0==n){t.$XModal.message({message:t.$t("tips.deleteSucc"),status:"success",zIndex:9999}),t.$delete(t.tableList,a);var r=[];t.tableList.forEach((function(e){var t=e.remark,a=e.rolename+"(".concat(e.creater,")");t&&(a+="-"+t),r.push({label:a,value:e.roleuuid})})),t.roleOptions=r;var o=[];t.cacheTableList.forEach((function(t,a){t.roleuuid!==e.roleuuid&&o.push(t)})),t.cacheTableList=o}else 1==n?t.$XModal.message({message:t.$t("tips.deleteFail")+":"+t.$t("tips.noPermission"),status:"success",zIndex:9999}):2==n&&(t.$refs.bindUsersDialog.roleName=e.rolename,t.bindUsersDialog=!0,t.users=s.map((function(e){return{user:e}})),t.bindUserTitle=t.$t("tips.deleteFail")+"-"+t.$t("common.bindUser")+"("+s.length+")")}))},handleSee:function(e){var t=this;Object(o["Sb"])(e.roleuuid).then((function(a){var i=a.users;i&&i.length>0?(t.bindUsersDialog=!0,t.$refs.bindUsersDialog.roleName=e.rolename,t.users=i.map((function(e){return{user:e}})),t.bindUserTitle=t.$t("common.bindUser")+"("+i.length+")"):t.$XModal.message({message:t.$t("missing.roleNoBindUser"),status:"error",zIndex:9999})}))},handleEdit:function(e){this.roleRow=e,this.$refs.addAialog.roleName=e.rolename,this.addAialog=!0},queryRoles:function(){var e=this;this.loading=!0;var t=this.isZh;Object(o["Kb"])({}).then((function(a){var i=a.status,n=a.roles,s=[],r=[];0==i&&null!=n&&n.forEach((function(a){1==a.roletype&&0==t&&(a.rolename=a.rolenameen),a.roletypeStr=1==a.roletype?e.$t("bgManage.system"):e.$t("bgManage.custom"),a.creatertimeStr=I["a"].longToLocalDateTimeStr(a.createtime);var i=a.remark,n=a.rolename+"(".concat(a.creater,")");i&&(n+="-"+i),r.push({label:n,value:a.roleuuid}),s.push(a)})),e.roleOptions=r,e.tableList=s,e.cacheTableList=s,e.loading=!1})).catch((function(t){console.log(t),e.loading=!1})),Object(o["Rb"])(this.userName,1).then((function(t){var a=[],i=[{username:"all",showname:e.$t("monitor.all")}];0==t.status&&t.userlists&&(t.userlists.forEach((function(t){t.usertypeStr=Object(R["ab"])(e.isZh,t.usertype)})),a=t.userlists,a.forEach((function(e){i.push(e)}))),e.userOptions=i,e.authorizeList=a,e.cacheAuthorizeList=a}))},addRole:function(e){e.creatertimeStr=I["a"].longToLocalDateTimeStr(e.createtime);var t=e.remark,a=e.rolename+"(".concat(e.creater,")");t&&(a+="-"+t),this.roleOptions.push({label:a,value:e.roleuuid}),this.cacheTableList.push(e),this.tableList=this.cacheTableList}}},B=j,Z=(a("f88c"),Object(m["a"])(B,i,n,!1,null,null,null)),Y=Z.exports;t["default"]=Y},bde4:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAdJJREFUOE+lkzFMFEEUhv83B40Fsgu9zc2dQQsToKIAQ2UQLAQSSCw17Jw2EIgJDRQWQkhUvDlsJaFAKEw0FCQKJFbGwkSN3m6opAJ2KQ2GeWRWN9nz4CBxynn//817f+YR/vPQaf5mvZ03/HvI1o0RGwcP5MZJ2hMBji4PE+gpiNfBJAD0ApgMlXzyL6QK4JS+dxAyRRCGwxH5zRrcBb8FjCXGUSHyLn9IQ6oB2n8N4Euk5GRa6Gj/EYCrkZK3zgK8J+LnoZdbTQvdUvk2M92PlLxeG1AsT5AQnaGX7akEBG/ZmM2okJupCYhn1sEbEH8E4VUsZgyAqT1U2ZtnhhgHdmQGQaIfwJW/hq9gs4KMWE6CTUAVIbranwMwCqZxMK9dONzd/nXRrcNhptUYbgPRLAMPIyUfVwEcHYwL8BDXoy+8K3/aTpLXHB3cI/ALAWoz4EUiXtj3cs8sJO6gsVi+JkAvSZgb+15+Jx7DYBmEMWa6lJj3VPbTnxpvGcHdByP5zzGgqeTfYUZvqORg0lqzDloN+B2ABvuyNSc1V/trDF6MVG4pBrjFH1PpdJO/byH23pob5/0uUYfOtC705HRNQFocA4TpqgAU8lOnbuN5t/wYZEDEEfMs/RoAAAAASUVORK5CYII="},f88c:function(e,t,a){"use strict";a("5e2f")}}]);