(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66f17d11"],{1827:function(t,e,i){"use strict";i("7fb7")},"600f":function(t,e,i){"use strict";i.r(e);i("b0c0");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report full"},[e("split-pane",{staticStyle:{height:"100%"},attrs:{horizontalModeShowLeft:t.horizontalModeShowLeft,mode:"horizontal",min:"200",max:"600"},on:{"on-resize":t.onResize,"on-resizing-end":t.handleMoving},model:{value:t.offsetVertical,callback:function(e){t.offsetVertical=e},expression:"offsetVertical"}},[e("div",{staticClass:"report-left",attrs:{slot:"left"},slot:"left"},[e("div",{staticClass:"report-left-search"},[e("div",{staticClass:"report-left-search-input"},[e("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:t.$t("common.pleaseEnterReportName"),"prefix-icon":"el-icon-search",clearable:""},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1),e("div",{staticClass:"report-left-search-popup"},[e("NavView",{attrs:{navList:t.navList},on:{select:t.onSelect}})],1)]),e("div",{staticClass:"report-left-tab"},[e("div",{class:["all"==t.tabActive?"tab_active":""],on:{click:function(e){t.tabActive="all"}}},[t._v(t._s(t.$t("monitor.all"))+"("+t._s(t.allCount)+")")]),e("div",{class:["stared"==t.tabActive?"tab_active":""],on:{click:function(e){t.tabActive="stared"}}},[t._v(t._s(t.$t("monitor.stared"))+"("+t._s(t.likeList.length)+")")])]),e("div",{directives:[{name:"show",rawName:"v-show",value:"all"==t.tabActive,expression:"tabActive == 'all'"}],staticClass:"report-left-menu"},[e("div",[e("el-menu",{attrs:{"default-active":t.defaultActive,"default-openeds":t.defaultOpeneds,"background-color":"#ffffff","text-color":"#000","active-text-color":"#2681FF","collapse-transition":t.transition,"unique-opened":t.uniquePpened},on:{select:t.onSelect}},[t._l(t.navList,(function(i){return[e("el-submenu",{key:i.key,attrs:{index:i.key}},[e("template",{slot:"title"},[e("span",{class:["icon",i.iconClass]}),e("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(i.title)+" "),e("span",{staticStyle:{"font-size":"12px"}},[t._v(" ("+t._s(i.children.length)+")")])])]),t._l(i.children,(function(i){return e("el-menu-item",{key:i.key,attrs:{index:i.key}},[e("template",{slot:"title"},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(i.title))]),e("div",{staticClass:"from-like"},[e("div",{class:[1==i.stared?"form-like-icon":"form-like-def-icon"],attrs:{routeName:i.key},on:{click:t.onClickLike}})])])],2)}))],2)]}))],2)],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:"stared"==t.tabActive,expression:"tabActive == 'stared'"}],staticClass:"report-left-menu"},[e("div",[e("el-menu",{attrs:{"default-active":t.defaultActive,"background-color":"#ffffff","text-color":"#000","active-text-color":"#2681FF"},on:{select:t.onSelect}},[t._l(t.likeList,(function(i){return[e("el-menu-item",{key:i.key,attrs:{index:i.key}},[e("template",{slot:"title"},[e("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(i.title))]),e("div",{staticClass:"from-like",staticStyle:{"padding-top":"20px"}},[e("div",{class:[1==i.stared?"form-like-icon":"form-like-def-icon"],attrs:{routeName:i.key},on:{click:t.onClickLike}})])])],2)]}))],2)],1)])]),e("div",{staticClass:"report-content",attrs:{slot:"right"},slot:"right"},[e("div",{staticClass:"report-content-nav"},[e("NavTag",{attrs:{prefix:"reportForm",defaultActive:t.defaultActive,type:"reportrecent"},on:{select:t.onSelect},model:{value:t.reportTagList,callback:function(e){t.reportTagList=e},expression:"reportTagList"}})],1),e("div",{staticClass:"report-content-view"},["reportForm"==t.$route.name?e("div",{staticClass:"full",staticStyle:{padding:"10px 10px 10px 16px"}},[e("div",{staticClass:"full",staticStyle:{position:"relative"}},[e("div",{staticClass:"default-background"},[e("div"),e("p",[e("span",{staticStyle:{"margin-left":"30px"}},[t._v(t._s(t.$t("tips.selectReport")))])])])])]):t._e(),e("keep-alive",{directives:[{name:"show",rawName:"v-show",value:"reportForm"!==t.$route.name,expression:"$route.name !== 'reportForm'"}],attrs:{include:t.reportTagList,exclude:["safetyDayReport"]}},[e("router-view",{ref:"routerView"})],1)],1)])])],1)},a=[],o=i("5530"),r=(i("4de4"),i("caad"),i("c975"),i("14d9"),i("b64b"),i("d3b7"),i("07ac"),i("2532"),i("159b"),i("4795"),i("6e52")),n=i("632c"),l=i("243a"),c=i("adb3"),u=i("232d"),f=i("1c31"),d=i("2f62"),h={name:"ReportForm",data:function(){return{tabActive:"all",searchText:"",offsetVertical:"300px",defaultActive:"",allCount:0,navList:[],likeList:[],defaultOpeneds:[],uniquePpened:!0,horizontalModeShowLeft:!0,transition:!1}},components:{SplitPane:n["a"],NavView:l["a"],NavTag:c["a"]},computed:Object(o["a"])({},Object(d["b"])(["isQueryInitData","reportDefaultRouter","reportTagList","permissionList"])),beforeRouteEnter:function(t,e,i){i()},mounted:function(){this.cacheNavList=[],null!=this.reportDefaultRouter&&this.onSelect(this.reportDefaultRouter),this.isQueryInitData&&this.init()},watch:{isQueryInitData:function(t){t&&(this.defaultActive=this.$route.name,this.init())},$route:function(t){this.defaultActive=t.name},searchText:function(t){if(t=t.toLowerCase(),"all"==this.tabActive)if(""==t)this.defaultOpeneds=[],this.uniquePpened=!0,this.navList=this.cacheNavList;else{this.uniquePpened=!1;var e=[],i={};this.cacheNavList.forEach((function(s){if(s.title.toLowerCase().indexOf(t)>-1)i[s.key]=s.key,e.push(Object(o["a"])({},s));else{var a=[];s.children.forEach((function(e){e.title.toLowerCase().indexOf(t)>-1&&a.push(Object(o["a"])({},e))}));var r=Object(o["a"])({},s);i[r.key]=r.key,r.children=a,a.length>0&&e.push(r)}})),this.navList=e,this.defaultOpeneds=Object.keys(i)}else if(""==t)this.likeList=this.cacheLikeList;else{var s=[];this.cacheLikeList.forEach((function(e){e.title.toLowerCase().indexOf(t)>-1&&s.push(Object(o["a"])({},e))})),this.likeList=s}}},methods:Object(o["a"])(Object(o["a"])({},Object(d["c"])(["setReportDefaultRouter","setReportTagList"])),{},{init:function(){var t=this.getNavList(u["a"]),e=t.allCount,i=t.navList;this.navList=i,this.allCount=e,this.likeList=this.getLikeList(),this.cacheNavList=i,this.cacheLikeList=this.likeList},onResize:function(t){var e=this;this.horizontalModeShowLeft=t,setTimeout((function(){try{e.$refs.routerView.$refs.echartsIns&&e.$refs.routerView.$refs.echartsIns.resize(),e.$refs.routerView.resize&&e.$refs.routerView.resize()}catch(t){console.log(t)}}),300)},handleMoving:function(){this.onResize(this.horizontalModeShowLeft)},onClickLike:function(t){var e=this;t.stopPropagation();var i=t.target,s=i.getAttribute("routeName"),a=null,o=null;this.navList.forEach((function(t,e){t.children.forEach((function(t){t.key==s&&(a=t,o=e)}))}));var n=1==a.stared,l={subaction:n?"remove":"add",favoritename:a.key,type:"reportstared"};Object(f["y"])(l).then((function(t){var i=t.status;0==i&&(a.stared=n?0:1,e.cacheNavList[o].stared=n?0:1,r["a"].staredReports[a.key]=n?0:1,e.likeList=e.getLikeList(),e.cacheLikeList=e.likeList)}))},onSelect:function(t){if(t!=this.defaultActive&&(this.setReportDefaultRouter(t),this.$router.push("/reportForm/".concat(t)),0==this.reportTagList.includes(t))){var e={subaction:"add",favoritename:t,type:"reportrecent"};Object(f["y"])(e),this.reportTagList.push(t)}},getNavList:function(t){var e=this,i={},s=0,a=r["a"].staredReports,o=this.permissionList;return t.forEach((function(t,r){var n=t.path,l=t.meta,c=l.isChildren,u=l.titleI18n,f=l.parentI18n,d=l.permissionKey;if(c){if(void 0==i[f]&&(i[f]={title:e.$t("reportForm.".concat(f)),key:f,children:[],iconClass:"".concat(f,"_icon")}),-1==o.indexOf(d))return;"deviceType"==u&&(u="modelOverview"),i[f].children.push({title:e.$t("reportForm.".concat(u)),key:n,stared:void 0==a[n]?0:a[n]}),s++}else i[n]={title:e.$t("reportForm.".concat(u)),key:n}})),{allCount:s,navList:Object.values(i).filter((function(t){return t.children.length>0}))}},getLikeList:function(){var t=[];return this.navList.forEach((function(e,i){e.children.forEach((function(e){1==e.stared&&t.push(Object(o["a"])({},e))}))})),t}}),destroyed:function(){}},p=h,v=(i("1827"),i("2877")),m=Object(v["a"])(p,s,a,!1,null,null,null),k=m.exports;e["default"]=k},"7fb7":function(t,e,i){}}]);