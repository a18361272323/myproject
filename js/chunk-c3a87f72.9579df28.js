(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c3a87f72"],{1665:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"report-form full tempHumiMonth"},[t("div",{staticClass:"report-form-inner"},[t("div",{staticClass:"report-form-inner-header",staticStyle:{height:"35px"}},[t("div",{staticClass:"f_left"},[t("SingleChoiceVehicle",{attrs:{placeholder:this.$t("tips.selectSingleDevice"),width:"230px"},model:{value:e.deviceid,callback:function(t){e.deviceid=t},expression:"deviceid"}})],1),t("div",{staticClass:"f_left"},[t("SelectDate",{attrs:{dateType:"month"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1),t("div",{staticClass:"f_left",staticStyle:{width:"100px"}},[t("el-select",{model:{value:e.tempindex,callback:function(t){e.tempindex=t},expression:"tempindex"}},e._l(e.tempIndexList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.handleQuery}},[e._v(e._s(e.$t("common.query"))+" ")])],1),t("div",{staticClass:"f_left"},[t("el-button",{attrs:{type:"primary",loading:e.exportLoading1},on:{click:e.exportData}},[e._v(e._s(e.$t("common.export")))])],1)]),t("div",{staticClass:"report-form-inner-content",staticStyle:{top:"39px"}},[t("div",[t("div",{staticStyle:{"padding-bottom":"5px"}},[t("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"menu-config":e.tableMenu,"highlight-current-row":"","auto-resize":"",border:"",resizable:"","show-overflow":"","highlight-hover-row":"",height:"auto",data:e.detaileList,size:"mini"},on:{"menu-click":e.handleClickTableMenu,"cell-click":e.handleClickRow}},[t("vxe-table-column",{attrs:{type:"seq",width:"60",title:e.$t("reportForm.index"),fixed:"left"}}),t("vxe-table-column",{attrs:{fixed:"left",field:"statisticsday",width:"280",sortable:"",title:e.$t("reportForm.time")}}),t("vxe-table-column",{attrs:{field:"devicename",width:"120",sortable:"",title:e.$t("alarm.devName")}}),t("vxe-table-column",{attrs:{field:"tempIndexStr",sortable:"",width:"90",title:e.$t("reportForm.tempIndex")}}),t("vxe-table-column",{attrs:{field:"alarmstatus",sortable:"",width:"80",title:e.$t("reportForm.status")}}),t("vxe-table-column",{attrs:{field:"stemp",formatter:e.numberToFixed2,align:"right",sortable:"",width:"110",title:e.$t("reportForm.beginTemp")}}),t("vxe-table-column",{attrs:{field:"etemp",formatter:e.numberToFixed2,align:"right",sortable:"",width:"100",title:e.$t("reportForm.endTemp")}}),t("vxe-table-column",{attrs:{field:"threshold",width:"100",sortable:"",title:e.$t("device.threshold")}}),t("vxe-table-column",{attrs:{field:"duration",align:"right",width:"120",sortable:"",title:e.$t("common.duration")}}),t("vxe-table-column",{attrs:{field:"distance",formatter:e.numberToFixed2,align:"right",width:"90",sortable:"",title:e.$t("reportForm.mileage")}}),t("vxe-table-column",{attrs:{field:"address",title:e.$t("reportForm.address")}})],1)],1),t("div",{staticStyle:{"padding-top":"5px"}},[t("split-pane",{staticStyle:{height:"100%"},attrs:{horizontalModeShowLeft:e.horizontalModeShowLeft,mode:"horizontal",min:"200",max:"1200"},on:{"on-resize":e.onResize,"on-resizing-end":e.onResizingEnd},model:{value:e.offsetVertical,callback:function(t){e.offsetVertical=t},expression:"offsetVertical"}},[t("div",{staticStyle:{height:"100%","background-color":"#ffffff"},attrs:{slot:"left"},slot:"left"},[t("ReportMap",{ref:"mapIns"})],1),t("div",{staticStyle:{height:"100%","background-color":"#ffffff"},attrs:{slot:"right"},slot:"right"},[t("TempHumiEcharts",{ref:"echartsIns"})],1)])],1)])])])])},a=[],s=i("5530"),r=(i("14d9"),i("3c65"),i("a9e3"),i("d3b7"),i("159b"),i("4795"),i("2f62")),o=i("d462"),c=i("d03a"),l=i("80f4"),h=function(){var e=this,t=e._self._c;return t("div",{ref:"chartId",staticClass:"full"})},d=[],u=i("ade3"),f=(i("b0c0"),i("b680"),i("43c8")),m=i.n(f),p=i("c276"),v=i("5101"),g=i("5aff"),b={name:"TempHumiEcharts",computed:Object(s["a"])({},Object(r["b"])(["isZh"])),methods:{initChart:function(){this.distance=[],this.recvtime=[],this.veo=[],this.totalad=[],this.notRunOil=[],this.temp1=[],this.temp2=[],this.temp3=[],this.temp4=[],this.devStates=[],this.devReissue=[],this.disMin=0,this.totalDistanceMin=0;var e=this.$t("reportForm.temp2"),t=this.$t("reportForm.temp3"),i=this.$t("reportForm.temp4");this.selectedLegend=Object(u["a"])(Object(u["a"])(Object(u["a"])({},e,!1),t,!1),i,!1),this.chartsIns=m.a.init(this.$refs.chartId),this.chartsIns.setOption(this.getChartsOption(),!0)},updateChartsOption:function(e){var t=this,i=[],n=[],a=[],s=[],r=[],o=[],c=[],l=[],h=[],d=0;e.forEach((function(e,u){0==u&&(d=e.totaldistance),s.push(e.temp1<65535?e.temp1/100:"-"),r.push(e.temp2<65535?e.temp2/100:"-"),o.push(e.temp3<65535?e.temp3/100:"-"),c.push(e.temp4<65535?e.temp4/100:"-"),l.push(e.strstatus),h.push(0==e.reissue?t.$t("header.no"):t.$t("header.yes")),n.push(v["a"].longToLocalDateTimeStr(e.updatetime)),a.push(Number((e.speed/1e3).toFixed(0))),i.push(Number((e.totaldistance-d).toFixed(3)))})),this.distance=i,this.recvtime=n,this.veo=a,this.temp1=s,this.temp2=r,this.temp3=o,this.temp4=c,this.devStates=l,this.devReissue=h,this.totalDistanceMin=d,this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.resize()},resize:function(){this.chartsIns.resize()},getChartsOption:function(){var e=this.$t("reportForm.speed"),t=this.$t("reportForm.mileage"),i=this.$t("reportForm.time"),n=this.$t("reportForm.temp1"),a=this.$t("reportForm.temp2"),r=this.$t("reportForm.temp3"),o=this.$t("reportForm.temp4"),c=this.$t("reportForm.status"),l=this.$t("reportForm.reissue");this.totalDistanceMin;return{grid:{top:40,left:60,right:60,bottom:20},tooltip:Object(s["a"])(Object(s["a"])({trigger:"axis"},g["a"]),{},{formatter:function(s){var c="<div>".concat(s[0].name,"</div>");for(var l in s){var h=s[l].seriesName,d=s[l].value;h&&h!=i&&(c+=h==t?Object(p["i"])(g["b"],h,d,"km"):h==e?Object(p["i"])(g["h"],h,d,"km/h"):h==n?Object(p["i"])(g["d"],h,d,"℃"):h==a?Object(p["i"])(g["e"],h,d,"℃"):h==r?Object(p["i"])(g["f"],h,d,"℃"):h==o?Object(p["i"])(g["g"],h,d,"℃"):Object(p["i"])(g["m"],h,d,""))}return'<div style="width:230px">'.concat(c,"</div>")}}),legend:{data:[e,t,n,a,r,o],selected:this.selectedLegend,x:"left"},xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!1},data:this.recvtime}],yAxis:[{name:e,type:"value",nameTextStyle:10,nameGap:5},{name:t,type:"value",nameTextStyle:10,nameGap:2,min:this.disMin,axisLabel:{formatter:"{value} km"},axisTick:{show:!1}}],series:[{name:i,type:"line",symbol:"none",yAxisIndex:1,color:"#F0805A",smooth:!0,data:this.recvtime},{name:e,type:"line",symbol:"none",yAxisIndex:0,smooth:!0,color:g["h"],data:this.veo},{name:t,type:"line",symbol:"none",yAxisIndex:1,color:g["b"],smooth:!0,data:this.distance},{smooth:!0,name:n,type:"line",symbol:"none",color:g["d"],data:this.temp1},{smooth:!0,name:a,type:"line",symbol:"none",color:g["e"],data:this.temp2},{smooth:!0,name:r,type:"line",symbol:"none",color:g["f"],data:this.temp3},{smooth:!0,name:o,type:"line",symbol:"none",color:g["g"],data:this.temp4},{smooth:!0,name:c,type:"line",symbol:"none",color:g["m"],data:this.devStates},{smooth:!0,name:l,type:"line",symbol:"none",color:g["m"],data:this.devReissue}]}}},mounted:function(){var e=this;this.$nextTick((function(){e.initChart()}))}},y=b,x=i("2877"),w=Object(x["a"])(y,h,d,!1,null,null,null),k=w.exports,C=i("1c31"),T=i("7cf8"),$=i("632c"),D=i("6e52"),M=i("a05b"),O={name:"tempHumiMonth",data:function(){return{deviceid:"",month:new Date,loading:!1,offsetVertical:Number(50),horizontalModeShowLeft:!0,exportLoading1:!1,detaileList:[],tempindex:0,tempIndexList:[]}},mixins:[M["a"]],components:{SingleChoiceVehicle:c["a"],SelectDate:o["a"],ReportMap:l["a"],TempHumiEcharts:k,SplitPane:$["a"]},watch:{month:function(){this.loading||this.handleQuery()},deviceid:function(e){this.setSingleDeviceid(e)}},computed:Object(s["a"])({},Object(r["b"])(["singleDeviceid"])),methods:Object(s["a"])(Object(s["a"])({},Object(r["c"])(["setSingleDeviceid"])),{},{numberToFixed2:p["ob"],onResizingEnd:function(){this.onResize(this.horizontalModeShowLeft)},onResize:function(e){var t=this;this.horizontalModeShowLeft=e,setTimeout((function(){t.$refs.echartsIns.resize()}),300)},handleClickRow:function(e){var t=this,i=e.row,n=v["a"].longToLocalDateTimeStr(i.begintime-6e5),a=v["a"].longToLocalDateTimeStr(i.endtime+6e5),s={deviceid:i.deviceid,begintime:n,endtime:a,timezone:v["a"].getOffset()};Object(T["X"])(s).then((function(e){var i=e.records;i&&i.length?(t.$refs.mapIns.markersAndLineLayerToMap(i),t.$refs.echartsIns.updateChartsOption(i)):(t.$refs.mapIns.markersAndLineLayerToMap([]),t.$refs.echartsIns.updateChartsOption([]))}))},handleQuery:function(){var e=this,t=this.deviceid;if(t){var i=this.month.getFullYear(),n=this.month.getMonth()+1,a={year:i,month:n,tempindex:this.tempindex,deviceids:[t],offset:v["a"].getOffset()};this.loading=!0,Object(C["nb"])(a).then((function(t){var i=t.records,n=t.addressmap;e.addressmap=n,e.loading=!1;var a=i[0],s=[];void 0!=a&&(s=e.getDetaileList(a,n||{})),e.detaileList=s,s.length>0?(e.handleClickRow({row:s[0]}),e.$refs.xTable.setCurrentRow(s[0])):(e.$refs.mapIns.markersAndLineLayerToMap([]),e.$refs.echartsIns.updateChartsOption([]))})).catch((function(e){console.log(e)}))}else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},getDetaileList:function(e,t){var i=e.deviceid,n=e.records,a=[],s=D["a"].deviceInfos[i].devicename;return n.forEach((function(e){a.unshift({devicename:s,deviceid:i,tempIndexStr:e.tempindex,tempindex:e.tempindex,stemp:e.stemp/100,etemp:e.etemp/100,begintime:e.begintime,endtime:e.endtime,threshold:e.threshold/100,duration:Object(p["Ib"])(e.duration,!0),distance:e.distance/1e3,alarmstatus:Object(p["cb"])(e.alarmstatus),statisticsday:v["a"].longToLocalDateTimeStr(e.begintime)+" - "+v["a"].longToLocalDateTimeStr(e.endtime),address:Object(p["M"])(t,e.slat,e.slon),slon:e.slon,slat:e.slat,elon:e.elon,elat:e.elat})})),a},exportData:function(){if(this.detaileList.length>0){var e=[[this.$t("reportForm.index"),this.$t("reportForm.time"),this.$t("alarm.devName"),this.$t("reportForm.tempIndex"),this.$t("reportForm.status"),this.$t("reportForm.beginTemp"),this.$t("reportForm.endTemp"),this.$t("common.duration"),this.$t("reportForm.mileage"),this.$t("reportForm.address"),this.$t("reportForm.coordinate")]],t="";this.detaileList.forEach((function(i,n){0==n&&(t=i.deviceid);var a=[];a.push(n+1),a.push(i.statisticsday),a.push(i.devicename),a.push(i.tempIndexStr),a.push(i.alarmstatus),a.push(Object(p["ob"])(i.stemp)),a.push(Object(p["ob"])(i.etemp)),a.push(i.threshold),a.push(i.duration),a.push(Object(p["ob"])(i.distance)),a.push(i.address),a.push(i.slon+","+i.slat),e.push(a)}));var i=D["a"].getDeviceNameByDeviceId(t),n={title:this.$t("reportForm.tempAndHumi"),data:e,devicename:i};this.exportLoading1=!0,new ExcelCls(n).exportExcel(this)}}}),mounted:function(){var e=this;this.singleDeviceid&&(this.deviceid=this.singleDeviceid),this.$nextTick((function(){e.tempIndexList=[{label:e.$t("reportForm.all"),value:0},{label:e.$t("reportForm.temp1"),value:1},{label:e.$t("reportForm.temp2"),value:2},{label:e.$t("reportForm.temp3"),value:3},{label:e.$t("reportForm.temp4"),value:4}]}))}},z=O,S=(i("75fb"),Object(x["a"])(z,n,a,!1,null,null,null)),I=S.exports;t["default"]=I},2607:function(e,t,i){},"26c6":function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"multi-choice single-choice-vehicle",style:{width:e.width}},[e.showLabel?t("div",{staticClass:"multi-choice-label"},[e._v(" "+e._s(e.$t("common.selectDevice"))+" ")]):e._e(),t("div",{staticClass:"multi-choice-input"},[t("ZtreeDeviceDropdown",{attrs:{placeholder:e.placeholder,disableShare:e.disableShare,isQueryInitData:e.isQueryInitData},model:{value:e.deviceid,callback:function(t){e.deviceid=t},expression:"deviceid"}})],1)])},a=[],s=i("5530"),r=i("2f62"),o=i("2df7"),c={props:{value:{type:String,default:""},width:{type:String,default:"230px"},showLabel:{type:Boolean,default:!1},disableShare:{type:Boolean,default:!1},placeholder:{type:String,default:""}},name:"SingleChoiceVehicle",data:function(){return{deviceid:""}},watch:{value:function(e){e&&(this.deviceid=e)},deviceid:function(e){this.$emit("input",e)}},computed:Object(s["a"])({},Object(r["b"])(["isQueryInitData"])),components:{ZtreeDeviceDropdown:o["a"]},methods:{},mounted:function(){this.value&&(this.deviceid=this.value)}},l=c,h=(i("facb"),i("2877")),d=Object(h["a"])(l,n,a,!1,null,null,null);t["a"]=d.exports},"271ae":function(e,t,i){},"2ddc":function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"multi-choice",style:e.warpStyle},[t("div",{staticClass:"multi-choice-input"},["daterange"==e.dateType?t("div",[t("el-date-picker",{attrs:{type:e.dateType,"picker-options":e.pickerOptions,"range-separator":"-",align:"center","unlink-panels":"",clearable:!1,"start-placeholder":e.$t("device.driverinitialdate"),"end-placeholder":e.$t("device.drivereffectivedate")},on:{change:e.onChange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1):e._e(),"date"==e.dateType?t("div",[t("el-date-picker",{attrs:{type:"date","picker-options":e.datePickerOptions},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1):e._e(),"datetimerange"==e.dateType?t("div",{staticClass:"datetimerange"},[t("el-date-picker",{attrs:{type:e.dateType,"range-separator":"-","picker-options":e.pickerOptionsTime,align:"center","unlink-panels":"",clearable:!1,"start-placeholder":e.$t("device.driverinitialdate"),"end-placeholder":e.$t("device.drivereffectivedate"),"default-time":["00:00:00","23:59:59"]},on:{change:e.onChange},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1):e._e(),"month"==e.dateType?t("div",[t("el-date-picker",{attrs:{type:"month"},model:{value:e.month,callback:function(t){e.month=t},expression:"month"}})],1):e._e()])])},a=[],s=(i("99af"),i("5101")),r=i("5867"),o={name:"SelectDate",props:{value:{type:Array|Date,default:function(){return[]}},dateType:{type:String,default:"daterange"},label:{type:String,default:function(){return this.$t("common.selectTime")}}},computed:{isDaterange:function(){return"daterange"==this.dateType},warpStyle:function(){var e=200;switch(this.dateType){case"date":e=120;break;case"daterange":e=230;break;case"datetimerange":e=310;break}return{width:"".concat(e,"px")}}},mixins:[r["a"]],data:function(){var e=864e5;return{dateRange:[],date:new Date,month:new Date,pickerOptions:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(e){var t=new Date;e.$emit("pick",[t,t])}},{text:this.$t("reportForm.yesterDay"),onClick:function(t){var i=new Date;i.setTime(i.getTime()-e),t.$emit("pick",[i,i])}},{text:this.$t("missing.theWeek"),onClick:function(t){var i=new Date,n=new Date,a=i.getDay();i.setTime(i.getTime()-e*(a-1)),n.setTime(i.getTime()+6*e),t.$emit("pick",[i,n])}},{text:this.$t("missing.lastWeek"),onClick:function(t){var i=new Date,n=new Date,a=i.getDay(),s=i.getTime()-e*(a-1);i.setTime(s-7*e),n.setTime(s-e),t.$emit("pick",[i,n])}},{text:this.$t("missing.thisMonth"),onClick:function(e){var t=new Date,i=t.getFullYear(),n=t.getMonth()+1,a=new Date("".concat(i,"-").concat(n,"-01")),s=new Date("".concat(i,"-").concat(n,"-01 00:00:00"));s.setMonth(s.getMonth()+1),s=new Date(s.getTime()-1e3),e.$emit("pick",[a,s])}},{text:this.$t("missing.lastMonth"),onClick:function(e){var t=new Date;t.setMonth(t.getMonth()-1);var i=t.getFullYear(),n=t.getMonth()+1,a=new Date(new Date(i,n,1)-1).getDate(),s=new Date("".concat(i,"-").concat(n,"-01")),r=new Date("".concat(i,"-").concat(n,"-").concat(a));e.$emit("pick",[s,r])}}]},pickerOptionsTime:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(e){var t=new Date(s["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),i=new Date(s["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59");e.$emit("pick",[t,i])}},{text:this.$t("reportForm.yesterDay"),onClick:function(t){var i=new Date;i.setTime(i.getTime()-e),t.$emit("pick",[new Date(s["a"].format(i,"yyyy-MM-dd")+" 00:00:00"),new Date(s["a"].format(i,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.theWeek"),onClick:function(t){var i=new Date,n=new Date,a=i.getDay();i.setTime(i.getTime()-e*(a-1)),n.setTime(i.getTime()+6*e),t.$emit("pick",[new Date(s["a"].format(i,"yyyy-MM-dd")+" 00:00:00"),new Date(s["a"].format(n,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastWeek"),onClick:function(t){var i=new Date,n=new Date,a=i.getDay(),r=i.getTime()-e*(a-1);i.setTime(r-7*e),n.setTime(r-e),t.$emit("pick",[new Date(s["a"].format(i,"yyyy-MM-dd")+" 00:00:00"),new Date(s["a"].format(n,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.thisMonth"),onClick:function(e){var t=new Date,i=t.getFullYear(),n=t.getMonth()+1,a=new Date("".concat(i,"-").concat(n,"-01")),r=new Date("".concat(i,"-").concat(n,"-01 00:00:00"));r.setMonth(r.getMonth()+1),r=new Date(r.getTime()-1e3),e.$emit("pick",[new Date(s["a"].format(a,"yyyy-MM-dd")+" 00:00:00"),new Date(s["a"].format(r,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastMonth"),onClick:function(e){var t=new Date;t.setMonth(t.getMonth()-1);var i=t.getFullYear(),n=t.getMonth()+1,a=new Date(new Date(i,n,1)-1).getDate(),r=new Date("".concat(i,"-").concat(n,"-01")),o=new Date("".concat(i,"-").concat(n,"-").concat(a));e.$emit("pick",[new Date(s["a"].format(r,"yyyy-MM-dd")+" 00:00:00"),new Date(s["a"].format(o,"yyyy-MM-dd")+" 23:59:59")])}}]}}},watch:{dateRange:function(e){null==e?this.$emit("input",[]):this.$emit("input",e)},value:function(e){this.dateRange=e},date:function(e){this.$emit("input",e)},month:function(e){this.$emit("input",e)}},methods:{onChange:function(e){this.$emit("input",e)}},mounted:function(){"date"==this.dateType?this.date=this.value:"month"==this.dateType?this.month=this.value:this.dateRange=this.value}},c=o,l=(i("e716"),i("2877")),h=Object(l["a"])(c,n,a,!1,null,"5dbb8594",null);t["a"]=h.exports},"2df7":function(e,t,i){"use strict";i("498a");var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ztree-device"},[t("el-popover",{attrs:{placement:"bottom",width:"320",trigger:"manual","append-to-body":!0,"popper-options":{boundariesElement:"body",gpuAcceleration:!0,positionFixed:!0,preventOverflow:!0}},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[t("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClickOutside,expression:"handleClickOutside"}],staticClass:"ztree-drapdown",staticStyle:{height:"360px",width:"100%",overflow:"hidden"}},[t("el-scrollbar",{staticStyle:{height:"100%"}},[t("ul",{staticClass:"ztree",attrs:{id:e.ztreeId}})])],1),t("el-input",{attrs:{slot:"reference",placeholder:e.placeholder,"prefix-icon":"el-icon-search"},on:{input:e.onChange},nativeOn:{click:function(t){return e.handleClickInput.apply(null,arguments)}},slot:"reference",model:{value:e.textVal,callback:function(t){e.textVal="string"===typeof t?t.trim():t},expression:"textVal"}},[t("span",{staticClass:"el-input__suffix-inner",staticStyle:{cursor:"pointer"},attrs:{slot:"suffix"},on:{click:e.clearText},slot:"suffix"},[t("i",{staticClass:"el-input__icon el-icon-circle-close"})])])],1)],1)},a=[],s=i("5530"),r=(i("99af"),i("4de4"),i("c975"),i("d81d"),i("14d9"),i("b0c0"),i("d3b7"),i("159b"),i("4795"),i("cd6d")),o=i.n(r),c=i("6e52"),l=i("c276"),h=i("9169"),d=i("2f62"),u=i("0d33"),f=i("7fa8"),m={name:"ZtreeDeviceDropdown",props:{value:{type:String,default:""},isCheck:{type:Boolean,default:!1},isClickAll:{type:Boolean,default:!1},disableShare:{type:Boolean,default:!1},selectDeviceIds:{type:Array,default:function(){return[]}},isQueryInitData:{type:Boolean,default:!1},placeholder:{type:String,default:""}},directives:{Clickoutside:h["a"]},computed:Object(s["a"])(Object(s["a"])({},Object(d["b"])(["isZh"])),{},{ztreeId:function(){return"ztreeEl_".concat(this._uid)}}),data:function(){return{textVal:"",show:!1}},watch:{textVal:function(e){this.isClickAll?this.$emit("input",e):0==this.isCheck?e||this.$emit("input",""):e||this.$emit("onTreeCheck",[])},isQueryInitData:function(e){var t=this;this.$nextTick((function(){t.init()}))}},created:function(){this.ztreeIns=null,this.setting={view:{addDiyDom:this.addDiyDom,dblClickExpand:!1},check:{enable:!0,chkStyle:this.isCheck?"checkbox":"radio",radioType:"all"},callback:{onCheck:this.onTreeCheck,onClick:this.zTreeOnClick}}},mounted:function(){var e=this;this.$nextTick((function(){e.init()}))},destroyed:function(){this.ztreeIns&&this.ztreeIns.destroy()},methods:{init:function(){var e=this;if(this.isQueryInitData&&null==this.ztreeIns)if(this.initZtree(),0==this.isCheck){if(this.value){var t=c["a"].deviceInfos[this.value].devicename;this.textVal=t;var i=Object(l["hb"])(this.ztreeIns.getNodes(),this.value);i?this.ztreeIns.checkNode(i):console.log("ZtreeDeviceDropdown 没找到node this.textVal = ",this.textVal)}}else if(this.selectDeviceIds.length>0){var n=this.ztreeIns.getNodes();this.selectDeviceIds.forEach((function(t){var i=Object(l["hb"])(n,t);i&&e.ztreeIns.checkNode(i,!0)})),this.isZh?this.textVal="已选中".concat(this.selectDeviceIds.length,"个单位"):this.textVal="".concat(this.selectDeviceIds.length," is selected"),this.$emit("onTreeCheck",this.selectDeviceIds)}},handleClickInput:function(){var e=this;if(this.show=!0,0==this.isCheck){var t=c["a"].deviceInfos[this.value],i=t?t.devicename:null;if(i&&(this.textVal=i,this.ztreeIns&&this.ztreeIns.getNodes)){var n=Object(l["hb"])(this.ztreeIns.getNodes(),this.value);n&&setTimeout((function(){e.ztreeIns.selectNode(n)}),30)}}},clearText:function(){this.textVal="",this.ztreeIns&&(this.ztreeIns.destroy(),this.ztreeIns=null),this.treeNodeChildren.length&&(this.treeNodeChildren[0].open=!0),this.ztreeIns=$.fn.zTree.init($("#".concat(this.ztreeId)),this.setting,this.treeNodeChildren),this.isCheck?this.$emit("onTreeCheck",[]):this.$emit("input","")},handleClickOutside:function(){this.show=!1},searchDevice:Object(l["e"])((function(e,t){if(0==e.show&&(e.show=!0),e.ztreeIns.destroy(),0==t.length)e.treeNodeChildren.length&&(e.treeNodeChildren[0].open=!0),e.ztreeIns=$.fn.zTree.init($("#".concat(e.ztreeId)),e.setting,e.treeNodeChildren);else{t=t.trim();var i=e.variableDeepSearch(e.treeNodeChildren,t,0);e.ztreeIns=$.fn.zTree.init($("#".concat(e.ztreeId)),e.setting,i)}}),300),variableDeepSearch:function(e,t,i){t=t.toLowerCase();for(var n=[],a=this,s=0;s<e.length;s++){var r=null,c=e[s];if(null!=c){var l=!1;if((-1!=c.name.toLowerCase().indexOf(t)||c.showname&&-1!=c.showname.toLowerCase().indexOf(t)||c.deviceid&&-1!=c.deviceid.toLowerCase().indexOf(t)||c.simiccid&&-1!=c.simiccid.toLowerCase().indexOf(t)||c.loginname&&-1!=c.loginname.toLowerCase().indexOf(t)||c.remark&&-1!=c.remark.toLowerCase().indexOf(t)||c.remark2&&-1!=c.remark2.toLowerCase().indexOf(t)||c.simiccid&&-1!=c.simiccid.toLowerCase().indexOf(t)||c.simnum&&-1!=c.simnum.toLowerCase().indexOf(t))&&(r=c,r.open=!1,l=!0),0==l&&c.children&&c.children.length>0){var h=a.variableDeepSearch(c.children,t,i);h&&h.length>0&&(r=o()(c),r.children=h,r.open=!0,l=!0)}if(1==l&&(i++,n.push(r),i>1e3))break}}return n},onChange:function(e){this.searchDevice(this,e)},getCheckedDeviceIds:function(){var e=this.ztreeIns.getCheckedNodes(),t=[];return e.forEach((function(e){var i=e.deviceid;void 0!=i&&t.push(i)})),t},initZtree:function(){var e=this.castUsersTreeToDevicesTree(c["a"].rootuser);this.isCheck?this.treeNodeChildren=[e]:e.children&&e.children.length?this.treeNodeChildren=e.children:this.treeNodeChildren=[],this.ztreeIns=$.fn.zTree.init($("#".concat(this.ztreeId)),this.setting,this.treeNodeChildren)},addDiyDom:function(e,t){var i=$("#"+t.tId+"_check"),n=$("#"+t.tId+"_ico");n.remove(),i.before(n)},selectNode:function(e){var t=this;if(0==this.isCheck){var i=c["a"].deviceInfos[e],n=i?i.devicename:null;if(n&&(this.textVal=n,this.$emit("input",e),this.ztreeIns&&this.ztreeIns.getNodes)){var a=Object(l["hb"])(this.ztreeIns.getNodes(),this.value);a&&setTimeout((function(){t.ztreeIns.selectNode(a)}),30)}}},onTreeCheck:function(e,t,i){var n=this.ztreeIns.getCheckedNodes();if(this.isClickAll){var a=i.nodeType;if(a==c["a"].NodeType_User)this.textVal=i.username,this.$emit("input",this.textVal);else if(a==c["a"].NodeType_Group)this.textVal=i.groupname,this.$emit("input",this.textVal);else{var s=i.deviceid,r=c["a"].deviceInfos[s].devicename;this.textVal=r,this.$emit("input",s)}}else if(0==n.length)this.textVal="";else if(this.isCheck){var o=n.filter((function(e){return void 0==e.children})).map((function(e){return e.deviceid}));this.isZh?this.textVal="已选中".concat(o.length,"个单位"):this.textVal="".concat(o.length," is selected"),this.$emit("onTreeCheck",o)}else if(i.deviceid){var l=i.deviceid,h=c["a"].deviceInfos[l].devicename;this.textVal=h,this.$emit("input",l),this.show=!1}},zTreeOnClick:function(e,t,i){$("#"+i.tId+"_switch").click(),i.nodeType!=c["a"].NodeType_Device_Normal&&i.nodeType!=c["a"].NodeType_Device_Video||(this.ztreeIns.checkNode(i,!i.checked,!0),this.onTreeCheck(e,t,i))},castUsersTreeToDevicesTree:function(e){var t=this,i={name:"空",children:[],open:!0,icon:u,nodeType:c["a"].NodeType_User,nocheck:!this.isCheck};if(e){var n=e.username,a=e.subusers;i.name=n,i.username=n,i.id=n;var s=Object(l["o"])(e.groups),r=Object(l["E"])(s,e.groups,a),o=null;null!=s&&(o=e.groups[s]);var h=this.getDeviceListGroups(e.groups,n,r);if(null!=n&&null!=a&&a.length>0){var d=this.doCastUsersTreeToDevicesTree(a);i.children=h.concat(d)}else i.children=h;i.children.forEach((function(e){e.nocheck=!t.isCheck})),Object(l["Gb"])(i.children);var f=0,m=0;if(0==r&&o&&o.devices.length){var p=this.$dateformat.getCurrentUTC(),v=c["a"].lastPositions;o.devices.forEach((function(e){if(e){f++;var t=Object(l["F"])(v[e.deviceid],p);t&&m++;var n=Object(l["t"])(e,t,p);i.children.push(n)}})),Object(l["Fb"])(i.children)}if(i.children)for(var g=0;g<i.children.length;++g){var b=i.children[g];void 0!=b.totalCount&&(f+=b.totalCount,m+=b.onlineCount)}i.totalCount=f,i.name+="("+m+"/"+f+")"}return i},doCastUsersTreeToDevicesTree:function(e){var t=this,i=[];if(null!=e&&e.length>0)for(var n,a,s,r,o,h,d,f,m,p,v,g,b,y=function(){if(n=e[x],a=n.username,s=n.subusers,r=n.showname,o=0,h={name:r||a,username:a,showname:r,icon:u,nodeType:c["a"].NodeType_User},d=Object(l["o"])(n.groups),f=Object(l["E"])(d,i.groups,s),m=null,null!=d&&(m=n.groups[d]),p=t.getDeviceListGroups(n.groups,a,f),p.forEach((function(e){o+=e.onlineCount})),null!=a&&null!=s&&s.length>0?(v=t.doCastUsersTreeToDevicesTree(s),v.forEach((function(e){o+=e.onlineCount})),v=p.concat(v),h.children=v):h.children=p,Object(l["Gb"])(h.children),h.children.forEach((function(e){e.nocheck=!t.isCheck})),0==f&&m&&m.devices.length){var y=t.$dateformat.getCurrentUTC(),w=c["a"].lastPositions;m.devices.forEach((function(e){if(e){var t=Object(l["F"])(w[e.deviceid],y);t&&o++;var i=Object(l["t"])(e,t,y);h.children.push(i)}})),Object(l["Fb"])(h.children)}if(g=0,h.children)for(b=0;b<h.children.length;++b){var k=h.children[b];void 0!=k.totalCount?g+=k.totalCount:g++}h.totalCount=g,h.onlineCount=o,h.name+="("+o+"/"+g+")",i.push(h)},x=0;x<e.length;++x)y();return i},getDeviceListGroups:function(e,t,i){var n=[],a=c["a"].lastPositions,s=this.$t("common.defaultGroup");if(e)for(var r=this.$dateformat.getCurrentUTC(),o=0;o<e.length;++o){var h=e[o],d=(void 0===h.shared||h.shared,h.groupid>0);if(i||d){var u=d?h.groupname:s,m=__pinyin.get(u),p=m.l,v=m.p,g={groupid:h.groupid,name:u,label:u,groupname:u,icon:f,username:t,nodeType:c["a"].NodeType_Group,l:p,p:v,status:""},b=0;if(h.devices&&(g.totalCount=h.devices.length,g.children=[],h.devices.forEach((function(e){if(e){var t=Object(l["F"])(a[e.deviceid],r);t&&b++;var i=Object(l["t"])(e,t,r);g.children.push(i)}})),Object(l["Fb"])(g.children)),g.onlineCount=b,g.name+="("+b+"/"+h.devices.length+")",g.label+="(".concat(g.children.length,")"),d){if(this.disableShare&&1==h.shared)continue;n.push(g)}else g.children.length&&n.push(g)}}return n}}},p=m,v=(i("eca4"),i("2877")),g=Object(v["a"])(p,n,a,!1,null,"98b76e1e",null),b=g.exports;t["a"]=b},"427e":function(e,t,i){"use strict";i("2607")},"5aff":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"h",(function(){return a})),i.d(t,"l",(function(){return s})),i.d(t,"k",(function(){return r})),i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return c})),i.d(t,"e",(function(){return l})),i.d(t,"f",(function(){return h})),i.d(t,"g",(function(){return d})),i.d(t,"m",(function(){return u})),i.d(t,"i",(function(){return f})),i.d(t,"a",(function(){return m})),i.d(t,"j",(function(){return p}));var n="#2D9F28",a="#89C6F2",s="#FFC65E",r="red",o="#1EBEFF",c="#E505F7",l="#40A703",h="#F27908",d="#F180D1",u="#0F1F46",f="#000000",m={backgroundColor:"rgba(255,255,255,0.85)",borderColor:"transparent",textStyle:{fontSize:12,color:"#000"},padding:2},p=function(e,t,i,n,a){var s=e[0],r=a.contentSize,o=a.viewSize;return s+10>o[0]-r[0]?s=s-r[0]-10:s+=10,[s,"0%"]}},"632c":function(e,t,i){"use strict";var n=function(){var e=this,t=e._self._c;return t("div",{ref:"wraper",class:e.wraperClasses,on:{mouseup:e.handleMouseup,mousemove:e.handleMousemove,mouseleave:e.handleMouseout}},["horizontal"===e.direction?t("div",{class:"".concat(e.prefix,"-container")},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],class:"".concat(e.prefix,"-left-area"),style:{width:e.leftSize}},[e._t("left")],2),e._t("trigger",(function(){return[t("div",{directives:[{name:"show",rawName:"v-show",value:e.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],ref:"trigger",class:"".concat(e.prefix,"-trigger"),style:e.horizontalTriggerStyle},[t("div",{staticClass:"split-pane-trigger-btn",on:{click:e.onClickHorizontal}}),t("div",{class:"".concat(e.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:e.handleMousedown}})])]})),t("div",{class:"".concat(e.prefix,"-right-area"),style:{width:e.horizontalModeShowLeft?e.rightSize:"100%"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.horizontalModeShowLeft,expression:"!horizontalModeShowLeft"}],staticClass:"split-pane-right-btn",on:{click:e.onClickHorizontal}}),e._t("right")],2)],2):t("div",{class:"".concat(e.prefix,"-container")},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.verticalShowTop,expression:"verticalShowTop"}],class:"".concat(e.prefix,"-top-area"),style:{height:"move"==e.verticalMode?e.leftSize:"100%"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"bottom"==e.verticalMode,expression:"verticalMode == 'bottom'"}],staticClass:"trigger-show-bottom",on:{click:function(t){return e.setVerticalMode("move")}}}),e._t("top")],2),e._t("trigger",(function(){return[t("div",{directives:[{name:"show",rawName:"v-show",value:"move"==e.verticalMode,expression:"verticalMode == 'move'"}],ref:"trigger",class:"".concat(e.prefix,"-trigger"),style:e.verticalTriggerStyle},[t("div",{class:"".concat(e.prefix,"-trigger-btn")},[t("div",{on:{click:function(t){return e.setVerticalMode("top")}}}),t("div",{on:{click:function(t){return e.setVerticalMode("bottom")}}})]),t("div",{class:"".concat(e.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:e.handleMousedown}})])]})),t("div",{directives:[{name:"show",rawName:"v-show",value:e.verticalShowBottom,expression:"verticalShowBottom"}],class:"".concat(e.prefix,"-bottom-area"),style:{height:"move"==e.verticalMode?e.rightSize:"100%"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:"top"==e.verticalMode,expression:"verticalMode == 'top'"}],staticClass:"trigger-show-top",on:{click:function(t){return e.setVerticalMode("move")}}}),e._t("bottom")],2)],2)])},a=[],s=(i("c975"),i("a9e3"),function(e,t){return t.indexOf(e)>=0}),r={name:"splitPane",props:{value:{type:[Number,String],default:50},horizontalModeShowLeft:{type:Boolean,default:!0},verticalMode:{type:String,default:"move"},direction:{type:String,default:"horizontal",validator:function(e){return s(e,["vertical","horizontal"])}},min:{type:[Number,String],default:3},max:{type:[Number,String],default:97},maxRight:{type:Boolean,default:!1},right:{type:Boolean,default:!1},triggerStyle:{type:Object,default:function(){return"horizontal"===this.direction?{width:"8px",background:"#ffffff"}:{height:"8px",background:"#ffffff"}}}},data:function(){return{prefix:"split-pane",canMove:!1,triggerOffset:50,triggerOldOffset:50,offset:{},atMin:!1,atMax:!1,directionMark:0}},computed:{wraperClasses:function(){return[this.prefix,"vertical"===this.direction?"".concat(this.prefix,"-vertical"):"".concat(this.prefix,"-horizontal")]},leftSize:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},rightSize:function(){return this.right?"".concat(this.triggerOffset,"%"):"".concat(100-this.triggerOffset,"%")},triggerLeft:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},minTransed:function(){return this.transValue(this.min)},maxTransed:function(){var e=this.right?100-this.transValue(this.max):this.transValue(this.max);return this.maxRight?100-e:e},horizontalTriggerStyle:function(){return Object.assign({left:this.triggerLeft,borderTop:"1px solid #E2E3E5"},this.triggerStyle)},verticalTriggerStyle:function(){return Object.assign({top:this.triggerLeft},this.triggerStyle)},verticalShowTop:function(){return"bottom"==this.verticalMode||"move"==this.verticalMode},verticalShowBottom:function(){return"top"==this.verticalMode||"move"==this.verticalMode}},methods:{setVerticalMode:function(e){this.$emit("on-resize",e)},onClickHorizontal:function(){this.$emit("on-resize",!this.horizontalModeShowLeft)},handleMouseup:function(e){1==this.canMove&&(this.canMove=!1,this.$emit("on-resizing-end",e))},transValue:function(e){return"number"===typeof e?e:Math.floor(parseFloat(e)/this.$refs.wraper.offsetWidth*1e4)/100},handleMousedown:function(e){this.canMove=!0,this.triggerOldOffset=this.triggerOffset,this.offset={x:e.pageX,y:e.pageY},this.$emit("on-resizing-start",e),e.preventDefault()},handleMouseout:function(){this.canMove=!1},handleMousemove:function(e){if(this.canMove){var t,i=0;if("horizontal"===this.direction?(i=Math.floor((e.clientX-this.offset.x)/this.$refs.wraper.offsetWidth*1e4)/100,t=this.triggerOldOffset+(this.right?-i:i)):(i=Math.floor((e.clientY-this.offset.y)/this.$refs.wraper.offsetHeight*1e4)/100,t=this.triggerOldOffset+(this.right?-i:i)),this.right){var n=100-t;n<=this.minTransed?this.triggerOffset=100-Math.max(n,this.minTransed):this.triggerOffset=100-Math.min(n,this.maxTransed)}else t<=this.minTransed?this.triggerOffset=Math.max(t,this.minTransed):this.triggerOffset=Math.min(t,this.maxTransed);e.atMin=100-t<=this.minTransed,e.atMax=100-t>=this.maxTransed,e.pageX>this.directionMark?e.direction=1:e.direction=0,this.directionMark=e.pageX,this.$emit("input",this.triggerOffset),this.$emit("on-resizing",e)}},setTriggerOffset:function(e){var t=this;this.$nextTick((function(){t.triggerOffset="number"===typeof e?e:Math.floor(parseInt(e)/t.$refs.wraper.offsetWidth*1e4)/100,t.$emit("input",t.triggerOffset)}))}},watch:{value:function(e){var t=this;this.$nextTick((function(){t.triggerOffset="number"===typeof e?e:Math.floor(parseInt(e)/t.$refs.wraper.offsetWidth*1e4)/100}))}},mounted:function(){var e=this;void 0!==this.value&&(this.$nextTick((function(){e.triggerOffset="number"===typeof e.value?e.value:Math.floor(parseInt(e.value)/e.$refs.wraper.offsetWidth*1e4)/100})),this.triggerOffset="number"===typeof this.value?this.value:Math.floor(parseInt(this.value)/this.$refs.wraper.offsetWidth*1e4)/100)}},o=r,c=(i("427e"),i("2877")),l=Object(c["a"])(o,n,a,!1,null,null,null),h=l.exports;t["a"]=h},"75fb":function(e,t,i){"use strict";i("86c3")},"80f4":function(e,t,i){"use strict";var n=i("32eb");t["a"]=n["a"]},"86c3":function(e,t,i){},b174:function(e,t,i){},d03a:function(e,t,i){"use strict";var n=i("26c6");t["a"]=n["a"]},d462:function(e,t,i){"use strict";var n=i("2ddc");t["a"]=n["a"]},e716:function(e,t,i){"use strict";i("271ae")},ec11:function(e,t,i){},eca4:function(e,t,i){"use strict";i("b174")},facb:function(e,t,i){"use strict";i("ec11")}}]);