(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e60fffda"],{"197ba":function(t,e,i){},2607:function(t,e,i){},"427e":function(t,e,i){"use strict";i("2607")},"632c":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{ref:"wraper",class:t.wraperClasses,on:{mouseup:t.handleMouseup,mousemove:t.handleMousemove,mouseleave:t.handleMouseout}},["horizontal"===t.direction?e("div",{class:"".concat(t.prefix,"-container")},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],class:"".concat(t.prefix,"-left-area"),style:{width:t.leftSize}},[t._t("left")],2),t._t("trigger",(function(){return[e("div",{directives:[{name:"show",rawName:"v-show",value:t.horizontalModeShowLeft,expression:"horizontalModeShowLeft"}],ref:"trigger",class:"".concat(t.prefix,"-trigger"),style:t.horizontalTriggerStyle},[e("div",{staticClass:"split-pane-trigger-btn",on:{click:t.onClickHorizontal}}),e("div",{class:"".concat(t.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:t.handleMousedown}})])]})),e("div",{class:"".concat(t.prefix,"-right-area"),style:{width:t.horizontalModeShowLeft?t.rightSize:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.horizontalModeShowLeft,expression:"!horizontalModeShowLeft"}],staticClass:"split-pane-right-btn",on:{click:t.onClickHorizontal}}),t._t("right")],2)],2):e("div",{class:"".concat(t.prefix,"-container")},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.verticalShowTop,expression:"verticalShowTop"}],class:"".concat(t.prefix,"-top-area"),style:{height:"move"==t.verticalMode?t.leftSize:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"bottom"==t.verticalMode,expression:"verticalMode == 'bottom'"}],staticClass:"trigger-show-bottom",on:{click:function(e){return t.setVerticalMode("move")}}}),t._t("top")],2),t._t("trigger",(function(){return[e("div",{directives:[{name:"show",rawName:"v-show",value:"move"==t.verticalMode,expression:"verticalMode == 'move'"}],ref:"trigger",class:"".concat(t.prefix,"-trigger"),style:t.verticalTriggerStyle},[e("div",{class:"".concat(t.prefix,"-trigger-btn")},[e("div",{on:{click:function(e){return t.setVerticalMode("top")}}}),e("div",{on:{click:function(e){return t.setVerticalMode("bottom")}}})]),e("div",{class:"".concat(t.prefix,"-trigger-wrap"),attrs:{unselectable:"on"},on:{mousedown:t.handleMousedown}})])]})),e("div",{directives:[{name:"show",rawName:"v-show",value:t.verticalShowBottom,expression:"verticalShowBottom"}],class:"".concat(t.prefix,"-bottom-area"),style:{height:"move"==t.verticalMode?t.rightSize:"100%"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"top"==t.verticalMode,expression:"verticalMode == 'top'"}],staticClass:"trigger-show-top",on:{click:function(e){return t.setVerticalMode("move")}}}),t._t("bottom")],2)],2)])},r=[],s=(i("c975"),i("a9e3"),function(t,e){return e.indexOf(t)>=0}),o={name:"splitPane",props:{value:{type:[Number,String],default:50},horizontalModeShowLeft:{type:Boolean,default:!0},verticalMode:{type:String,default:"move"},direction:{type:String,default:"horizontal",validator:function(t){return s(t,["vertical","horizontal"])}},min:{type:[Number,String],default:3},max:{type:[Number,String],default:97},maxRight:{type:Boolean,default:!1},right:{type:Boolean,default:!1},triggerStyle:{type:Object,default:function(){return"horizontal"===this.direction?{width:"8px",background:"#ffffff"}:{height:"8px",background:"#ffffff"}}}},data:function(){return{prefix:"split-pane",canMove:!1,triggerOffset:50,triggerOldOffset:50,offset:{},atMin:!1,atMax:!1,directionMark:0}},computed:{wraperClasses:function(){return[this.prefix,"vertical"===this.direction?"".concat(this.prefix,"-vertical"):"".concat(this.prefix,"-horizontal")]},leftSize:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},rightSize:function(){return this.right?"".concat(this.triggerOffset,"%"):"".concat(100-this.triggerOffset,"%")},triggerLeft:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},minTransed:function(){return this.transValue(this.min)},maxTransed:function(){var t=this.right?100-this.transValue(this.max):this.transValue(this.max);return this.maxRight?100-t:t},horizontalTriggerStyle:function(){return Object.assign({left:this.triggerLeft,borderTop:"1px solid #E2E3E5"},this.triggerStyle)},verticalTriggerStyle:function(){return Object.assign({top:this.triggerLeft},this.triggerStyle)},verticalShowTop:function(){return"bottom"==this.verticalMode||"move"==this.verticalMode},verticalShowBottom:function(){return"top"==this.verticalMode||"move"==this.verticalMode}},methods:{setVerticalMode:function(t){this.$emit("on-resize",t)},onClickHorizontal:function(){this.$emit("on-resize",!this.horizontalModeShowLeft)},handleMouseup:function(t){1==this.canMove&&(this.canMove=!1,this.$emit("on-resizing-end",t))},transValue:function(t){return"number"===typeof t?t:Math.floor(parseFloat(t)/this.$refs.wraper.offsetWidth*1e4)/100},handleMousedown:function(t){this.canMove=!0,this.triggerOldOffset=this.triggerOffset,this.offset={x:t.pageX,y:t.pageY},this.$emit("on-resizing-start",t),t.preventDefault()},handleMouseout:function(){this.canMove=!1},handleMousemove:function(t){if(this.canMove){var e,i=0;if("horizontal"===this.direction?(i=Math.floor((t.clientX-this.offset.x)/this.$refs.wraper.offsetWidth*1e4)/100,e=this.triggerOldOffset+(this.right?-i:i)):(i=Math.floor((t.clientY-this.offset.y)/this.$refs.wraper.offsetHeight*1e4)/100,e=this.triggerOldOffset+(this.right?-i:i)),this.right){var a=100-e;a<=this.minTransed?this.triggerOffset=100-Math.max(a,this.minTransed):this.triggerOffset=100-Math.min(a,this.maxTransed)}else e<=this.minTransed?this.triggerOffset=Math.max(e,this.minTransed):this.triggerOffset=Math.min(e,this.maxTransed);t.atMin=100-e<=this.minTransed,t.atMax=100-e>=this.maxTransed,t.pageX>this.directionMark?t.direction=1:t.direction=0,this.directionMark=t.pageX,this.$emit("input",this.triggerOffset),this.$emit("on-resizing",t)}},setTriggerOffset:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100,e.$emit("input",e.triggerOffset)}))}},watch:{value:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100}))}},mounted:function(){var t=this;void 0!==this.value&&(this.$nextTick((function(){t.triggerOffset="number"===typeof t.value?t.value:Math.floor(parseInt(t.value)/t.$refs.wraper.offsetWidth*1e4)/100})),this.triggerOffset="number"===typeof this.value?this.value:Math.floor(parseInt(this.value)/this.$refs.wraper.offsetWidth*1e4)/100)}},n=o,l=(i("427e"),i("2877")),d=Object(l["a"])(n,a,r,!1,null,null,null),c=d.exports;e["a"]=c},7604:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full travel-vehicle"},[e("div",{staticClass:"report-form-inner"},[e("el-scrollbar",{staticStyle:{width:"100%"}},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"45px"}},[e("div",{staticClass:"f_left"},[e("MultiChoiceVehicle",{on:{onSelectDevice:t.onSelectDevice}})],1),e("div",{staticClass:"f_left"},[e("SelectDate",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("QuickTimeRange",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left",staticStyle:{width:"170px"}},[e("LabelWrap",{attrs:{label:t.$t("reportForm.minSpeed")}},[e("el-select",{model:{value:t.mileage,callback:function(e){t.mileage=e},expression:"mileage"}},t._l(t.optionList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"tabTotal"==t.activeName,expression:"activeName=='tabTotal'"}],staticClass:"f_left"},[e("el-popover",{attrs:{placement:"bottom",width:"236",trigger:"click"}},[e("div",[e("el-button",{staticStyle:{width:"100px"},attrs:{slot:"reference",type:"primary",loading:t.exportLoading1,plain:""},on:{click:t.exportDetailData},slot:"reference"},[t._v(t._s(t.$t("reportForm.onlySummary")))]),e("el-button",{staticStyle:{width:"100px"},attrs:{slot:"reference",type:"primary",loading:t.exportLoading,plain:""},on:{click:t.exportAllData},slot:"reference"},[t._v(t._s(t.$t("reportForm.SummaryAndDetail")))])],1),e("el-button",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[t._v(t._s(t.$t("common.export")))])],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"details"==t.activeName,expression:"activeName=='details'"}],staticClass:"f_left"},[e("el-button",{attrs:{type:"primary",loading:t.exportLoading},on:{click:t.exportDetailData}},[t._v(t._s(t.$t("common.export")))])],1)])]),e("div",{staticClass:"report-form-inner-tabs"},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("reportForm.drivingStatistics")+"(".concat(t.totalList.length,")"),name:"tabTotal"}}),e("el-tab-pane",{attrs:{label:"",name:"details"}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"details"==t.activeName,expression:"activeName=='details'"}],staticClass:"tableTitle"},[e("b",{domProps:{textContent:t._s(t.tableTitle)}}),t._v("("+t._s(t.detailsList.length)+") ")])],1),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"80px"}},[e("div",{style:t.statisticsStyle},[e("vxe-table",{staticClass:"mytable-scrollbar",attrs:{"sort-config":t.sortConfig,"menu-config":t.tableMenu,border:"",resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.totalList},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("common.sn")}}),e("vxe-table-column",{attrs:{title:t.$t("reportForm.action"),width:"70"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleClickRow(i.row)}}},[t._v(t._s(t.$t("reportForm.details")))])]}}])}),e("vxe-table-column",{attrs:{field:"devicename",title:t.$t("alarm.devName"),width:"140",sortable:""}}),e("vxe-table-column",{attrs:{field:"deviceid",title:t.$t("alarm.devNum"),width:"140",sortable:""}}),e("vxe-table-column",{attrs:{field:"starttimeStr",title:t.$t("reportForm.startTime"),width:"150",sortable:""}}),e("vxe-table-column",{attrs:{field:"endtimeStr",title:t.$t("reportForm.endTime"),width:"150",sortable:""}}),e("vxe-table-column",{attrs:{field:"durationtime",formatter:t.numberToFixed2,align:"right",title:t.$t("common.duration"),width:"70",sortable:""}}),e("vxe-table-column",{attrs:{field:"startdistance",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.startDistance"),width:"100",sortable:""}}),e("vxe-table-column",{attrs:{field:"enddistance",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.endDistance"),width:"100",sortable:""}}),e("vxe-table-column",{attrs:{field:"durationdistance",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.durationDistance"),width:"80",sortable:""}}),e("vxe-table-column",{attrs:{field:"avgspeed",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.avgSpeed"),width:"80",sortable:""}}),e("vxe-table-column",{attrs:{field:"maxspeed",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.maxSpeed"),width:"80",sortable:""}}),e("vxe-table-column",{attrs:{field:"startaddress",title:t.$t("reportForm.startAddress"),width:"250"}}),e("vxe-table-column",{attrs:{field:"endaddress",title:t.$t("reportForm.endAddress"),width:"250"}})],1)],1),e("div",{staticClass:"travel-vehicle-content-details",style:t.detailsStyle},[e("div",[e("vxe-table",{ref:"xTable",staticClass:"mytable-scrollbar",attrs:{"menu-config":t.tableMenu,border:"",resizable:"","show-overflow":"","highlight-current-row":"","highlight-hover-row":"",size:"mini",height:"auto",loading:t.detaileLoading,data:t.detailsList,"row-config":{isCurrent:!0,isHover:!0}},on:{"menu-click":t.handleClickTableMenu,"cell-click":t.cellClickEvent,"current-change":t.currentChangeEvent}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("common.sn")}}),e("vxe-table-column",{attrs:{field:"starttimeStr",title:t.$t("reportForm.startTime"),width:"140",sortable:""}}),e("vxe-table-column",{attrs:{field:"endtimeStr",title:t.$t("reportForm.endTime"),width:"140",sortable:""}}),e("vxe-table-column",{attrs:{field:"durationtime",formatter:t.numberToFixed2,align:"right",title:t.$t("common.duration"),width:"70",sortable:""}}),e("vxe-table-column",{attrs:{field:"startdistance",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.startDistance"),width:"100",sortable:""}}),e("vxe-table-column",{attrs:{field:"enddistance",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.endDistance"),width:"100",sortable:""}}),e("vxe-table-column",{attrs:{field:"durationdistance",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.durationDistance"),width:"80",sortable:""}}),e("vxe-table-column",{attrs:{field:"avgspeed",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.avgSpeed"),width:"80",sortable:""}}),e("vxe-table-column",{attrs:{field:"maxspeed",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.maxSpeed"),width:"80",sortable:""}}),e("vxe-table-column",{attrs:{field:"startaddress",title:t.$t("reportForm.startAddress")}}),e("vxe-table-column",{attrs:{field:"endaddress",title:t.$t("reportForm.endAddress")}})],1)],1),e("div",[e("split-pane",{staticStyle:{height:"100%"},attrs:{horizontalModeShowLeft:t.horizontalModeShowLeft,mode:"horizontal",min:"200",max:"1200"},on:{"on-resize":t.onResize,"on-resizing-end":t.onResizingEnd},model:{value:t.offsetVertical,callback:function(e){t.offsetVertical=e},expression:"offsetVertical"}},[e("div",{staticStyle:{height:"100%","background-color":"#ffffff"},attrs:{slot:"left"},slot:"left"},[e("ReportMap",{ref:"reportMap"})],1),e("div",{staticStyle:{height:"100%","background-color":"#ffffff"},attrs:{slot:"right"},slot:"right"},[e("TravelEchart",{ref:"echartsIns"})],1)])],1)])])],1)])},r=[],s=(i("14d9"),i("a9e3"),i("b680"),i("d3b7"),i("159b"),i("4795"),i("6e52")),o=i("201d"),n=i("e561"),l=i("d462"),d=i("80f4"),c=i("57c9"),h=i("632c"),m=i("41da"),u=i("7cf8"),f=i("1c31"),p=i("5101"),v=i("4c3c"),g=i("a05b"),b=i("c276"),x={name:"travelVehicle",data:function(){return{tableTitle:"",mileage:"0",offsetVertical:Number(50),optionList:[{label:"0km/h",value:"0"},{label:"5km/h",value:"5"},{label:"10km/h",value:"10"},{label:"20km/h",value:"20"},{label:"30km/h",value:"30"},{label:"40km/h",value:"40"},{label:"50km/h",value:"50"},{label:"60km/h",value:"60"},{label:"70km/h",value:"70"}],activeName:"tabTotal",loading:!1,exportLoading1:!1,horizontalModeShowLeft:!0,detaileLoading:!1,exportLoading:!1,dateRange:[new Date,new Date],totalList:[],detailsList:[]}},mixins:[v["a"],g["a"]],watch:{dateRange:function(){this.loading||this.handleQuery()}},components:{MultiChoiceVehicle:n["a"],SelectDate:l["a"],ReportMap:d["a"],TravelEchart:m["a"],QuickTimeRange:c["a"],LabelWrap:o["a"],SplitPane:h["a"]},computed:{statisticsStyle:function(){return{zIndex:"tabTotal"==this.activeName?999:0}},detailsStyle:function(){return{zIndex:"details"==this.activeName?999:0}}},methods:{numberToFixed2:b["nb"],onResizingEnd:function(){this.onResize(this.horizontalModeShowLeft)},onResize:function(t){var e=this;this.horizontalModeShowLeft=t,setTimeout((function(){e.$refs.echartsIns.resize()}),300)},currentChangeEvent:function(t){t.row},cellClickEvent:function(t){var e=this,i=t.row.data;Object(u["X"])(i).then((function(t){t.status;var i=t.records;i=i||[],e.$refs.reportMap.markersAndLineLayerToMap(i),e.$refs.echartsIns.updateChartsOption(i)})).catch((function(t){console.log(t)}))},handleClickRow:function(t){var e=this,i=t.devicename,a=t.deviceid,r=t.data;this.detailsList=[],this.tableTitle=i+"-"+a,this.activeName="details",this.detaileLoading=!0,r.offset=p["a"].getOffset(),Object(f["M"])(r).then((function(t){var s=t.status,o=t.summaries;if(e.detaileLoading=!1,e.queryDetailDateRange=r.startday+" "+r.endday,0==s){var n=o[0];if(n.records&&(n.records.forEach((function(t){t.deviceid=a,t.devicename=i,t.starttimeStr=t.starttime>0?e.$dateformat.longToLocalDateTimeStr(t.starttime):"-",t.endtimeStr=t.endtime>0?e.$dateformat.longToLocalDateTimeStr(t.endtime):"-",t.durationtime=t.durationtime/1e3/3600,t.startdistance=t.startdistance/1e3,t.enddistance=t.enddistance/1e3,t.durationdistance=t.durationdistance/1e3,t.avgspeed=t.avgspeed/1e3,t.maxspeed=t.maxspeed/1e3,t.start_lon_lat=t.slon.toFixed(5)+","+t.slat.toFixed(5),t.end_lon_lat=t.elon.toFixed(5)+","+t.elat.toFixed(5),t.data={deviceid:a,begintime:t.starttimeStr,endtime:t.endtimeStr,timezone:r.offset}})),e.detailsList=n.records),e.detailsList.length>0){var l=e.detailsList[0];e.$refs.xTable.setCurrentRow(l),e.cellClickEvent({row:l,rowIndex:0})}else e.$XModal.message({message:e.$t("tips.noData"),status:"error",zIndex:9999})}else e.$XModal.message({message:e.$t("tips.selectDevice"),status:"error",zIndex:9999})})).catch((function(t){e.detaileLoading=!1}))},handleQuery:function(){var t=this,e=this.deviceids,i=this.dateRange;if(0!=e.length)if(0!=i.length){"details"==this.activeName&&(this.activeName="tabTotal",this.totalList=[],this.detailsList=[]);var a=this.$dateformat.format(i[0],"yyyy-MM-dd"),r=this.$dateformat.format(i[1],"yyyy-MM-dd"),o={startday:a,endday:r,offset:p["a"].getOffset(),deviceids:e,limitspeed:Number(this.mileage),reporttype:0};this.loading=!0,Object(f["M"])(o).then((function(e){var i=e.status,a=e.summaries;if(t.queryDetailDateRange=o.startday+" "+o.endday,0==i){var r=s["a"].deviceInfos;a.forEach((function(e){var i=e.deviceid,a=r[i].devicename;e.devicename=a,e.starttimeStr=e.starttime>0?t.$dateformat.longToLocalDateTimeStr(e.starttime):"-",e.endtimeStr=e.endtime>0?t.$dateformat.longToLocalDateTimeStr(e.endtime):"-",e.durationtime=e.durationtime/1e3/3600,e.startdistance=e.startdistance/1e3,e.enddistance=e.enddistance/1e3,e.durationdistance=e.durationdistance/1e3,e.avgspeed=e.avgspeed/1e3,e.maxspeed=e.maxspeed/1e3,e.start_lon_lat=e.slon.toFixed(5)+","+e.slat.toFixed(5),e.end_lon_lat=e.elon.toFixed(5)+","+e.elat.toFixed(5),e.data={deviceids:[i],reporttype:1,startday:e.starttimeStr,endday:e.endtimeStr,offset:o.offset}})),t.totalList=a}else t.$XModal.message({message:t.$t("tips.networkError"),status:"error",zIndex:9999});t.loading=!1})).catch((function(e){t.loading=!1}))}else this.$XModal.message({message:this.$t("tips.selectTime"),status:"error",zIndex:9999});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},onSelectDevice:function(t){this.deviceids=t},exportDetailData:function(){var t=this.deviceids,e=this.dateRange;if(0!=t.length)if(0!=e.length)if("tabTotal"==this.activeName){var i=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.startTime"),this.$t("reportForm.endTime"),this.$t("common.duration"),this.$t("reportForm.startDistance"),this.$t("reportForm.endDistance"),this.$t("reportForm.durationDistance"),this.$t("reportForm.avgSpeed"),this.$t("reportForm.maxSpeed"),this.$t("reportForm.startAddress"),this.$t("reportForm.endAddress"),this.$t("reportForm.startLonLat"),this.$t("reportForm.endLonLat")]],a=null;if(0==this.totalList.length)return;this.totalList.forEach((function(t,e){null==a&&(a=t.devicename);var r=[];r.push(e+1),r.push(t.devicename),r.push(t.deviceid),r.push(t.starttimeStr),r.push(t.endtimeStr),r.push(Object(b["nb"])(t.durationtime)),r.push(Object(b["nb"])(t.startdistance)),r.push(Object(b["nb"])(t.enddistance)),r.push(Object(b["nb"])(t.durationdistance)),r.push(Object(b["nb"])(t.avgspeed)),r.push(Object(b["nb"])(t.maxspeed)),r.push(null!=t.startaddress?t.startaddress:""),r.push(null!=t.endaddress?t.endaddress:""),r.push(t.slon+","+t.slat),r.push(t.elon+","+t.elat),i.push(r)}));var r=this.$t("reportForm.travelReport")+"-";1==this.totalList.length?r+=a:r+=this.$t("bgManage.tower",{count:this.totalList.length});var s={title:r,data:i,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(s).exportExcel(this)}else{i=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.duration")+"(H)",this.$t("reportForm.durationDistance")+"(km)",this.$t("reportForm.startTime"),this.$t("reportForm.endTime"),this.$t("reportForm.startDistance")+"(km)",this.$t("reportForm.endDistance")+"(km)",this.$t("reportForm.avgSpeed")+"(km)",this.$t("reportForm.maxSpeed")+"(km/h)",this.$t("reportForm.startAddress"),this.$t("reportForm.endAddress"),this.$t("reportForm.startLonLat"),this.$t("reportForm.endLonLat")]];var o="";if(0==this.detailsList.length)return;this.detailsList.forEach((function(t,e){var a=[];o=t.devicename,a.push(e+1),a.push(t.devicename),a.push(t.deviceid),a.push(Object(b["nb"])(t.durationtime)),a.push(Object(b["nb"])(t.durationdistance)),a.push(t.starttimeStr),a.push(t.endtimeStr),a.push(Object(b["nb"])(t.startdistance)),a.push(Object(b["nb"])(t.enddistance)),a.push(Object(b["nb"])(t.avgspeed)),a.push(Object(b["nb"])(t.maxspeed)),a.push(t.startaddress),a.push(t.endaddress),a.push(t.start_lon_lat),a.push(t.end_lon_lat),i.push(a)}));s={title:this.$t("reportForm.travelDetail"),devicename:o,data:i,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(s).exportExcel(this)}else this.$XModal.message({message:this.$t("tips.selectTime"),status:"error",zIndex:9999});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},exportAllData:function(){var t=this,e=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.duration")+"(H)",this.$t("monitor.total")+this.$t("reportForm.durationDistance")+"(km)",this.$t("reportForm.startTime"),this.$t("reportForm.endTime"),this.$t("reportForm.durationDistance")+"(km)",this.$t("reportForm.startDistance")+"(km)",this.$t("reportForm.endDistance")+"(km)",this.$t("reportForm.avgSpeed")+"(km)",this.$t("reportForm.maxSpeed")+"(km/h)",this.$t("reportForm.startAddress"),this.$t("reportForm.endAddress"),this.$t("reportForm.startLonLat"),this.$t("reportForm.endLonLat")]],i=this.deviceids,a=this.dateRange;if(0!=i.length)if(0!=a.length){"tabDetails"==this.activeName&&(this.activeName="tabTotal",this.totalList=[],this.detailsList=[]);var r=this.$dateformat.format(a[0],"yyyy-MM-dd"),o=this.$dateformat.format(a[1],"yyyy-MM-dd"),n={startday:r,endday:o,offset:this.$dateformat.getOffset(),deviceids:i,limitspeed:Number(this.mileage),reporttype:1},l=this.$t("reportForm.drivingStatistics");i.length>1?l+="-"+this.$t("bgManage.tower",{count:i.length}):l+="-"+s["a"].getDeviceNameByDeviceId(i[0]);var d={title:l,dateRange:r+" "+o},c=this.$dateformat;this.exportLoading=!0,Object(f["M"])(n).then((function(i){var a=i.summaries;if(t.exportLoading=!1,null!=a){var r=[],o=3;a.forEach((function(t,i){var a=t.records,n=t.deviceid,l=s["a"].getDeviceNameByDeviceId(n);if(t.devicename=l,null!=a&&a.length>0){t.starttimeStr=c.longToLocalDateTimeStr(t.starttime),t.endtimeStr=c.longToLocalDateTimeStr(t.endtime),t.durationtime=Object(b["nb"])(t.durationtime/1e3/3600),t.durationdistance=Object(b["nb"])(t.durationdistance/1e3);var d=o,h=o;a.forEach((function(a,r){a.starttimeStr=c.longToLocalDateTimeStr(a.starttime),a.endtimeStr=c.longToLocalDateTimeStr(a.endtime),a.durationtime=Object(b["nb"])(a.durationtime/1e3/3600),a.startdistance=Object(b["nb"])(a.startdistance/1e3),a.enddistance=Object(b["nb"])(a.enddistance/1e3),a.durationdistance=Object(b["nb"])(a.durationdistance/1e3),a.avgspeed=Object(b["nb"])(a.avgspeed/1e3),a.maxspeed=Object(b["nb"])(a.maxspeed/1e3),a.start_lon_lat=a.slon.toFixed(5)+","+a.slat.toFixed(5),a.end_lon_lat=a.elon.toFixed(5)+","+a.elat.toFixed(5);var s=[];s.push(i+1),s.push(t.devicename),s.push(t.deviceid),s.push(t.durationtime),s.push(t.durationdistance),s.push(a.starttimeStr),s.push(a.endtimeStr),s.push(a.durationdistance),s.push(a.startdistance),s.push(a.enddistance),s.push(a.avgspeed),s.push(a.maxspeed),s.push(a.startaddress),s.push(a.endaddress),s.push(a.start_lon_lat),s.push(a.end_lon_lat),e.push(s),o++,h++}));var m={s:{r:d,c:0},e:{r:h-1,c:0}};r.push(m),m={s:{r:d,c:1},e:{r:h-1,c:1}},r.push(m),m={s:{r:d,c:2},e:{r:h-1,c:2}},r.push(m),m={s:{r:d,c:3},e:{r:h-1,c:3}},r.push(m),m={s:{r:d,c:4},e:{r:h-1,c:4}},r.push(m)}else{var u=[];u.push(i+1),u.push(t.devicename),u.push(t.deviceid),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),u.push("-"),u.push("-"),u.push("-"),u.push("-"),e.push(u),o++}})),d.merges=r}d.data=e,new ExcelCls(d).exportExcel(t)}))}else this.$XModal.message({message:this.$t("tips.selectTime"),status:"error",zIndex:9999});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})}},mounted:function(){this.deviceids=[]}},w=x,$=(i("de69"),i("2877")),y=Object($["a"])(w,a,r,!1,null,null,null),S=y.exports;e["default"]=S},de69:function(t,e,i){"use strict";i("197ba")}}]);