(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10b302ce"],{1078:function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{ref:"wraper",class:t.wraperClasses,on:{mouseup:t.handleMouseup,mousemove:t.handleMousemove,mouseleave:t.handleMouseout}},[e("div",{class:"".concat(t.prefix,"-container")},[e("div",{class:"".concat(t.prefix,"-top-area-oil"),style:{height:"move"==t.verticalMode?t.leftSize:"100%"}},[t._t("top")],2),t._t("trigger",(function(){return[e("div",{ref:"trigger",class:"".concat(t.prefix,"-trigger-oil"),style:t.verticalTriggerStyle},[e("div",{class:"".concat(t.prefix,"-trigger-oil-wrap"),attrs:{unselectable:"on"},on:{mousedown:t.handleMousedown}})])]})),e("div",{class:"".concat(t.prefix,"-bottom-area"),style:{height:"move"==t.verticalMode?t.rightSize:"100%"}},[t._t("bottom")],2)],2)])},r=[],n=(i("c975"),i("a9e3"),function(t,e){return e.indexOf(t)>=0}),s={name:"MySplitPane",props:{value:{type:[Number,String],default:50},horizontalModeShowLeft:{type:Boolean,default:!0},verticalMode:{type:String,default:"move"},direction:{type:String,default:"horizontal",validator:function(t){return n(t,["vertical","horizontal"])}},min:{type:[Number,String],default:3},max:{type:[Number,String],default:97},maxRight:{type:Boolean,default:!1},right:{type:Boolean,default:!1},triggerStyle:{type:Object,default:function(){return{height:"4px",background:"#ffffff"}}}},data:function(){return{prefix:"split-pane",canMove:!1,triggerOffset:50,triggerOldOffset:50,offset:{},atMin:!1,atMax:!1,directionMark:0}},computed:{wraperClasses:function(){return[this.prefix,"vertical"===this.direction?"".concat(this.prefix,"-vertical"):"".concat(this.prefix,"-horizontal")]},leftSize:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},rightSize:function(){return this.right?"".concat(this.triggerOffset,"%"):"".concat(100-this.triggerOffset,"%")},triggerLeft:function(){return this.right?"".concat(100-this.triggerOffset,"%"):"".concat(this.triggerOffset,"%")},minTransed:function(){return this.transValue(this.min)},maxTransed:function(){var t=this.right?100-this.transValue(this.max):this.transValue(this.max);return this.maxRight?100-t:t},horizontalTriggerStyle:function(){return Object.assign({left:this.triggerLeft,borderTop:"1px solid #E2E3E5"},this.triggerStyle)},verticalTriggerStyle:function(){return Object.assign({top:this.triggerLeft},this.triggerStyle)}},methods:{handleMouseup:function(t){1==this.canMove&&(this.canMove=!1,this.$emit("on-resizing-end",t))},transValue:function(t){return"number"===typeof t?t:Math.floor(parseFloat(t)/this.$refs.wraper.offsetWidth*1e4)/100},handleMousedown:function(t){this.canMove=!0,this.triggerOldOffset=this.triggerOffset,this.offset={x:t.pageX,y:t.pageY},this.$emit("on-resizing-start",t),t.preventDefault()},handleMouseout:function(){this.canMove=!1},handleMousemove:function(t){if(this.canMove){var e,i=0;if("horizontal"===this.direction?(i=Math.floor((t.clientX-this.offset.x)/this.$refs.wraper.offsetWidth*1e4)/100,e=this.triggerOldOffset+(this.right?-i:i)):(i=Math.floor((t.clientY-this.offset.y)/this.$refs.wraper.offsetHeight*1e4)/100,e=this.triggerOldOffset+(this.right?-i:i)),this.right){var a=100-e;a<=this.minTransed?this.triggerOffset=100-Math.max(a,this.minTransed):this.triggerOffset=100-Math.min(a,this.maxTransed)}else e<=this.minTransed?this.triggerOffset=Math.max(e,this.minTransed):this.triggerOffset=Math.min(e,this.maxTransed);t.atMin=100-e<=this.minTransed,t.atMax=100-e>=this.maxTransed,t.pageX>this.directionMark?t.direction=1:t.direction=0,this.directionMark=t.pageX,this.$emit("input",this.triggerOffset),this.$emit("on-resizing",t)}},setTriggerOffset:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100,e.$emit("input",e.triggerOffset)}))}},watch:{value:function(t){var e=this;this.$nextTick((function(){e.triggerOffset="number"===typeof t?t:Math.floor(parseInt(t)/e.$refs.wraper.offsetWidth*1e4)/100}))}},mounted:function(){var t=this;void 0!==this.value&&(this.$nextTick((function(){t.triggerOffset="number"===typeof t.value?t.value:Math.floor(parseInt(t.value)/t.$refs.wraper.offsetWidth*1e4)/100})),this.triggerOffset="number"===typeof this.value?this.value:Math.floor(parseInt(this.value)/this.$refs.wraper.offsetWidth*1e4)/100)}},o=s,l=(i("acd3"),i("2877")),c=Object(l["a"])(o,a,r,!1,null,null,null),d=c.exports;e["a"]=d},"271ae":function(t,e,i){},"2ddc":function(t,e,i){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"multi-choice",style:t.warpStyle},[e("div",{staticClass:"multi-choice-input"},["daterange"==t.dateType?e("div",[e("el-date-picker",{attrs:{type:t.dateType,"picker-options":t.pickerOptions,"range-separator":"-",align:"center","unlink-panels":"",clearable:!1,"start-placeholder":t.$t("device.driverinitialdate"),"end-placeholder":t.$t("device.drivereffectivedate")},on:{change:t.onChange},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1):t._e(),"date"==t.dateType?e("div",[e("el-date-picker",{attrs:{type:"date","picker-options":t.datePickerOptions},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1):t._e(),"datetimerange"==t.dateType?e("div",{staticClass:"datetimerange"},[e("el-date-picker",{attrs:{type:t.dateType,"range-separator":"-","picker-options":t.pickerOptionsTime,align:"center","unlink-panels":"",clearable:!1,"start-placeholder":t.$t("device.driverinitialdate"),"end-placeholder":t.$t("device.drivereffectivedate"),"default-time":["00:00:00","23:59:59"]},on:{change:t.onChange},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1):t._e(),"month"==t.dateType?e("div",[e("el-date-picker",{attrs:{type:"month"},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1):t._e()])])},r=[],n=(i("99af"),i("5101")),s=i("5867"),o={name:"SelectDate",props:{value:{type:Array|Date,default:function(){return[]}},dateType:{type:String,default:"daterange"},label:{type:String,default:function(){return this.$t("common.selectTime")}}},computed:{isDaterange:function(){return"daterange"==this.dateType},warpStyle:function(){var t=200;switch(this.dateType){case"date":t=120;break;case"daterange":t=230;break;case"datetimerange":t=310;break}return{width:"".concat(t,"px")}}},mixins:[s["a"]],data:function(){var t=864e5;return{dateRange:[],date:new Date,month:new Date,pickerOptions:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(t){var e=new Date;t.$emit("pick",[e,e])}},{text:this.$t("reportForm.yesterDay"),onClick:function(e){var i=new Date;i.setTime(i.getTime()-t),e.$emit("pick",[i,i])}},{text:this.$t("missing.theWeek"),onClick:function(e){var i=new Date,a=new Date,r=i.getDay();i.setTime(i.getTime()-t*(r-1)),a.setTime(i.getTime()+6*t),e.$emit("pick",[i,a])}},{text:this.$t("missing.lastWeek"),onClick:function(e){var i=new Date,a=new Date,r=i.getDay(),n=i.getTime()-t*(r-1);i.setTime(n-7*t),a.setTime(n-t),e.$emit("pick",[i,a])}},{text:this.$t("missing.thisMonth"),onClick:function(t){var e=new Date,i=e.getFullYear(),a=e.getMonth()+1,r=new Date("".concat(i,"-").concat(a,"-01")),n=new Date("".concat(i,"-").concat(a,"-01 00:00:00"));n.setMonth(n.getMonth()+1),n=new Date(n.getTime()-1e3),t.$emit("pick",[r,n])}},{text:this.$t("missing.lastMonth"),onClick:function(t){var e=new Date;e.setMonth(e.getMonth()-1);var i=e.getFullYear(),a=e.getMonth()+1,r=new Date(new Date(i,a,1)-1).getDate(),n=new Date("".concat(i,"-").concat(a,"-01")),s=new Date("".concat(i,"-").concat(a,"-").concat(r));t.$emit("pick",[n,s])}}]},pickerOptionsTime:{shortcuts:[{text:this.$t("reportForm.toDay"),onClick:function(t){var e=new Date(n["a"].format(new Date,"yyyy-MM-dd")+" 00:00:00"),i=new Date(n["a"].format(new Date,"yyyy-MM-dd")+" 23:59:59");t.$emit("pick",[e,i])}},{text:this.$t("reportForm.yesterDay"),onClick:function(e){var i=new Date;i.setTime(i.getTime()-t),e.$emit("pick",[new Date(n["a"].format(i,"yyyy-MM-dd")+" 00:00:00"),new Date(n["a"].format(i,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.theWeek"),onClick:function(e){var i=new Date,a=new Date,r=i.getDay();i.setTime(i.getTime()-t*(r-1)),a.setTime(i.getTime()+6*t),e.$emit("pick",[new Date(n["a"].format(i,"yyyy-MM-dd")+" 00:00:00"),new Date(n["a"].format(a,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastWeek"),onClick:function(e){var i=new Date,a=new Date,r=i.getDay(),s=i.getTime()-t*(r-1);i.setTime(s-7*t),a.setTime(s-t),e.$emit("pick",[new Date(n["a"].format(i,"yyyy-MM-dd")+" 00:00:00"),new Date(n["a"].format(a,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.thisMonth"),onClick:function(t){var e=new Date,i=e.getFullYear(),a=e.getMonth()+1,r=new Date("".concat(i,"-").concat(a,"-01")),s=new Date("".concat(i,"-").concat(a,"-01 00:00:00"));s.setMonth(s.getMonth()+1),s=new Date(s.getTime()-1e3),t.$emit("pick",[new Date(n["a"].format(r,"yyyy-MM-dd")+" 00:00:00"),new Date(n["a"].format(s,"yyyy-MM-dd")+" 23:59:59")])}},{text:this.$t("missing.lastMonth"),onClick:function(t){var e=new Date;e.setMonth(e.getMonth()-1);var i=e.getFullYear(),a=e.getMonth()+1,r=new Date(new Date(i,a,1)-1).getDate(),s=new Date("".concat(i,"-").concat(a,"-01")),o=new Date("".concat(i,"-").concat(a,"-").concat(r));t.$emit("pick",[new Date(n["a"].format(s,"yyyy-MM-dd")+" 00:00:00"),new Date(n["a"].format(o,"yyyy-MM-dd")+" 23:59:59")])}}]}}},watch:{dateRange:function(t){null==t?this.$emit("input",[]):this.$emit("input",t)},value:function(t){this.dateRange=t},date:function(t){this.$emit("input",t)},month:function(t){this.$emit("input",t)}},methods:{onChange:function(t){this.$emit("input",t)}},mounted:function(){"date"==this.dateType?this.date=this.value:"month"==this.dateType?this.month=this.value:this.dateRange=this.value}},l=o,c=(i("e716"),i("2877")),d=Object(c["a"])(l,a,r,!1,null,"5dbb8594",null);e["a"]=d.exports},"4c3c":function(t,e,i){"use strict";i("4e82");e["a"]={data:function(){return{sortConfig:{sortMethod:function(t){var e=t.data,i=t.sortList,a=i[0],r=a.property,n=a.order,s=[];return s="desc"===n?e.sort((function(t,e){var i=t[r],a=e[r];if(isNaN(i)&&!isNaN(Date.parse(i))&&isNaN(a)&&!isNaN(Date.parse(a)))return Date.parse(a)-Date.parse(i);if(i=parseFloat(i),a=parseFloat(a),isNaN(i)||isNaN(a)){var n=e[r]+"";return n.localeCompare(t[r])}return a-i})):"asc"===n?e.sort((function(t,e){var i=t[r],a=e[r];if(isNaN(i)&&!isNaN(Date.parse(i))&&isNaN(a)&&!isNaN(Date.parse(a)))return Date.parse(i)-Date.parse(a);if(i=parseFloat(t[r]),a=parseFloat(e[r]),isNaN(i)||isNaN(a)){var n=t[r]+"";return n.localeCompare(e[r])}return i-a})):e.sort(),s}}}}}},"5aff":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"h",(function(){return r})),i.d(e,"l",(function(){return n})),i.d(e,"k",(function(){return s})),i.d(e,"c",(function(){return o})),i.d(e,"d",(function(){return l})),i.d(e,"e",(function(){return c})),i.d(e,"f",(function(){return d})),i.d(e,"g",(function(){return h})),i.d(e,"m",(function(){return u})),i.d(e,"i",(function(){return m})),i.d(e,"a",(function(){return f})),i.d(e,"j",(function(){return p}));var a="#2D9F28",r="#89C6F2",n="#FFC65E",s="red",o="#1EBEFF",l="#E505F7",c="#40A703",d="#F27908",h="#F180D1",u="#0F1F46",m="#000000",f={backgroundColor:"rgba(255,255,255,0.85)",borderColor:"transparent",textStyle:{fontSize:12,color:"#000"},padding:2},p=function(t,e,i,a,r){var n=t[0],s=r.contentSize,o=r.viewSize;return n+10>o[0]-s[0]?n=n-s[0]-10:n+=10,[n,"0%"]}},"6dd9":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"report-form full idle-oil"},[e("div",{staticClass:"report-form-inner"},[e("el-scrollbar",{staticStyle:{width:"100%"}},[e("div",{staticClass:"report-form-inner-header",staticStyle:{height:"45px"}},[e("div",{staticClass:"f_left"},[e("MultiChoiceVehicle",{on:{onSelectDevice:t.onSelectDevice}})],1),e("div",{staticClass:"f_left",staticStyle:{width:"94px"}},[e("el-select",{staticStyle:{width:"94px"},model:{value:t.oilIndex,callback:function(e){t.oilIndex=e},expression:"oilIndex"}},t._l(t.oilList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("div",{staticClass:"f_left",staticStyle:{width:"154px"}},[e("LabelWrap",{attrs:{label:t.$t("reportForm.minDuration")}},[e("el-select",{staticStyle:{width:"94px"},model:{value:t.interval,callback:function(e){t.interval=e},expression:"interval"}},t._l(t.timeList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("div",{staticClass:"f_left",staticStyle:{width:"154px"}},[e("LabelWrap",{attrs:{label:t.$t("reportForm.minOil")}},[e("el-select",{staticStyle:{width:"84px"},model:{value:t.ml,callback:function(e){t.ml=e},expression:"ml"}},t._l(t.mlList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("div",{staticClass:"f_left"},[e("SelectDate",{model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleQuery}},[t._v(t._s(t.$t("common.query")))])],1),e("div",{staticClass:"f_left"},[e("el-button",{attrs:{type:"primary",loading:t.exportLoading1},on:{click:t.exportData}},[t._v(t._s(t.$t("common.export")))])],1)])]),e("div",{staticClass:"report-form-inner-tabs"},[e("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:t.$t("reportForm.idleStatistics")+"(".concat(t.totalList.length,")"),name:"tabTotal"}}),e("el-tab-pane",{attrs:{label:"",name:"details"}})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:"details"==t.activeName,expression:"activeName=='details'"}],staticClass:"tableTitle"},[e("b",{domProps:{textContent:t._s(t.tableTitle)}}),t._v(" ("+t._s(t.detailsList.length)+") "),e("span",[t._v(t._s(t.$t("reportForm.totalIdleTime"))+":"+t._s(t.totalIdleTime))])])],1),e("div",{staticClass:"report-form-inner-content",staticStyle:{top:"80px"}},[e("div",{style:t.statisticsStyle},[e("vxe-table",{attrs:{"sort-config":t.sortConfig,"menu-config":t.tableMenu,border:"",resizable:"","show-overflow":"","auto-resize":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.totalList},on:{"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{title:t.$t("reportForm.action"),width:"70"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.handleClickRow(i.row)}}},[t._v(t._s(t.$t("reportForm.details")))])]}}])}),e("vxe-table-column",{attrs:{field:"devicename",title:t.$t("alarm.devName"),sortable:""}}),e("vxe-table-column",{attrs:{field:"deviceid",title:t.$t("alarm.devNum"),sortable:""}}),e("vxe-table-column",{attrs:{field:"creater",title:t.$t("reportForm.creater"),sortable:""},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-popover",{attrs:{placement:"bottom",trigger:"click"}},[e("div",{staticClass:"parents-wrapper"},t._l(t.parentsList,(function(i){return e("div",{key:i.username},[t._v(t._s(i.username)+"("+t._s(i.usertypeStr)+")")])})),0),e("el-button",{staticStyle:{color:"#000000"},attrs:{slot:"reference",type:"text"},on:{click:function(e){return t.queryParents(i.row.creater)}},slot:"reference"},[t._v(t._s(i.row.creater))])],1)]}}])}),e("vxe-table-column",{attrs:{field:"groupname",title:t.$t("reportForm.groupName"),sortable:""}}),e("vxe-table-column",{attrs:{field:"dateStr",width:"160",title:t.$t("reportForm.date"),sortable:""}}),e("vxe-table-column",{attrs:{field:"totalOil",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.idleOil"),sortable:""}}),e("vxe-table-column",{attrs:{field:"idleCount",title:t.$t("reportForm.idleCount"),sortable:""}}),e("vxe-table-column",{attrs:{field:"idleDuration",align:"right",title:t.$t("reportForm.idleDuration"),sortable:""}})],1)],1),e("div",{style:t.detailsStyle},[e("split-pane",{style:{height:"100%"},attrs:{direction:"vertical",showBtn:!1,min:25,max:75},on:{"on-resizing-end":t.onResizingEnd},model:{value:t.triggerOffsetV,callback:function(e){t.triggerOffsetV=e},expression:"triggerOffsetV"}},[e("div",{staticStyle:{height:"100%"},attrs:{slot:"top"},slot:"top"},[e("div",{staticClass:"idle-oil-echarts"},[e("IdleOilEcharts",{ref:"echartsIns"})],1)]),e("div",{staticStyle:{height:"100%"},attrs:{slot:"bottom"},slot:"bottom"},[e("div",{staticClass:"idle-oil-detail-table"},[e("vxe-table",{staticClass:"mytable-scrollbar",attrs:{border:"","highlight-current-row":"","menu-config":t.tableMenu,resizable:"","auto-resize":"","show-overflow":"","highlight-hover-row":"",size:"mini",height:"auto",data:t.detailsList},on:{"cell-click":t.onCellClick,"menu-click":t.handleClickTableMenu}},[e("vxe-table-column",{attrs:{type:"seq",width:"60",title:t.$t("reportForm.index")}}),e("vxe-table-column",{attrs:{field:"oilindex",title:t.$t("reportForm.oilIndex"),width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"soil",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.startOil"),width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"eoil",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.endOil"),width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"oilConsumption",formatter:t.numberToFixed2,align:"right",title:t.$t("reportForm.oilConsumption"),width:"120",sortable:""}}),e("vxe-table-column",{attrs:{field:"startDate",title:t.$t("reportForm.startTime"),width:"160",sortable:""}}),e("vxe-table-column",{attrs:{field:"endDate",title:t.$t("reportForm.endTime"),width:"160",sortable:""}}),e("vxe-table-column",{attrs:{field:"durationStr",align:"right",title:t.$t("reportForm.idleDuration"),width:"160",sortable:""}}),e("vxe-table-column",{attrs:{field:"address",title:t.$t("reportForm.address"),width:"240",sortable:""},scopedSlots:t._u([{key:"default",fn:function(i){return[e("span",{staticStyle:{"text-decoration":"underline",cursor:"pointer",color:"#388CFE"},domProps:{textContent:t._s(i.row.address)},on:{click:function(e){return t.seeMapTracks(i.row)}}})]}}])})],1)],1)])])],1)]),e("el-dialog",{attrs:{title:t.$t("reportForm.seeMap"),visible:t.dialogMap,width:"500",center:"","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogMap=e}}},[e("div",{staticStyle:{width:"100%",height:"400px"}},[e("ReportMap",{ref:"mapIns"})],1)])],1)])},r=[],n=(i("14d9"),i("4e82"),i("a9e3"),i("b680"),i("d3b7"),i("159b"),i("4795"),i("e561")),s=i("d462"),o=i("201d"),l=i("32eb"),c=i("1c31"),d=i("7cf8"),h=i("5101"),u=i("c276"),m=i("6e52"),f=function(){var t=this,e=t._self._c;return e("div",{ref:"chartId",staticClass:"full"})},p=[],g=i("5530"),v=(i("b0c0"),i("43c8")),b=i.n(v),y=i("2f62"),x=i("5aff"),$={name:"IdleOilEcharts",computed:Object(g["a"])({},Object(y["b"])(["isZh"])),methods:{initChart:function(){this.recvtime=[],this.speeds=[],this.distances=[],this.totalad=[],this.idleArr=[],this.voltages=[],this.accStates=[],this.devStates=[],this.rangeArr=[],this.firstDistance=0,this.chartsIns=b.a.init(this.$refs.chartId),this.chartsIns.setOption(this.getChartsOption(),!0)},updateRangeArr:function(t,e){var i=this,a=[];this.records.forEach((function(r,n){var s=r.updatetime,o=i.distances[n];t<=s&&s<=e?a.push(o):a.push("")})),this.rangeArr=a,this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.resize()},updateChartsOption:function(t){this.records=t;var e=this.isZh,i=[],a=[],r=[],n=[],s=[],o=[],l=[],c=[],d=this,u=0;t.forEach((function(t,m){0==m&&(u=t.totaldistance),o.push(t.voltage/100);var f=t.totalad;t.totalad=f/100,t.speed=(t.speed/1e3).toFixed(0),t.updatetimeStr=h["a"].longToLocalDateTimeStr(t.updatetime),l.push(d.getAccSwitchStatusStr(t)),c.push(e?t.strstatus:t.strstatusen),n.push(t.totalad),a.push(t.speed),t.totaldistance=((t.totaldistance-u)/1e3).toFixed(2),r.push(t.totaldistance),i.push(t.updatetimeStr);var p=d.isIdleTrack(t);p?s.push(t.totalad):s.push("-")})),this.recvtime=i,this.speeds=a,this.distances=r,this.totalad=n,this.idleArr=s,this.voltages=o,this.accStates=l,this.devStates=c,this.firstDistance=u,this.chartsIns.setOption(this.getChartsOption(),!0),this.chartsIns.resize()},resize:function(){this.chartsIns.resize()},isIdleTrack:function(t){var e=!1,i=t.status,a=3&i;if(3==a){var r=t.speed;r<=0&&(e=!0)}return e},getAccSwitchStatusStr:function(t){var e=!1;if(t){var i=t["status"],a=3&i;3==a&&(e=!0)}return e?this.$t("video.accOpen"):this.$t("video.accClose")},getChartsOption:function(){var t=this.$t("reportForm.oil"),e=this.$t("reportForm.speed"),i=this.$t("reportForm.mileage"),a=this.$t("reportForm.time"),r=this.$t("reportForm.status"),n=this.$t("missing.idle"),s=this.$t("missing.accState"),o=this.$t("reportForm.voltage");return{grid:{top:30,left:60,right:60,bottom:40},tooltip:Object(g["a"])(Object(g["a"])({trigger:"axis"},x["a"]),{},{formatter:function(r){var s="<div>".concat(r[0].name,"</div>");for(var l in r){var c=r[l].seriesName,d=r[l].value;c&&c!=a&&(s+=c==i?Object(u["i"])(x["b"],c,d,"km"):c==e?Object(u["i"])(x["h"],c,d,"km/h"):c==o?Object(u["i"])(x["m"],c,d,"V"):c==t?"-"!=d?Object(u["i"])(x["k"],c,d,"L"):Object(u["i"])(x["k"],c,d,""):c==n?"-"!=d?Object(u["i"])(x["l"],c,d,"L"):Object(u["i"])(x["l"],c,d,""):Object(u["i"])(x["m"],c,d,""))}return'<div style="width:230px">'.concat(s,"</div>")}}),legend:{data:[e,i,t,n],x:"left"},toolbox:{show:!1,feature:{magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}},itemSize:14},dataZoom:[{show:!0,realtime:!0,start:0,end:100,height:20,backgroundColor:"#EDEDED",fillerColor:"rgb(54, 72, 96,0.5)",bottom:0},{type:"inside",realtime:!0,start:0,end:100,height:20,bottom:0}],xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!1},data:this.recvtime}],yAxis:[{name:"",type:"value",nameTextStyle:10,nameGap:5},{name:"",type:"value",nameTextStyle:10,nameGap:2,axisLabel:{formatter:"{value} km"},axisTick:{show:!1}}],series:[{name:a,type:"line",symbol:"none",yAxisIndex:1,color:"#F0805A",smooth:!0,data:this.recvtime},{name:e,type:"line",symbol:"none",yAxisIndex:0,smooth:!0,color:x["h"],data:this.speeds},{name:i,type:"line",symbol:"none",yAxisIndex:1,color:x["b"],smooth:!0,data:this.distances},{smooth:!0,name:t,type:"line",symbol:"none",color:x["k"],data:this.totalad},{smooth:!0,name:n,type:"line",symbol:"none",color:x["l"],data:this.idleArr},{name:s,type:"line",symbol:"none",color:x["m"],data:this.accStates,smooth:!0},{name:o,type:"line",symbol:"none",color:x["m"],data:this.voltages,smooth:!0},{name:r,type:"line",symbol:"none",color:x["m"],data:this.devStates,smooth:!0},{smooth:!0,name:"rangeArr",type:"line",yAxisIndex:1,symbol:"none",color:"#B217F7",data:this.rangeArr}]}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))}},w=$,D=i("2877"),k=Object(D["a"])(w,f,p,!1,null,null,null),M=k.exports,O=i("1078"),T=i("4c3c"),F=i("a05b"),C=i("0c87"),S={name:"idleOil",data:function(){return{loading:!1,dialogMap:!1,exportLoading1:!1,activeName:"tabTotal",tableTitle:"",triggerOffsetV:45,totalIdleTime:"",dateRange:[new Date,new Date],totalList:[],detailsList:[],oilIndex:"0",oilList:[{label:this.$t("monitor.all"),value:"0"},{label:this.$t("reportForm.tank1"),value:"1"},{label:this.$t("reportForm.tank1"),value:"2"},{label:this.$t("reportForm.tank1"),value:"3"},{label:this.$t("reportForm.tank1"),value:"4"}],interval:"5",timeList:[{label:"5"+this.$t("monitor.minute"),value:"5"},{label:"10"+this.$t("monitor.minute"),value:"10"},{label:"15"+this.$t("monitor.minute"),value:"15"},{label:"30"+this.$t("monitor.minute"),value:"30"}],ml:"100",mlList:[{label:"0ml",value:"0"},{label:"100ml",value:"100"},{label:"200ml",value:"200"},{label:"300ml",value:"300"},{label:"400ml",value:"400"},{label:"500ml",value:"500"},{label:"600ml",value:"600"},{label:"700ml",value:"700"},{label:"800ml",value:"800"},{label:"900ml",value:"900"}]}},mixins:[T["a"],F["a"],C["a"]],watch:{dateRange:function(){this.loading||this.handleQuery()}},computed:{statisticsStyle:function(){return{zIndex:"tabTotal"==this.activeName?999:0}},detailsStyle:function(){return{zIndex:"details"==this.activeName?999:0}}},components:{MultiChoiceVehicle:n["a"],SelectDate:s["a"],IdleOilEcharts:M,SplitPane:O["a"],LabelWrap:o["a"],ReportMap:l["a"]},methods:{numberToFixed2:u["nb"],onCellClick:function(t){var e=t.row;this.$refs.echartsIns.updateRangeArr(e.begintime,e.endtime)},seeMapTracks:function(t){var e=this,i={deviceid:t.deviceid,begintime:t.startDate,endtime:t.endDate,timezone:h["a"].getOffset()};this.dialogMap=!0,Object(d["X"])(i).then((function(t){t.status;var i=t.records;setTimeout((function(){i=i||[],e.$refs.mapIns.markersAndLineLayerToMap(i)}),300)})).catch((function(t){console.log(t)}))},onResizingEnd:function(){this.$refs.echartsIns.resize()},onSelectDevice:function(t){this.deviceids=t},handleQuery:function(){var t=this,e=this.deviceids,i=this.dateRange;if(0!=e.length)if(0!=i.length){"details"==this.activeName&&(this.activeName="tabTotal",this.totalList=[],this.detailsList=[]);var a=h["a"].format(i[0],"yyyy-MM-dd"),r=h["a"].format(i[1],"yyyy-MM-dd"),n={startday:a,endday:r,offset:h["a"].getOffset(),devices:e,oilstate:1,oilindex:Number(this.oilIndex),interval:Number(this.ml),intervalminutes:Number(this.interval)};this.loading=!0,this.queryDetailDateRange=n.startday+"  "+n.endday,Object(c["Y"])(n).then((function(e){var i=e.records,a=e.addressmap;t.addressmap=a,t.loading=!1;var r=[];null!=i&&(i.forEach((function(t){var e=t.deviceid,i=m["a"].deviceInfos[e],r=i.devicename;t.creater=m["a"].getShowName(i.creater),t.groupname=i.groupname,t.dateStr=n.startday+" - "+n.endday,t.startday=n.startday,t.endday=n.endday,t.devicename=r;var s=0,o=t.records,l=0;o.forEach((function(t){t.deviceid=e,t.eoil=t.eoil/100,t.soil=t.soil/100,t.idleoilinmemory=t.idleoilinmemory/100,s+=Math.abs(t.idleoilinmemory),l+=t.endtime-t.begintime,t.oilConsumption=t.idleoilinmemory,t.address=Object(u["L"])(a,t.slat,t.slon)})),s=s,t.totalOil=s,t.idleCount=o.length,t.duration=l/1e3/3600,t.idleDuration=Object(u["Hb"])(l,!0)})),i.sort((function(t,e){var i=0;return i=e.totalOil-t.totalOil,0==i&&(i=e.devicename.localeCompare(t.devicename)),i})),r=i),t.totalList=r})).catch((function(e){console.log(e),t.loading=!1}))}else this.$XModal.message({message:this.$t("tips.selectTime"),status:"error",zIndex:9999});else this.$XModal.message({message:this.$t("tips.selectDevice"),status:"error",zIndex:9999})},handleClickRow:function(t){var e=this;if(t.records&&t.records.length>0){this.$refs.echartsIns.rangeArr=[],this.activeName="details",this.tableTitle=t.devicename+"-"+t.deviceid,this.totalIdleTime=t.idleDuration,this.detailsList=this.getAccDetailTableData(t);var i={startday:t.startday,endday:t.endday,offset:h["a"].getOffset(),devices:[t.deviceid]};Object(c["fb"])(i).then((function(t){var i=t.records,a=i[0].records;e.$refs.echartsIns.updateChartsOption(a)}))}else this.$XModal.message({message:this.$t("tips.noData"),status:"error",zIndex:9999})},getAccDetailTableData:function(t){var e=[],i=t.records;i.sort((function(t,e){return t.begintime-e.begintime}));var a=t.deviceid,r=t.devicename;return i.forEach((function(t,i){var n=((t.endtime-t.begintime)/1e3/3600).toFixed(2),s=Object(u["Hb"])(t.endtime-t.begintime,!0);e.push({index:i+1,deviceid:a,devicename:r,startDate:h["a"].longToLocalDateTimeStr(t.begintime),endDate:h["a"].longToLocalDateTimeStr(t.endtime),duration:n,begintime:t.begintime,endtime:t.endtime,soil:t.soil,eoil:t.eoil,oilindex:Object(u["U"])(t.oilindex),oilConsumption:t.oilConsumption,durationStr:s,address:t.address,slon:t.slon,slat:t.slat})})),e},exportData:function(){if("tabTotal"==this.activeName){var t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.creater"),this.$t("reportForm.groupName"),this.$t("reportForm.date"),this.$t("reportForm.idleOil"),this.$t("reportForm.idleCount"),this.$t("reportForm.idleDuration")]];if(0==this.totalList.length)return;this.totalList.forEach((function(e,i){var a=[];a.push(i+1),a.push(e.devicename),a.push(e.deviceid),a.push(e.creater),a.push(e.groupname),a.push(e.dateStr),a.push(Object(u["nb"])(e.totalOil)),a.push(e.idleCount),a.push(e.idleDuration),t.push(a)}));var e={title:this.$t("reportForm.idleOil"),data:t,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(e).exportExcel(this)}else{t=[[this.$t("reportForm.index"),this.$t("alarm.devName"),this.$t("alarm.devNum"),this.$t("reportForm.oilIndex"),this.$t("reportForm.startOil"),this.$t("reportForm.endOil"),this.$t("reportForm.oilConsumption"),this.$t("reportForm.startTime"),this.$t("reportForm.endTime"),this.$t("reportForm.idleDuration"),this.$t("reportForm.address"),this.$t("monitor.coordinate")]];var i="";if(0==this.detailsList.length)return;this.detailsList.forEach((function(e,a){var r=[];""==i&&(i=e.deviceid),r.push(a+1),r.push(e.devicename),r.push(e.deviceid),r.push(e.oilindex),r.push(Object(u["nb"])(e.soil)),r.push(Object(u["nb"])(e.eoil)),r.push(Object(u["nb"])(e.oilConsumption)),r.push(e.startDate),r.push(e.endDate),r.push(e.durationStr),r.push(e.address?e.address:""),r.push(e.slon+","+e.slat),t.push(r)}));e={title:this.$t("reportForm.idleOil")+"-"+i,data:t,dateRange:this.queryDetailDateRange};this.exportLoading1=!0,new ExcelCls(e).exportExcel(this)}}},mounted:function(){this.deviceids=[]}},N=S,I=(i("765ca"),Object(D["a"])(N,a,r,!1,null,null,null)),_=I.exports;e["default"]=_},"765ca":function(t,e,i){"use strict";i("dbad")},9758:function(t,e,i){},acd3:function(t,e,i){"use strict";i("9758")},d462:function(t,e,i){"use strict";var a=i("2ddc");e["a"]=a["a"]},dbad:function(t,e,i){},e561:function(t,e,i){"use strict";var a=i("ea22");e["a"]=a["a"]},e716:function(t,e,i){"use strict";i("271ae")}}]);